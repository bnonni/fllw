"use strict";var Web5Dids=(()=>{var aE=Object.create;var na=Object.defineProperty;var uE=Object.getOwnPropertyDescriptor;var dE=Object.getOwnPropertyNames;var lE=Object.getPrototypeOf,fE=Object.prototype.hasOwnProperty;var Se=(t,e)=>()=>(t&&(e=t(t=0)),e);var F=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Je=(t,e)=>{for(var r in e)na(t,r,{get:e[r],enumerable:!0})},Ay=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of dE(e))!fE.call(t,i)&&i!==r&&na(t,i,{get:()=>e[i],enumerable:!(n=uE(e,i))||n.enumerable});return t};var l=(t,e,r)=>(r=t!=null?aE(lE(t)):{},Ay(e||!t||!t.__esModule?na(r,"default",{value:t,enumerable:!0}):r,t)),ia=t=>Ay(na({},"__esModule",{value:!0}),t);var Iy=F(oa=>{"use strict";var ck=l(f());oa.byteLength=pE;oa.toByteArray=mE;oa.fromByteArray=wE;var Ar=[],Xt=[],hE=typeof Uint8Array<"u"?Uint8Array:Array,Pd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(di=0,Ty=Pd.length;di<Ty;++di)Ar[di]=Pd[di],Xt[Pd.charCodeAt(di)]=di;var di,Ty;Xt[45]=62;Xt[95]=63;function _y(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function pE(t){var e=_y(t),r=e[0],n=e[1];return(r+n)*3/4-n}function yE(t,e,r){return(e+r)*3/4-r}function mE(t){var e,r=_y(t),n=r[0],i=r[1],o=new hE(yE(t,n,i)),s=0,c=i>0?n-4:n,u;for(u=0;u<c;u+=4)e=Xt[t.charCodeAt(u)]<<18|Xt[t.charCodeAt(u+1)]<<12|Xt[t.charCodeAt(u+2)]<<6|Xt[t.charCodeAt(u+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Xt[t.charCodeAt(u)]<<2|Xt[t.charCodeAt(u+1)]>>4,o[s++]=e&255),i===1&&(e=Xt[t.charCodeAt(u)]<<10|Xt[t.charCodeAt(u+1)]<<4|Xt[t.charCodeAt(u+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function bE(t){return Ar[t>>18&63]+Ar[t>>12&63]+Ar[t>>6&63]+Ar[t&63]}function gE(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(bE(n));return i.join("")}function wE(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,c=r-n;s<c;s+=o)i.push(gE(t,s,s+o>c?c:s+o));return n===1?(e=t[r-1],i.push(Ar[e>>2]+Ar[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Ar[e>>10]+Ar[e>>4&63]+Ar[e<<2&63]+"=")),i.join("")}});var By=F(Ld=>{var uk=l(f());Ld.read=function(t,e,r,n,i){var o,s,c=i*8-n-1,u=(1<<c)-1,d=u>>1,a=-7,h=r?i-1:0,m=r?-1:1,y=t[e+h];for(h+=m,o=y&(1<<-a)-1,y>>=-a,a+=c;a>0;o=o*256+t[e+h],h+=m,a-=8);for(s=o&(1<<-a)-1,o>>=-a,a+=n;a>0;s=s*256+t[e+h],h+=m,a-=8);if(o===0)o=1-d;else{if(o===u)return s?NaN:(y?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-d}return(y?-1:1)*s*Math.pow(2,o-n)};Ld.write=function(t,e,r,n,i,o){var s,c,u,d=o*8-i-1,a=(1<<d)-1,h=a>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:o-1,p=n?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,s=a):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+h>=1?e+=m/u:e+=m*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=a?(c=0,s=a):s+h>=1?(c=(e*u-1)*Math.pow(2,i),s=s+h):(c=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[r+y]=c&255,y+=p,c/=256,i-=8);for(s=s<<i|c,d+=i;d>0;t[r+y]=s&255,y+=p,s/=256,d-=8);t[r+y-p]|=b*128}});var Tt=F(yo=>{"use strict";var fk=l(f());var Kd=Iy(),ho=By(),ky=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;yo.Buffer=R;yo.SlowBuffer=AE;yo.INSPECT_MAX_BYTES=50;var sa=2147483647;yo.kMaxLength=sa;R.TYPED_ARRAY_SUPPORT=xE();!R.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function xE(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(R.prototype,"parent",{enumerable:!0,get:function(){if(R.isBuffer(this))return this.buffer}});Object.defineProperty(R.prototype,"offset",{enumerable:!0,get:function(){if(R.isBuffer(this))return this.byteOffset}});function Qr(t){if(t>sa)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,R.prototype),e}function R(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Fd(t)}return Uy(t,e,r)}R.poolSize=8192;function Uy(t,e,r){if(typeof t=="string")return vE(t,e);if(ArrayBuffer.isView(t))return DE(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Tr(t,ArrayBuffer)||t&&Tr(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Tr(t,SharedArrayBuffer)||t&&Tr(t.buffer,SharedArrayBuffer)))return Nd(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return R.from(n,e,r);let i=SE(t);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return R.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}R.from=function(t,e,r){return Uy(t,e,r)};Object.setPrototypeOf(R.prototype,Uint8Array.prototype);Object.setPrototypeOf(R,Uint8Array);function Py(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function EE(t,e,r){return Py(t),t<=0?Qr(t):e!==void 0?typeof r=="string"?Qr(t).fill(e,r):Qr(t).fill(e):Qr(t)}R.alloc=function(t,e,r){return EE(t,e,r)};function Fd(t){return Py(t),Qr(t<0?0:qd(t)|0)}R.allocUnsafe=function(t){return Fd(t)};R.allocUnsafeSlow=function(t){return Fd(t)};function vE(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!R.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=Ly(t,e)|0,n=Qr(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function Md(t){let e=t.length<0?0:qd(t.length)|0,r=Qr(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function DE(t){if(Tr(t,Uint8Array)){let e=new Uint8Array(t);return Nd(e.buffer,e.byteOffset,e.byteLength)}return Md(t)}function Nd(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,R.prototype),n}function SE(t){if(R.isBuffer(t)){let e=qd(t.length)|0,r=Qr(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||jd(t.length)?Qr(0):Md(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Md(t.data)}function qd(t){if(t>=sa)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+sa.toString(16)+" bytes");return t|0}function AE(t){return+t!=t&&(t=0),R.alloc(+t)}R.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==R.prototype};R.compare=function(e,r){if(Tr(e,Uint8Array)&&(e=R.from(e,e.offset,e.byteLength)),Tr(r,Uint8Array)&&(r=R.from(r,r.offset,r.byteLength)),!R.isBuffer(e)||!R.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0};R.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};R.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return R.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=R.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){let s=e[n];if(Tr(s,Uint8Array))o+s.length>i.length?(R.isBuffer(s)||(s=R.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(R.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function Ly(t,e){if(R.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Tr(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return $d(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Hy(t).length;default:if(i)return n?-1:$d(t).length;e=(""+e).toLowerCase(),i=!0}}R.byteLength=Ly;function TE(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return LE(this,e,r);case"utf8":case"utf-8":return My(this,e,r);case"ascii":return UE(this,e,r);case"latin1":case"binary":return PE(this,e,r);case"base64":return CE(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return KE(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}R.prototype._isBuffer=!0;function li(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}R.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)li(this,r,r+1);return this};R.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)li(this,r,r+3),li(this,r+1,r+2);return this};R.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)li(this,r,r+7),li(this,r+1,r+6),li(this,r+2,r+5),li(this,r+3,r+4);return this};R.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?My(this,0,e):TE.apply(this,arguments)};R.prototype.toLocaleString=R.prototype.toString;R.prototype.equals=function(e){if(!R.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:R.compare(this,e)===0};R.prototype.inspect=function(){let e="",r=yo.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};ky&&(R.prototype[ky]=R.prototype.inspect);R.prototype.compare=function(e,r,n,i,o){if(Tr(e,Uint8Array)&&(e=R.from(e,e.offset,e.byteLength)),!R.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),r<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,c=n-r,u=Math.min(s,c),d=this.slice(i,o),a=e.slice(r,n);for(let h=0;h<u;++h)if(d[h]!==a[h]){s=d[h],c=a[h];break}return s<c?-1:c<s?1:0};function Ky(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,jd(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=R.from(e,n)),R.isBuffer(e))return e.length===0?-1:Ry(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Ry(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Ry(t,e,r,n,i){let o=1,s=t.length,c=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,s/=2,c/=2,r/=2}function u(a,h){return o===1?a[h]:a.readUInt16BE(h*o)}let d;if(i){let a=-1;for(d=r;d<s;d++)if(u(t,d)===u(e,a===-1?0:d-a)){if(a===-1&&(a=d),d-a+1===c)return a*o}else a!==-1&&(d-=d-a),a=-1}else for(r+c>s&&(r=s-c),d=r;d>=0;d--){let a=!0;for(let h=0;h<c;h++)if(u(t,d+h)!==u(e,h)){a=!1;break}if(a)return d}return-1}R.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};R.prototype.indexOf=function(e,r,n){return Ky(this,e,r,n,!0)};R.prototype.lastIndexOf=function(e,r,n){return Ky(this,e,r,n,!1)};function _E(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let c=parseInt(e.substr(s*2,2),16);if(jd(c))return s;t[r+s]=c}return s}function IE(t,e,r,n){return ca($d(e,t.length-r),t,r,n)}function BE(t,e,r,n){return ca(FE(e),t,r,n)}function kE(t,e,r,n){return ca(Hy(e),t,r,n)}function RE(t,e,r,n){return ca(qE(e,t.length-r),t,r,n)}R.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-r;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return _E(this,e,r,n);case"utf8":case"utf-8":return IE(this,e,r,n);case"ascii":case"latin1":case"binary":return BE(this,e,r,n);case"base64":return kE(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return RE(this,e,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};R.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function CE(t,e,r){return e===0&&r===t.length?Kd.fromByteArray(t):Kd.fromByteArray(t.slice(e,r))}function My(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let o=t[i],s=null,c=o>239?4:o>223?3:o>191?2:1;if(i+c<=r){let u,d,a,h;switch(c){case 1:o<128&&(s=o);break;case 2:u=t[i+1],(u&192)===128&&(h=(o&31)<<6|u&63,h>127&&(s=h));break;case 3:u=t[i+1],d=t[i+2],(u&192)===128&&(d&192)===128&&(h=(o&15)<<12|(u&63)<<6|d&63,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:u=t[i+1],d=t[i+2],a=t[i+3],(u&192)===128&&(d&192)===128&&(a&192)===128&&(h=(o&15)<<18|(u&63)<<12|(d&63)<<6|a&63,h>65535&&h<1114112&&(s=h))}}s===null?(s=65533,c=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=c}return OE(n)}var Cy=4096;function OE(t){let e=t.length;if(e<=Cy)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Cy));return r}function UE(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function PE(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function LE(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=e;o<r;++o)i+=VE[t[o]];return i}function KE(t,e,r){let n=t.slice(e,r),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}R.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,R.prototype),i};function ot(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}R.prototype.readUintLE=R.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||ot(e,r,this.length);let i=this[e],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[e+s]*o;return i};R.prototype.readUintBE=R.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||ot(e,r,this.length);let i=this[e+--r],o=1;for(;r>0&&(o*=256);)i+=this[e+--r]*o;return i};R.prototype.readUint8=R.prototype.readUInt8=function(e,r){return e=e>>>0,r||ot(e,1,this.length),this[e]};R.prototype.readUint16LE=R.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||ot(e,2,this.length),this[e]|this[e+1]<<8};R.prototype.readUint16BE=R.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||ot(e,2,this.length),this[e]<<8|this[e+1]};R.prototype.readUint32LE=R.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||ot(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};R.prototype.readUint32BE=R.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||ot(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};R.prototype.readBigUInt64LE=On(function(e){e=e>>>0,po(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Bs(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});R.prototype.readBigUInt64BE=On(function(e){e=e>>>0,po(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Bs(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});R.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||ot(e,r,this.length);let i=this[e],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};R.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||ot(e,r,this.length);let i=r,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*r)),s};R.prototype.readInt8=function(e,r){return e=e>>>0,r||ot(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};R.prototype.readInt16LE=function(e,r){e=e>>>0,r||ot(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};R.prototype.readInt16BE=function(e,r){e=e>>>0,r||ot(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};R.prototype.readInt32LE=function(e,r){return e=e>>>0,r||ot(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};R.prototype.readInt32BE=function(e,r){return e=e>>>0,r||ot(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};R.prototype.readBigInt64LE=On(function(e){e=e>>>0,po(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Bs(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});R.prototype.readBigInt64BE=On(function(e){e=e>>>0,po(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Bs(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});R.prototype.readFloatLE=function(e,r){return e=e>>>0,r||ot(e,4,this.length),ho.read(this,e,!0,23,4)};R.prototype.readFloatBE=function(e,r){return e=e>>>0,r||ot(e,4,this.length),ho.read(this,e,!1,23,4)};R.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||ot(e,8,this.length),ho.read(this,e,!0,52,8)};R.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||ot(e,8,this.length),ho.read(this,e,!1,52,8)};function At(t,e,r,n,i,o){if(!R.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}R.prototype.writeUintLE=R.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;At(this,e,r,n,c,0)}let o=1,s=0;for(this[r]=e&255;++s<n&&(o*=256);)this[r+s]=e/o&255;return r+n};R.prototype.writeUintBE=R.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;At(this,e,r,n,c,0)}let o=n-1,s=1;for(this[r+o]=e&255;--o>=0&&(s*=256);)this[r+o]=e/s&255;return r+n};R.prototype.writeUint8=R.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||At(this,e,r,1,255,0),this[r]=e&255,r+1};R.prototype.writeUint16LE=R.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||At(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};R.prototype.writeUint16BE=R.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||At(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};R.prototype.writeUint32LE=R.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||At(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};R.prototype.writeUint32BE=R.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||At(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Ny(t,e,r,n,i){jy(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,r}function $y(t,e,r,n,i){jy(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o=o>>8,t[r+6]=o,o=o>>8,t[r+5]=o,o=o>>8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s=s>>8,t[r+2]=s,s=s>>8,t[r+1]=s,s=s>>8,t[r]=s,r+8}R.prototype.writeBigUInt64LE=On(function(e,r=0){return Ny(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});R.prototype.writeBigUInt64BE=On(function(e,r=0){return $y(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});R.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let u=Math.pow(2,8*n-1);At(this,e,r,n,u-1,-u)}let o=0,s=1,c=0;for(this[r]=e&255;++o<n&&(s*=256);)e<0&&c===0&&this[r+o-1]!==0&&(c=1),this[r+o]=(e/s>>0)-c&255;return r+n};R.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let u=Math.pow(2,8*n-1);At(this,e,r,n,u-1,-u)}let o=n-1,s=1,c=0;for(this[r+o]=e&255;--o>=0&&(s*=256);)e<0&&c===0&&this[r+o+1]!==0&&(c=1),this[r+o]=(e/s>>0)-c&255;return r+n};R.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||At(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};R.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||At(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};R.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||At(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};R.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||At(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};R.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||At(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};R.prototype.writeBigInt64LE=On(function(e,r=0){return Ny(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});R.prototype.writeBigInt64BE=On(function(e,r=0){return $y(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Fy(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function qy(t,e,r,n,i){return e=+e,r=r>>>0,i||Fy(t,e,r,4,34028234663852886e22,-34028234663852886e22),ho.write(t,e,r,n,23,4),r+4}R.prototype.writeFloatLE=function(e,r,n){return qy(this,e,r,!0,n)};R.prototype.writeFloatBE=function(e,r,n){return qy(this,e,r,!1,n)};function Vy(t,e,r,n,i){return e=+e,r=r>>>0,i||Fy(t,e,r,8,17976931348623157e292,-17976931348623157e292),ho.write(t,e,r,n,52,8),r+8}R.prototype.writeDoubleLE=function(e,r,n){return Vy(this,e,r,!0,n)};R.prototype.writeDoubleBE=function(e,r,n){return Vy(this,e,r,!1,n)};R.prototype.copy=function(e,r,n,i){if(!R.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),o};R.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!R.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=r;o<n;++o)this[o]=e;else{let s=R.isBuffer(e)?e:R.from(e,i),c=s.length;if(c===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-r;++o)this[o+r]=s[o%c]}return this};var fo={};function Vd(t,e,r){fo[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}Vd("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Vd("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);Vd("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=Oy(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=Oy(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function Oy(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function ME(t,e,r){po(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Bs(e,t.length-(r+1))}function jy(t,e,r,n,i,o){if(t>r||t<e){let s=typeof e=="bigint"?"n":"",c;throw o>3?e===0||e===BigInt(0)?c=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:c=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:c=`>= ${e}${s} and <= ${r}${s}`,new fo.ERR_OUT_OF_RANGE("value",c,t)}ME(n,i,o)}function po(t,e){if(typeof t!="number")throw new fo.ERR_INVALID_ARG_TYPE(e,"number",t)}function Bs(t,e,r){throw Math.floor(t)!==t?(po(t,r),new fo.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new fo.ERR_BUFFER_OUT_OF_BOUNDS:new fo.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var NE=/[^+/0-9A-Za-z-_]/g;function $E(t){if(t=t.split("=")[0],t=t.trim().replace(NE,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function $d(t,e){e=e||1/0;let r,n=t.length,i=null,o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function FE(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function qE(t,e){let r,n,i,o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function Hy(t){return Kd.toByteArray($E(t))}function ca(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Tr(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function jd(t){return t!==t}var VE=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function On(t){return typeof BigInt>"u"?jE:t}function jE(){throw new Error("BigInt not supported")}});var f=F(()=>{"use strict";var zy=Tt().Buffer,{Buffer:HE}=Tt();zy.prototype.writeBigUInt64BE=HE.prototype.writeBigUInt64BE;globalThis.Buffer=zy});var Gy=F((Dk,Wy)=>{var Sk=l(f()),zE=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,aa=()=>zE.now(),WE=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),Hd=t=>t===1/0||WE(t),zd=class t{constructor({max:e=1/0,ttl:r,updateAgeOnGet:n=!1,checkAgeOnGet:i=!1,noUpdateTTL:o=!1,dispose:s,noDisposeOnSet:c=!1}={}){if(this.expirations=Object.create(null),this.data=new Map,this.expirationMap=new Map,r!==void 0&&!Hd(r))throw new TypeError("ttl must be positive integer or Infinity if set");if(!Hd(e))throw new TypeError("max must be positive integer or Infinity");if(this.ttl=r,this.max=e,this.updateAgeOnGet=!!n,this.checkAgeOnGet=!!i,this.noUpdateTTL=!!o,this.noDisposeOnSet=!!c,s!==void 0){if(typeof s!="function")throw new TypeError("dispose must be function if set");this.dispose=s}this.timer=void 0,this.timerExpiration=void 0}setTimer(e,r){if(this.timerExpiration<e)return;this.timer&&clearTimeout(this.timer);let n=setTimeout(()=>{this.timer=void 0,this.timerExpiration=void 0,this.purgeStale();for(let i in this.expirations){this.setTimer(i,i-aa());break}},r);n.unref&&n.unref(),this.timerExpiration=e,this.timer=n}cancelTimer(){this.timer&&(clearTimeout(this.timer),this.timerExpiration=void 0,this.timer=void 0)}cancelTimers(){return process.emitWarning('TTLCache.cancelTimers has been renamed to TTLCache.cancelTimer (no "s"), and will be removed in the next major version update'),this.cancelTimer()}clear(){let e=this.dispose!==t.prototype.dispose?[...this]:[];this.data.clear(),this.expirationMap.clear(),this.cancelTimer(),this.expirations=Object.create(null);for(let[r,n]of e)this.dispose(n,r,"delete")}setTTL(e,r=this.ttl){let n=this.expirationMap.get(e);if(n!==void 0){let i=this.expirations[n];!i||i.length<=1?delete this.expirations[n]:this.expirations[n]=i.filter(o=>o!==e)}if(r!==1/0){let i=Math.floor(aa()+r);this.expirationMap.set(e,i),this.expirations[i]||(this.expirations[i]=[],this.setTimer(i,r)),this.expirations[i].push(e)}else this.expirationMap.set(e,1/0)}set(e,r,{ttl:n=this.ttl,noUpdateTTL:i=this.noUpdateTTL,noDisposeOnSet:o=this.noDisposeOnSet}={}){if(!Hd(n))throw new TypeError("ttl must be positive integer or Infinity");if(this.expirationMap.has(e)){i||this.setTTL(e,n);let s=this.data.get(e);s!==r&&(this.data.set(e,r),o||this.dispose(s,e,"set"))}else this.setTTL(e,n),this.data.set(e,r);for(;this.size>this.max;)this.purgeToCapacity();return this}has(e){return this.data.has(e)}getRemainingTTL(e){let r=this.expirationMap.get(e);return r===1/0?r:r!==void 0?Math.max(0,Math.ceil(r-aa())):0}get(e,{updateAgeOnGet:r=this.updateAgeOnGet,ttl:n=this.ttl,checkAgeOnGet:i=this.checkAgeOnGet}={}){let o=this.data.get(e);if(i&&this.getRemainingTTL(e)===0){this.delete(e);return}return r&&this.setTTL(e,n),o}dispose(e,r){}delete(e){let r=this.expirationMap.get(e);if(r!==void 0){let n=this.data.get(e);this.data.delete(e),this.expirationMap.delete(e);let i=this.expirations[r];return i&&(i.length<=1?delete this.expirations[r]:this.expirations[r]=i.filter(o=>o!==e)),this.dispose(n,e,"delete"),this.size===0&&this.cancelTimer(),!0}return!1}purgeToCapacity(){for(let e in this.expirations){let r=this.expirations[e];if(this.size-r.length>=this.max){delete this.expirations[e];let n=[];for(let i of r)n.push([i,this.data.get(i)]),this.data.delete(i),this.expirationMap.delete(i);for(let[i,o]of n)this.dispose(o,i,"evict")}else{let n=this.size-this.max,i=[];for(let o of r.splice(0,n))i.push([o,this.data.get(o)]),this.data.delete(o),this.expirationMap.delete(o);for(let[o,s]of i)this.dispose(s,o,"evict");return}}}get size(){return this.data.size}purgeStale(){let e=Math.ceil(aa());for(let r in this.expirations){if(r==="Infinity"||r>e)return;let n=[...this.expirations[r]||[]],i=[];delete this.expirations[r];for(let o of n)i.push([o,this.data.get(o)]),this.data.delete(o),this.expirationMap.delete(o);for(let[o,s]of i)this.dispose(s,o,"stale")}this.size===0&&this.cancelTimer()}*entries(){for(let e in this.expirations)for(let r of this.expirations[e])yield[r,this.data.get(r)]}*keys(){for(let e in this.expirations)for(let r of this.expirations[e])yield r}*values(){for(let e in this.expirations)for(let r of this.expirations[e])yield this.data.get(r)}[Symbol.iterator](){return this.entries()}};Wy.exports=zd});var l0=F(d0=>{"use strict";var K4=l(f());d0.supports=function(...e){let r=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})}});var dr=F((N4,f0)=>{"use strict";var $4=l(f());f0.exports=class extends Error{constructor(e,r){super(e||""),typeof r=="object"&&r!==null&&(r.code&&(this.code=String(r.code)),r.expected&&(this.expected=!0),r.transient&&(this.transient=!0),r.cause&&(this.cause=r.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var sl=F((F4,h0)=>{"use strict";var q4=l(f()),ol=null;h0.exports=function(){return ol===null&&(ol={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),ol}});var ul=F(p0=>{"use strict";var j4=l(f()),cl=dr(),Av=new Set(["buffer","view","utf8"]),al=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!Av.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new cl(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new cl(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new cl(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};p0.Encoding=al});var hl=F(da=>{"use strict";var z4=l(f()),{Buffer:ll}=Tt()||{},{Encoding:fl}=ul(),Tv=sl(),Us=class extends fl{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new Ps({encode:this.encode,decode:e=>this.decode(ll.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},Ps=class extends fl{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new Us({encode:e=>{let r=this.encode(e);return ll.from(r.buffer,r.byteOffset,r.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},dl=class extends fl{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new Us({encode:e=>ll.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:r}=Tv();return new Ps({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(r.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};da.BufferFormat=Us;da.ViewFormat=Ps;da.UTF8Format=dl});var g0=F(mi=>{"use strict";var G4=l(f()),{Buffer:gt}=Tt()||{Buffer:{isBuffer:()=>!1}},{textEncoder:m0,textDecoder:y0}=sl()(),{BufferFormat:Ls,ViewFormat:pl,UTF8Format:b0}=hl(),la=t=>t;mi.utf8=new b0({encode:function(t){return gt.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?y0.decode(t):String(t)},decode:la,name:"utf8",createViewTranscoder(){return new pl({encode:function(t){return ArrayBuffer.isView(t)?t:m0.encode(t)},decode:function(t){return y0.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new Ls({encode:function(t){return gt.isBuffer(t)?t:ArrayBuffer.isView(t)?gt.from(t.buffer,t.byteOffset,t.byteLength):gt.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});mi.json=new b0({encode:JSON.stringify,decode:JSON.parse,name:"json"});mi.buffer=new Ls({encode:function(t){return gt.isBuffer(t)?t:ArrayBuffer.isView(t)?gt.from(t.buffer,t.byteOffset,t.byteLength):gt.from(String(t),"utf8")},decode:la,name:"buffer",createViewTranscoder(){return new pl({encode:function(t){return ArrayBuffer.isView(t)?t:gt.from(String(t),"utf8")},decode:function(t){return gt.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});mi.view=new pl({encode:function(t){return ArrayBuffer.isView(t)?t:m0.encode(t)},decode:la,name:"view",createBufferTranscoder(){return new Ls({encode:function(t){return gt.isBuffer(t)?t:ArrayBuffer.isView(t)?gt.from(t.buffer,t.byteOffset,t.byteLength):gt.from(String(t),"utf8")},decode:la,name:`${this.name}+buffer`})}});mi.hex=new Ls({encode:function(t){return gt.isBuffer(t)?t:gt.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});mi.base64=new Ls({encode:function(t){return gt.isBuffer(t)?t:gt.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"})});var E0=F(x0=>{"use strict";var Y4=l(f()),w0=dr(),ha=g0(),{Encoding:_v}=ul(),{BufferFormat:Iv,ViewFormat:Bv,UTF8Format:kv}=hl(),Ks=Symbol("formats"),fa=Symbol("encodings"),Rv=new Set(["buffer","view","utf8"]),yl=class{constructor(e){if(Array.isArray(e)){if(!e.every(r=>Rv.has(r)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[fa]=new Map,this[Ks]=new Set(e);for(let r in ha)try{this.encoding(r)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[fa].values()))}encoding(e){let r=this[fa].get(e);if(r===void 0){if(typeof e=="string"&&e!==""){if(r=Pv[e],!r)throw new w0(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");r=Cv(e)}let{name:n,format:i}=r;if(!this[Ks].has(i))if(this[Ks].has("view"))r=r.createViewTranscoder();else if(this[Ks].has("buffer"))r=r.createBufferTranscoder();else if(this[Ks].has("utf8"))r=r.createUTF8Transcoder();else throw new w0(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[e,n,r.name,r.commonName])this[fa].set(o,r)}return r}};x0.Transcoder=yl;function Cv(t){if(t instanceof _v)return t;let e="type"in t&&typeof t.type=="string"?t.type:void 0,r=t.name||e||`anonymous-${Lv++}`;switch(Ov(t)){case"view":return new Bv({...t,name:r});case"utf8":return new kv({...t,name:r});case"buffer":return new Iv({...t,name:r});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function Ov(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}var Uv={binary:ha.buffer,"utf-8":ha.utf8},Pv={...ha,...Uv},Lv=0});var Ms=F((X4,ml)=>{"use strict";var Z4=l(f()),xo=typeof Reflect=="object"?Reflect:null,v0=xo&&typeof xo.apply=="function"?xo.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},pa;xo&&typeof xo.ownKeys=="function"?pa=xo.ownKeys:Object.getOwnPropertySymbols?pa=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:pa=function(e){return Object.getOwnPropertyNames(e)};function Kv(t){console&&console.warn&&console.warn(t)}var S0=Number.isNaN||function(e){return e!==e};function Te(){Te.init.call(this)}ml.exports=Te;ml.exports.once=Fv;Te.EventEmitter=Te;Te.prototype._events=void 0;Te.prototype._eventsCount=0;Te.prototype._maxListeners=void 0;var D0=10;function ya(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Te,"defaultMaxListeners",{enumerable:!0,get:function(){return D0},set:function(t){if(typeof t!="number"||t<0||S0(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");D0=t}});Te.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Te.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||S0(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function A0(t){return t._maxListeners===void 0?Te.defaultMaxListeners:t._maxListeners}Te.prototype.getMaxListeners=function(){return A0(this)};Te.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var c=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw c.context=s,c}var u=o[e];if(u===void 0)return!1;if(typeof u=="function")v0(u,this,r);else for(var d=u.length,a=k0(u,d),n=0;n<d;++n)v0(a[n],this,r);return!0};function T0(t,e,r,n){var i,o,s;if(ya(r),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]),s===void 0)s=o[e]=r,++t._eventsCount;else if(typeof s=="function"?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),i=A0(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=s.length,Kv(c)}return t}Te.prototype.addListener=function(e,r){return T0(this,e,r,!1)};Te.prototype.on=Te.prototype.addListener;Te.prototype.prependListener=function(e,r){return T0(this,e,r,!0)};function Mv(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _0(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=Mv.bind(n);return i.listener=r,n.wrapFn=i,i}Te.prototype.once=function(e,r){return ya(r),this.on(e,_0(this,e,r)),this};Te.prototype.prependOnceListener=function(e,r){return ya(r),this.prependListener(e,_0(this,e,r)),this};Te.prototype.removeListener=function(e,r){var n,i,o,s,c;if(ya(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===r||n[s].listener===r){c=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():Nv(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,c||r)}return this};Te.prototype.off=Te.prototype.removeListener;Te.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function I0(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?$v(i):k0(i,i.length)}Te.prototype.listeners=function(e){return I0(this,e,!0)};Te.prototype.rawListeners=function(e){return I0(this,e,!1)};Te.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):B0.call(t,e)};Te.prototype.listenerCount=B0;function B0(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Te.prototype.eventNames=function(){return this._eventsCount>0?pa(this._events):[]};function k0(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Nv(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function $v(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Fv(t,e){return new Promise(function(r,n){function i(s){t.removeListener(e,o),n(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}R0(t,e,o,{once:!0}),e!=="error"&&qv(t,i,{once:!0})})}function qv(t,e,r){typeof t.on=="function"&&R0(t,"error",e,r)}function R0(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){n.once&&t.removeEventListener(e,i),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var O0=F((Q4,C0)=>{var eR=l(f());C0.exports=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t)});var Ns=F(bl=>{"use strict";var rR=l(f()),U0=O0();bl.fromCallback=function(t,e){if(t===void 0){var r=new Promise(function(n,i){t=function(o,s){o?i(o):n(s)}});t[e!==void 0?e:"promise"]=r}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};bl.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(r){U0(()=>e(null,r))}).catch(function(r){U0(()=>e(r))})}});var ma=F(gl=>{"use strict";var iR=l(f());gl.getCallback=function(t,e){return typeof t=="function"?t:e};gl.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}}});var Nn=F(xa=>{"use strict";var sR=l(f()),{fromCallback:wl}=Ns(),Mt=dr(),{getOptions:xl,getCallback:P0}=ma(),bi=Symbol("promise"),Eo=Symbol("callback"),Ir=Symbol("working"),gi=Symbol("handleOne"),rn=Symbol("handleMany"),El=Symbol("autoClose"),Kn=Symbol("finishWork"),Br=Symbol("returnMany"),Un=Symbol("closing"),$s=Symbol("handleClose"),ba=Symbol("closed"),Fs=Symbol("closeCallbacks"),Ln=Symbol("keyEncoding"),wi=Symbol("valueEncoding"),vl=Symbol("abortOnClose"),ga=Symbol("legacy"),Dl=Symbol("keys"),Sl=Symbol("values"),Pn=Symbol("limit"),Zt=Symbol("count"),wa=Object.freeze({}),Vv=()=>{},L0=!1,qs=class{constructor(e,r,n){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof r!="object"||r===null)throw new TypeError("The second argument must be an options object");this[ba]=!1,this[Fs]=[],this[Ir]=!1,this[Un]=!1,this[El]=!1,this[Eo]=null,this[gi]=this[gi].bind(this),this[rn]=this[rn].bind(this),this[$s]=this[$s].bind(this),this[Ln]=r[Ln],this[wi]=r[wi],this[ga]=n,this[Pn]=Number.isInteger(r.limit)&&r.limit>=0?r.limit:1/0,this[Zt]=0,this[vl]=!!r.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[Zt]}get limit(){return this[Pn]}next(e){let r;if(e===void 0)r=new Promise((n,i)=>{e=(o,s,c)=>{o?i(o):this[ga]?s===void 0&&c===void 0?n():n([s,c]):n(s)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[Un]?this.nextTick(e,new Mt("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ir]?this.nextTick(e,new Mt("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Ir]=!0,this[Eo]=e,this[Zt]>=this[Pn]?this.nextTick(this[gi],null):this._next(this[gi])),r}_next(e){this.nextTick(e)}nextv(e,r,n){return n=P0(r,n),n=wl(n,bi),r=xl(r,wa),Number.isInteger(e)?(this[Un]?this.nextTick(n,new Mt("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ir]?this.nextTick(n,new Mt("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[Pn]<1/0&&(e=Math.min(e,this[Pn]-this[Zt])),this[Ir]=!0,this[Eo]=n,e<=0?this.nextTick(this[rn],null,[]):this._nextv(e,r,this[rn])),n[bi]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[bi])}_nextv(e,r,n){let i=[],o=(s,c,u)=>{if(s)return n(s);if(this[ga]?c===void 0&&u===void 0:c===void 0)return n(null,i);i.push(this[ga]?[c,u]:c),i.length===e?n(null,i):this._next(o)};this._next(o)}all(e,r){return r=P0(e,r),r=wl(r,bi),e=xl(e,wa),this[Un]?this.nextTick(r,new Mt("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ir]?this.nextTick(r,new Mt("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Ir]=!0,this[Eo]=r,this[El]=!0,this[Zt]>=this[Pn]?this.nextTick(this[rn],null,[]):this._all(e,this[rn])),r[bi]}_all(e,r){let n=this[Zt],i=[],o=()=>{let c=this[Pn]<1/0?Math.min(1e3,this[Pn]-n):1e3;c<=0?this.nextTick(r,null,i):this._nextv(c,wa,s)},s=(c,u)=>{c?r(c):u.length===0?r(null,i):(i.push.apply(i,u),n+=u.length,o())};o()}[Kn](){let e=this[Eo];return this[vl]&&e===null?Vv:(this[Ir]=!1,this[Eo]=null,this[Un]&&this._close(this[$s]),e)}[Br](e,r,n){this[El]?this.close(e.bind(null,r,n)):e(r,n)}seek(e,r){if(r=xl(r,wa),!this[Un]){if(this[Ir])throw new Mt("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(r.keyEncoding||this[Ln]),i=n.format;r.keyEncoding!==i&&(r={...r,keyEncoding:i});let o=this.db.prefixKey(n.encode(e),i);this._seek(o,r)}}}_seek(e,r){throw new Mt("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=wl(e,bi),this[ba]?this.nextTick(e):this[Un]?this[Fs].push(e):(this[Un]=!0,this[Fs].push(e),this[Ir]?this[vl]&&this[Kn]()(new Mt("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[$s])),e[bi]}_close(e){this.nextTick(e)}[$s](){this[ba]=!0,this.db.detachResource(this);let e=this[Fs];this[Fs]=[];for(let r of e)r()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[ba]||await this.close()}}},vo=class extends qs{constructor(e,r){super(e,r,!0),this[Dl]=r.keys!==!1,this[Sl]=r.values!==!1}[gi](e,r,n){let i=this[Kn]();if(e)return i(e);try{r=this[Dl]&&r!==void 0?this[Ln].decode(r):void 0,n=this[Sl]&&n!==void 0?this[wi].decode(n):void 0}catch(o){return i(new Mn("entry",o))}r===void 0&&n===void 0||this[Zt]++,i(null,r,n)}[rn](e,r){let n=this[Kn]();if(e)return this[Br](n,e);try{for(let i of r){let o=i[0],s=i[1];i[0]=this[Dl]&&o!==void 0?this[Ln].decode(o):void 0,i[1]=this[Sl]&&s!==void 0?this[wi].decode(s):void 0}}catch(i){return this[Br](n,new Mn("entries",i))}this[Zt]+=r.length,this[Br](n,null,r)}end(e){return!L0&&typeof console<"u"&&(L0=!0,console.warn(new Mt("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},Al=class extends qs{constructor(e,r){super(e,r,!1)}[gi](e,r){let n=this[Kn]();if(e)return n(e);try{r=r!==void 0?this[Ln].decode(r):void 0}catch(i){return n(new Mn("key",i))}r!==void 0&&this[Zt]++,n(null,r)}[rn](e,r){let n=this[Kn]();if(e)return this[Br](n,e);try{for(let i=0;i<r.length;i++){let o=r[i];r[i]=o!==void 0?this[Ln].decode(o):void 0}}catch(i){return this[Br](n,new Mn("keys",i))}this[Zt]+=r.length,this[Br](n,null,r)}},Tl=class extends qs{constructor(e,r){super(e,r,!1)}[gi](e,r){let n=this[Kn]();if(e)return n(e);try{r=r!==void 0?this[wi].decode(r):void 0}catch(i){return n(new Mn("value",i))}r!==void 0&&this[Zt]++,n(null,r)}[rn](e,r){let n=this[Kn]();if(e)return this[Br](n,e);try{for(let i=0;i<r.length;i++){let o=r[i];r[i]=o!==void 0?this[wi].decode(o):void 0}}catch(i){return this[Br](n,new Mn("values",i))}this[Zt]+=r.length,this[Br](n,null,r)}},Mn=class extends Mt{constructor(e,r){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:r})}};for(let t of["_ended property","_nexting property","_end method"])Object.defineProperty(vo.prototype,t.split(" ")[0],{get(){throw new Mt(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Mt(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});vo.keyEncoding=Ln;vo.valueEncoding=wi;xa.AbstractIterator=vo;xa.AbstractKeyIterator=Al;xa.AbstractValueIterator=Tl});var K0=F(_l=>{"use strict";var aR=l(f()),{AbstractKeyIterator:jv,AbstractValueIterator:Hv}=Nn(),xi=Symbol("iterator"),Vs=Symbol("callback"),Do=Symbol("handleOne"),Ei=Symbol("handleMany"),js=class extends jv{constructor(e,r){super(e,r),this[xi]=e.iterator({...r,keys:!0,values:!1}),this[Do]=this[Do].bind(this),this[Ei]=this[Ei].bind(this)}},Ea=class extends Hv{constructor(e,r){super(e,r),this[xi]=e.iterator({...r,keys:!1,values:!0}),this[Do]=this[Do].bind(this),this[Ei]=this[Ei].bind(this)}};for(let t of[js,Ea]){let e=t===js,r=e?n=>n[0]:n=>n[1];t.prototype._next=function(n){this[Vs]=n,this[xi].next(this[Do])},t.prototype[Do]=function(n,i,o){let s=this[Vs];n?s(n):s(null,e?i:o)},t.prototype._nextv=function(n,i,o){this[Vs]=o,this[xi].nextv(n,i,this[Ei])},t.prototype._all=function(n,i){this[Vs]=i,this[xi].all(n,this[Ei])},t.prototype[Ei]=function(n,i){let o=this[Vs];n?o(n):o(null,i.map(r))},t.prototype._seek=function(n,i){this[xi].seek(n,i)},t.prototype._close=function(n){this[xi].close(n)}}_l.DefaultKeyIterator=js;_l.DefaultValueIterator=Ea});var M0=F(_a=>{"use strict";var dR=l(f()),{AbstractIterator:zv,AbstractKeyIterator:Wv,AbstractValueIterator:Gv}=Nn(),Il=dr(),It=Symbol("nut"),Aa=Symbol("undefer"),Ta=Symbol("factory"),va=class extends zv{constructor(e,r){super(e,r),this[It]=null,this[Ta]=()=>e.iterator(r),this.db.defer(()=>this[Aa]())}},Da=class extends Wv{constructor(e,r){super(e,r),this[It]=null,this[Ta]=()=>e.keys(r),this.db.defer(()=>this[Aa]())}},Sa=class extends Gv{constructor(e,r){super(e,r),this[It]=null,this[Ta]=()=>e.values(r),this.db.defer(()=>this[Aa]())}};for(let t of[va,Da,Sa])t.prototype[Aa]=function(){this.db.status==="open"&&(this[It]=this[Ta]())},t.prototype._next=function(e){this[It]!==null?this[It].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new Il("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(e,r,n){this[It]!==null?this[It].nextv(e,r,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,r,n)):this.nextTick(n,new Il("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(e,r){this[It]!==null?this[It].all(r):this.db.status==="opening"?this.db.defer(()=>this._all(e,r)):this.nextTick(r,new Il("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(e,r){this[It]!==null?this[It]._seek(e,r):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,r))},t.prototype._close=function(e){this[It]!==null?this[It].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};_a.DeferredIterator=va;_a.DeferredKeyIterator=Da;_a.DeferredValueIterator=Sa});var kl=F($0=>{"use strict";var fR=l(f()),{fromCallback:N0}=Ns(),Ia=dr(),{getCallback:Jv,getOptions:Yv}=ma(),Ba=Symbol("promise"),Qt=Symbol("status"),So=Symbol("operations"),Hs=Symbol("finishClose"),Ao=Symbol("closeCallbacks"),Bl=class{constructor(e){if(typeof e!="object"||e===null){let r=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${r}`)}this[So]=[],this[Ao]=[],this[Qt]="open",this[Hs]=this[Hs].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[So].length}put(e,r,n){if(this[Qt]!=="open")throw new Ia("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(r);if(i)throw i;let o=n&&n.sublevel!=null?n.sublevel:this.db,s=n,c=o.keyEncoding(n&&n.keyEncoding),u=o.valueEncoding(n&&n.valueEncoding),d=c.format;n={...n,keyEncoding:d,valueEncoding:u.format},o!==this.db&&(n.sublevel=null);let a=o.prefixKey(c.encode(e),d),h=u.encode(r);return this._put(a,h,n),this[So].push({...s,type:"put",key:e,value:r}),this}_put(e,r,n){}del(e,r){if(this[Qt]!=="open")throw new Ia("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let i=r&&r.sublevel!=null?r.sublevel:this.db,o=r,s=i.keyEncoding(r&&r.keyEncoding),c=s.format;return r={...r,keyEncoding:c},i!==this.db&&(r.sublevel=null),this._del(i.prefixKey(s.encode(e),c),r),this[So].push({...o,type:"del",key:e}),this}_del(e,r){}clear(){if(this[Qt]!=="open")throw new Ia("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[So]=[],this}_clear(){}write(e,r){return r=Jv(e,r),r=N0(r,Ba),e=Yv(e),this[Qt]!=="open"?this.nextTick(r,new Ia("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(r):(this[Qt]="writing",this._write(e,n=>{this[Qt]="closing",this[Ao].push(()=>r(n)),n||this.db.emit("batch",this[So]),this._close(this[Hs])})),r[Ba]}_write(e,r){}close(e){return e=N0(e,Ba),this[Qt]==="closing"?this[Ao].push(e):this[Qt]==="closed"?this.nextTick(e):(this[Ao].push(e),this[Qt]!=="writing"&&(this[Qt]="closing",this._close(this[Hs]))),e[Ba]}_close(e){this.nextTick(e)}[Hs](){this[Qt]="closed",this.db.detachResource(this);let e=this[Ao];this[Ao]=[];for(let r of e)r()}};$0.AbstractChainedBatch=Bl});var q0=F(F0=>{"use strict";var pR=l(f()),{AbstractChainedBatch:Xv}=kl(),Zv=dr(),To=Symbol("encoded"),Rl=class extends Xv{constructor(e){super(e),this[To]=[]}_put(e,r,n){this[To].push({...n,type:"put",key:e,value:r})}_del(e,r){this[To].push({...r,type:"del",key:e})}_clear(){this[To]=[]}_write(e,r){this.db.status==="opening"?this.db.defer(()=>this._write(e,r)):this.db.status==="open"?this[To].length===0?this.nextTick(r):this.db._batch(this[To],e,r):this.nextTick(r,new Zv("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};F0.DefaultChainedBatch=Rl});var H0=F((yR,j0)=>{"use strict";var mR=l(f()),V0=dr(),Qv=Object.prototype.hasOwnProperty,eD=new Set(["lt","lte","gt","gte"]);j0.exports=function(t,e){let r={};for(let n in t)if(Qv.call(t,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new V0(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new V0("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});eD.has(n)?r[n]=e.encode(t[n]):r[n]=t[n]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r}});var Cl=F((bR,W0)=>{var gR=l(f());var z0;W0.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):t=>(z0||(z0=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0))});var Y0=F((wR,J0)=>{"use strict";var xR=l(f()),G0=Cl();J0.exports=function(t,...e){e.length===0?G0(t):G0(()=>t(...e))}});var X0=F(ka=>{"use strict";var vR=l(f()),{AbstractIterator:tD,AbstractKeyIterator:rD,AbstractValueIterator:nD}=Nn(),_o=Symbol("unfix"),lr=Symbol("iterator"),vi=Symbol("handleOne"),$n=Symbol("handleMany"),nn=Symbol("callback"),zs=class extends tD{constructor(e,r,n,i){super(e,r),this[lr]=n,this[_o]=i,this[vi]=this[vi].bind(this),this[$n]=this[$n].bind(this),this[nn]=null}[vi](e,r,n){let i=this[nn];if(e)return i(e);r!==void 0&&(r=this[_o](r)),i(e,r,n)}[$n](e,r){let n=this[nn];if(e)return n(e);for(let i of r){let o=i[0];o!==void 0&&(i[0]=this[_o](o))}n(e,r)}},Ws=class extends rD{constructor(e,r,n,i){super(e,r),this[lr]=n,this[_o]=i,this[vi]=this[vi].bind(this),this[$n]=this[$n].bind(this),this[nn]=null}[vi](e,r){let n=this[nn];if(e)return n(e);r!==void 0&&(r=this[_o](r)),n(e,r)}[$n](e,r){let n=this[nn];if(e)return n(e);for(let i=0;i<r.length;i++){let o=r[i];o!==void 0&&(r[i]=this[_o](o))}n(e,r)}},Gs=class extends nD{constructor(e,r,n){super(e,r),this[lr]=n}};for(let t of[zs,Ws])t.prototype._next=function(e){this[nn]=e,this[lr].next(this[vi])},t.prototype._nextv=function(e,r,n){this[nn]=n,this[lr].nextv(e,r,this[$n])},t.prototype._all=function(e,r){this[nn]=r,this[lr].all(e,this[$n])};for(let t of[Gs])t.prototype._next=function(e){this[lr].next(e)},t.prototype._nextv=function(e,r,n){this[lr].nextv(e,r,n)},t.prototype._all=function(e,r){this[lr].all(e,r)};for(let t of[zs,Ws,Gs])t.prototype._seek=function(e,r){this[lr].seek(e,r)},t.prototype._close=function(e){this[lr].close(e)};ka.AbstractSublevelIterator=zs;ka.AbstractSublevelKeyIterator=Ws;ka.AbstractSublevelValueIterator=Gs});var tm=F((DR,em)=>{"use strict";var SR=l(f()),Ol=dr(),{Buffer:Ll}=Tt()||{},{AbstractSublevelIterator:iD,AbstractSublevelKeyIterator:oD,AbstractSublevelValueIterator:sD}=X0(),on=Symbol("prefix"),Z0=Symbol("upperBound"),Js=Symbol("prefixRange"),Nt=Symbol("parent"),Ul=Symbol("unfix"),Q0=new TextEncoder,cD={separator:"!"};em.exports=function({AbstractLevel:t}){class e extends t{static defaults(n){if(typeof n=="string")throw new Ol("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new Ol("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?cD:n.separator?n:{...n,separator:"!"}}constructor(n,i,o){let{separator:s,manifest:c,...u}=e.defaults(o);i=uD(i,s);let d=s.charCodeAt(0)+1,a=n[Nt]||n;if(!Q0.encode(i).every(y=>y>d&&y<127))throw new Ol(`Prefix must use bytes > ${d} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(aD(a,c),u);let h=(n.prefix||"")+s+i+s,m=h.slice(0,-1)+String.fromCharCode(d);this[Nt]=a,this[on]=new Ra(h),this[Z0]=new Ra(m),this[Ul]=new Kl,this.nextTick=a.nextTick}prefixKey(n,i){if(i==="utf8")return this[on].utf8+n;if(n.byteLength===0)return this[on][i];if(i==="view"){let o=this[on].view,s=new Uint8Array(o.byteLength+n.byteLength);return s.set(o,0),s.set(n,o.byteLength),s}else{let o=this[on].buffer;return Ll.concat([o,n],o.byteLength+n.byteLength)}}[Js](n,i){n.gte!==void 0?n.gte=this.prefixKey(n.gte,i):n.gt!==void 0?n.gt=this.prefixKey(n.gt,i):n.gte=this[on][i],n.lte!==void 0?n.lte=this.prefixKey(n.lte,i):n.lt!==void 0?n.lt=this.prefixKey(n.lt,i):n.lte=this[Z0][i]}get prefix(){return this[on].utf8}get db(){return this[Nt]}_open(n,i){this[Nt].open({passive:!0},i)}_put(n,i,o,s){this[Nt].put(n,i,o,s)}_get(n,i,o){this[Nt].get(n,i,o)}_getMany(n,i,o){this[Nt].getMany(n,i,o)}_del(n,i,o){this[Nt].del(n,i,o)}_batch(n,i,o){this[Nt].batch(n,i,o)}_clear(n,i){this[Js](n,n.keyEncoding),this[Nt].clear(n,i)}_iterator(n){this[Js](n,n.keyEncoding);let i=this[Nt].iterator(n),o=this[Ul].get(this[on].utf8.length,n.keyEncoding);return new iD(this,n,i,o)}_keys(n){this[Js](n,n.keyEncoding);let i=this[Nt].keys(n),o=this[Ul].get(this[on].utf8.length,n.keyEncoding);return new oD(this,n,i,o)}_values(n){this[Js](n,n.keyEncoding);let i=this[Nt].values(n);return new sD(this,n,i)}}return{AbstractSublevel:e}};var aD=function(t,e){return{...t.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:Pl(t,"utf8"),buffer:Pl(t,"buffer"),view:Pl(t,"view")}}},Pl=function(t,e){return t.supports.encodings[e]?t.keyEncoding(e).name===e:!1},Ra=class{constructor(e){this.utf8=e,this.view=Q0.encode(e),this.buffer=Ll?Ll.from(this.view.buffer,0,this.view.byteLength):{}}},Kl=class{constructor(){this.cache=new Map}get(e,r){let n=this.cache.get(r);return n===void 0&&(r==="view"?n=(function(i,o){return o.subarray(i)}).bind(null,e):n=(function(i,o){return o.slice(i)}).bind(null,e),this.cache.set(r,n)),n}},uD=function(t,e){let r=0,n=t.length;for(;r<n&&t[r]===e;)r++;for(;n>r&&t[n-1]===e;)n--;return t.slice(r,n)}});var ql=F(Fl=>{"use strict";var TR=l(f()),{supports:dD}=l0(),{Transcoder:lD}=E0(),{EventEmitter:fD}=Ms(),{fromCallback:Fn}=Ns(),fr=dr(),{AbstractIterator:Di}=Nn(),{DefaultKeyIterator:hD,DefaultValueIterator:pD}=K0(),{DeferredIterator:yD,DeferredKeyIterator:mD,DeferredValueIterator:bD}=M0(),{DefaultChainedBatch:rm}=q0(),{getCallback:Si,getOptions:qn}=ma(),Ca=H0(),le=Symbol("promise"),sn=Symbol("landed"),Ai=Symbol("resources"),Ml=Symbol("closeResources"),Ys=Symbol("operations"),Xs=Symbol("undefer"),Oa=Symbol("deferOpen"),nm=Symbol("options"),pe=Symbol("status"),Ti=Symbol("defaultOptions"),Io=Symbol("transcoder"),Ua=Symbol("keyEncoding"),Nl=Symbol("valueEncoding"),gD=()=>{},Zs=class extends fD{constructor(e,r){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");r=qn(r);let{keyEncoding:n,valueEncoding:i,passive:o,...s}=r;this[Ai]=new Set,this[Ys]=[],this[Oa]=!0,this[nm]=s,this[pe]="opening",this.supports=dD(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Io]=new lD(wD(this)),this[Ua]=this[Io].encoding(n||"utf8"),this[Nl]=this[Io].encoding(i||"utf8");for(let c of this[Io].encodings())this.supports.encodings[c.commonName]||(this.supports.encodings[c.commonName]=!0);this[Ti]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[Ua].commonName,valueEncoding:this[Nl].commonName}),key:Object.freeze({keyEncoding:this[Ua].commonName})},this.nextTick(()=>{this[Oa]&&this.open({passive:!1},gD)})}get status(){return this[pe]}keyEncoding(e){return this[Io].encoding(e??this[Ua])}valueEncoding(e){return this[Io].encoding(e??this[Nl])}open(e,r){r=Si(e,r),r=Fn(r,le),e={...this[nm],...qn(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=i=>{this[pe]==="closing"||this[pe]==="opening"?this.once(sn,i?()=>n(i):n):this[pe]!=="open"?r(new fr("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):r()};return e.passive?this[pe]==="opening"?this.once(sn,n):this.nextTick(n):this[pe]==="closed"||this[Oa]?(this[Oa]=!1,this[pe]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[pe]="closed",this[Ml](()=>{this.emit(sn),n(i)}),this[Xs]();return}this[pe]="open",this[Xs](),this.emit(sn),this[pe]==="open"&&this.emit("open"),this[pe]==="open"&&this.emit("ready"),n()})):this[pe]==="open"?this.nextTick(n):this.once(sn,()=>this.open(e,r)),r[le]}_open(e,r){this.nextTick(r)}close(e){e=Fn(e,le);let r=n=>{this[pe]==="opening"||this[pe]==="closing"?this.once(sn,n?r(n):r):this[pe]!=="closed"?e(new fr("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[pe]==="open"){this[pe]="closing",this.emit("closing");let n=i=>{this[pe]="open",this[Xs](),this.emit(sn),r(i)};this[Ml](()=>{this._close(i=>{if(i)return n(i);this[pe]="closed",this[Xs](),this.emit(sn),this[pe]==="closed"&&this.emit("closed"),r()})})}else this[pe]==="closed"?this.nextTick(r):this.once(sn,()=>this.close(e));return e[le]}[Ml](e){if(this[Ai].size===0)return this.nextTick(e);let r=this[Ai].size,n=!0,i=()=>{--r===0&&(n?this.nextTick(e):e())};for(let o of this[Ai])o.close(i);n=!1,this[Ai].clear()}_close(e){this.nextTick(e)}get(e,r,n){if(n=Si(r,n),n=Fn(n,le),r=qn(r,this[Ti].entry),this[pe]==="opening")return this.defer(()=>this.get(e,r,n)),n[le];if(Bo(this,n))return n[le];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[le];let o=this.keyEncoding(r.keyEncoding),s=this.valueEncoding(r.valueEncoding),c=o.format,u=s.format;return(r.keyEncoding!==c||r.valueEncoding!==u)&&(r=Object.assign({},r,{keyEncoding:c,valueEncoding:u})),this._get(this.prefixKey(o.encode(e),c),r,(d,a)=>{if(d)return(d.code==="LEVEL_NOT_FOUND"||d.notFound||/NotFound/i.test(d))&&(d.code||(d.code="LEVEL_NOT_FOUND"),d.notFound||(d.notFound=!0),d.status||(d.status=404)),n(d);try{a=s.decode(a)}catch(h){return n(new fr("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:h}))}n(null,a)}),n[le]}_get(e,r,n){this.nextTick(n,new Error("NotFound"))}getMany(e,r,n){if(n=Si(r,n),n=Fn(n,le),r=qn(r,this[Ti].entry),this[pe]==="opening")return this.defer(()=>this.getMany(e,r,n)),n[le];if(Bo(this,n))return n[le];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[le];if(e.length===0)return this.nextTick(n,null,[]),n[le];let i=this.keyEncoding(r.keyEncoding),o=this.valueEncoding(r.valueEncoding),s=i.format,c=o.format;(r.keyEncoding!==s||r.valueEncoding!==c)&&(r=Object.assign({},r,{keyEncoding:s,valueEncoding:c}));let u=new Array(e.length);for(let d=0;d<e.length;d++){let a=e[d],h=this._checkKey(a);if(h)return this.nextTick(n,h),n[le];u[d]=this.prefixKey(i.encode(a),s)}return this._getMany(u,r,(d,a)=>{if(d)return n(d);try{for(let h=0;h<a.length;h++)a[h]!==void 0&&(a[h]=o.decode(a[h]))}catch(h){return n(new fr(`Could not decode one or more of ${a.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:h}))}n(null,a)}),n[le]}_getMany(e,r,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,r,n,i){if(i=Si(n,i),i=Fn(i,le),n=qn(n,this[Ti].entry),this[pe]==="opening")return this.defer(()=>this.put(e,r,n,i)),i[le];if(Bo(this,i))return i[le];let o=this._checkKey(e)||this._checkValue(r);if(o)return this.nextTick(i,o),i[le];let s=this.keyEncoding(n.keyEncoding),c=this.valueEncoding(n.valueEncoding),u=s.format,d=c.format;(n.keyEncoding!==u||n.valueEncoding!==d)&&(n=Object.assign({},n,{keyEncoding:u,valueEncoding:d}));let a=this.prefixKey(s.encode(e),u),h=c.encode(r);return this._put(a,h,n,m=>{if(m)return i(m);this.emit("put",e,r),i()}),i[le]}_put(e,r,n,i){this.nextTick(i)}del(e,r,n){if(n=Si(r,n),n=Fn(n,le),r=qn(r,this[Ti].key),this[pe]==="opening")return this.defer(()=>this.del(e,r,n)),n[le];if(Bo(this,n))return n[le];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[le];let o=this.keyEncoding(r.keyEncoding),s=o.format;return r.keyEncoding!==s&&(r=Object.assign({},r,{keyEncoding:s})),this._del(this.prefixKey(o.encode(e),s),r,c=>{if(c)return n(c);this.emit("del",e),n()}),n[le]}_del(e,r,n){this.nextTick(n)}batch(e,r,n){if(!arguments.length){if(this[pe]==="opening")return new rm(this);if(this[pe]!=="open")throw new fr("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=Si(r,n),n=Fn(n,le),r=qn(r,this[Ti].empty),this[pe]==="opening")return this.defer(()=>this.batch(e,r,n)),n[le];if(Bo(this,n))return n[le];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[le];if(e.length===0)return this.nextTick(n),n[le];let i=new Array(e.length),{keyEncoding:o,valueEncoding:s,...c}=r;for(let u=0;u<e.length;u++){if(typeof e[u]!="object"||e[u]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[le];let d=Object.assign({},e[u]);if(d.type!=="put"&&d.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[le];let a=this._checkKey(d.key);if(a)return this.nextTick(n,a),n[le];let h=d.sublevel!=null?d.sublevel:this,m=h.keyEncoding(d.keyEncoding||o),y=m.format;if(d.key=h.prefixKey(m.encode(d.key),y),d.keyEncoding=y,d.type==="put"){let p=this._checkValue(d.value);if(p)return this.nextTick(n,p),n[le];let b=h.valueEncoding(d.valueEncoding||s);d.value=b.encode(d.value),d.valueEncoding=b.format}h!==this&&(d.sublevel=null),i[u]=d}return this._batch(i,c,u=>{if(u)return n(u);this.emit("batch",e),n()}),n[le]}_batch(e,r,n){this.nextTick(n)}sublevel(e,r){return this._sublevel(e,$l.defaults(r))}_sublevel(e,r){return new $l(this,e,r)}prefixKey(e,r){return e}clear(e,r){if(r=Si(e,r),r=Fn(r,le),e=qn(e,this[Ti].empty),this[pe]==="opening")return this.defer(()=>this.clear(e,r)),r[le];if(Bo(this,r))return r[le];let n=e,i=this.keyEncoding(e.keyEncoding);return e=Ca(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(r):this._clear(e,o=>{if(o)return r(o);this.emit("clear",n),r()}),r[le]}_clear(e,r){this.nextTick(r)}iterator(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Ca(e,r),e.keys=e.keys!==!1,e.values=e.values!==!1,e[Di.keyEncoding]=r,e[Di.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[pe]==="opening")return new yD(this,e);if(this[pe]!=="open")throw new fr("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new Di(this,e)}keys(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Ca(e,r),e[Di.keyEncoding]=r,e[Di.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[pe]==="opening")return new mD(this,e);if(this[pe]!=="open")throw new fr("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new hD(this,e)}values(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Ca(e,r),e[Di.keyEncoding]=r,e[Di.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[pe]==="opening")return new bD(this,e);if(this[pe]!=="open")throw new fr("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new pD(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[Ys].push(e)}[Xs](){if(this[Ys].length===0)return;let e=this[Ys];this[Ys]=[];for(let r of e)r()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[Ai].add(e)}detachResource(e){this[Ai].delete(e)}_chainedBatch(){return new rm(this)}_checkKey(e){if(e==null)return new fr("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new fr("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};Zs.prototype.nextTick=Y0();var{AbstractSublevel:$l}=tm()({AbstractLevel:Zs});Fl.AbstractLevel=Zs;Fl.AbstractSublevel=$l;var Bo=function(t,e){return t[pe]!=="open"?(t.nextTick(e,new fr("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},wD=function(t){return Object.keys(t.supports.encodings).filter(e=>!!t.supports.encodings[e])}});var Vl=F(_i=>{"use strict";var IR=l(f());_i.AbstractLevel=ql().AbstractLevel;_i.AbstractSublevel=ql().AbstractSublevel;_i.AbstractIterator=Nn().AbstractIterator;_i.AbstractKeyIterator=Nn().AbstractKeyIterator;_i.AbstractValueIterator=Nn().AbstractValueIterator;_i.AbstractChainedBatch=kl().AbstractChainedBatch});var om=F((BR,im)=>{var kR=l(f());im.exports=ED;var xD=Cl();function ED(t,e,r){if(typeof e!="number")throw new Error("second argument must be a Number");let n,i,o,s,c,u=!0,d;Array.isArray(t)?(n=[],o=i=t.length):(s=Object.keys(t),n={},o=i=s.length);function a(m){function y(){r&&r(m,n),r=null}u?xD(y):y()}function h(m,y,p){if(n[m]=p,y&&(c=!0),--o===0||y)a(y);else if(!c&&d<i){let b;s?(b=s[d],d+=1,t[b](function(x,v){h(b,x,v)})):(b=d,d+=1,t[b](function(x,v){h(b,x,v)}))}}d=e,o?s?s.some(function(m,y){return t[m](function(p,b){h(m,p,b)}),y===e-1}):t.some(function(m,y){return m(function(p,b){h(y,p,b)}),y===e-1}):a(null),u=!1}});var jl=F((RR,sm)=>{"use strict";var CR=l(f());sm.exports=function(e){let r=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,o=e.lte===void 0;return r!==void 0&&n!==void 0?IDBKeyRange.bound(r,n,i,o):r!==void 0?IDBKeyRange.lowerBound(r,i):n!==void 0?IDBKeyRange.upperBound(n,o):null}});var Hl=F((OR,cm)=>{"use strict";var UR=l(f()),vD=new TextEncoder;cm.exports=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):vD.encode(t)}});var fm=F(lm=>{"use strict";var LR=l(f()),{AbstractIterator:DD}=Vl(),am=jl(),Pa=Hl(),kr=Symbol("cache"),cn=Symbol("finished"),$t=Symbol("options"),an=Symbol("currentOptions"),Ii=Symbol("position"),zl=Symbol("location"),ko=Symbol("first"),um={},Wl=class extends DD{constructor(e,r,n){super(e,n),this[kr]=[],this[cn]=this.limit===0,this[$t]=n,this[an]={...n},this[Ii]=void 0,this[zl]=r,this[ko]=!0}_nextv(e,r,n){if(this[ko]=!1,this[cn])return this.nextTick(n,null,[]);if(this[kr].length>0)return e=Math.min(e,this[kr].length),this.nextTick(n,null,this[kr].splice(0,e));this[Ii]!==void 0&&(this[$t].reverse?(this[an].lt=this[Ii],this[an].lte=void 0):(this[an].gt=this[Ii],this[an].gte=void 0));let i;try{i=am(this[an])}catch{return this[cn]=!0,this.nextTick(n,null,[])}let o=this.db.db.transaction([this[zl]],"readonly"),s=o.objectStore(this[zl]),c=[];if(this[$t].reverse){let u=!this[$t].values&&s.openKeyCursor?"openKeyCursor":"openCursor";s[u](i,"prev").onsuccess=d=>{let a=d.target.result;if(a){let{key:h,value:m}=a;this[Ii]=h,c.push([this[$t].keys&&h!==void 0?Pa(h):void 0,this[$t].values&&m!==void 0?Pa(m):void 0]),c.length<e?a.continue():dm(o)}else this[cn]=!0}}else{let u,d,a=()=>{if(u===void 0||d===void 0)return;let h=Math.max(u.length,d.length);h===0||e===1/0?this[cn]=!0:this[Ii]=u[h-1],c.length=h;for(let m=0;m<h;m++){let y=u[m],p=d[m];c[m]=[this[$t].keys&&y!==void 0?Pa(y):void 0,this[$t].values&&p!==void 0?Pa(p):void 0]}dm(o)};this[$t].keys||e<1/0?s.getAllKeys(i,e<1/0?e:void 0).onsuccess=h=>{u=h.target.result,a()}:(u=[],this.nextTick(a)),this[$t].values?s.getAll(i,e<1/0?e:void 0).onsuccess=h=>{d=h.target.result,a()}:(d=[],this.nextTick(a))}o.onabort=()=>{n(o.error||new Error("aborted by user")),n=null},o.oncomplete=()=>{n(null,c),n=null}}_next(e){if(this[kr].length>0){let[r,n]=this[kr].shift();this.nextTick(e,null,r,n)}else if(this[cn])this.nextTick(e);else{let r=Math.min(100,this.limit-this.count);this[ko]&&(this[ko]=!1,r=1),this._nextv(r,um,(n,i)=>{if(n)return e(n);this[kr]=i,this._next(e)})}}_all(e,r){this[ko]=!1;let n=this[kr].splice(0,this[kr].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(r,null,n);this._nextv(i,um,(o,s)=>{if(o)return r(o);n.length>0&&(s=n.concat(s)),r(null,s)})}_seek(e,r){this[ko]=!0,this[kr]=[],this[cn]=!1,this[Ii]=void 0,this[an]={...this[$t]};let n;try{n=am(this[$t])}catch{this[cn]=!0;return}n!==null&&!n.includes(e)?this[cn]=!0:this[$t].reverse?this[an].lte=e:this[an].gte=e}};lm.Iterator=Wl;function dm(t){typeof t.commit=="function"&&t.commit()}});var pm=F((KR,hm)=>{"use strict";var MR=l(f());hm.exports=function(e,r,n,i,o){if(i.limit===0)return e.nextTick(o);let s=e.db.transaction([r],"readwrite"),c=s.objectStore(r),u=0;s.oncomplete=function(){o()},s.onabort=function(){o(s.error||new Error("aborted by user"))};let d=c.openKeyCursor?"openKeyCursor":"openCursor",a=i.reverse?"prev":"next";c[d](n,a).onsuccess=function(h){let m=h.target.result;m&&(c.delete(m.key).onsuccess=function(){(i.limit<=0||++u<i.limit)&&m.continue()})}}});var xm=F(wm=>{"use strict";var $R=l(f()),{AbstractLevel:SD}=Vl(),ym=dr(),AD=om(),{fromCallback:TD}=Ns(),{Iterator:_D}=fm(),mm=Hl(),ID=pm(),BD=jl(),gm="level-js-",Qs=Symbol("idb"),Gl=Symbol("namePrefix"),un=Symbol("location"),Jl=Symbol("version"),Bi=Symbol("store"),ec=Symbol("onComplete"),bm=Symbol("promise"),La=class extends SD{constructor(e,r,n){if(typeof r=="function"||typeof n=="function")throw new ym("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:i,version:o,...s}=r||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},s),typeof e!="string")throw new Error("constructor requires a location string argument");this[un]=e,this[Gl]=i??gm,this[Jl]=parseInt(o||1,10),this[Qs]=null}get location(){return this[un]}get namePrefix(){return this[Gl]}get version(){return this[Jl]}get db(){return this[Qs]}get type(){return"browser-level"}_open(e,r){let n=indexedDB.open(this[Gl]+this[un],this[Jl]);n.onerror=function(){r(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[Qs]=n.result,r()},n.onupgradeneeded=i=>{let o=i.target.result;o.objectStoreNames.contains(this[un])||o.createObjectStore(this[un])}}[Bi](e){return this[Qs].transaction([this[un]],e).objectStore(this[un])}[ec](e,r){let n=e.transaction;n.onabort=function(){r(n.error||new Error("aborted by user"))},n.oncomplete=function(){r(null,e.result)}}_get(e,r,n){let i=this[Bi]("readonly"),o;try{o=i.get(e)}catch(s){return this.nextTick(n,s)}this[ec](o,function(s,c){if(s)return n(s);if(c===void 0)return n(new ym("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,mm(c))})}_getMany(e,r,n){let i=this[Bi]("readonly"),o=e.map(s=>c=>{let u;try{u=i.get(s)}catch(d){return c(d)}u.onsuccess=()=>{let d=u.result;c(null,d===void 0?d:mm(d))},u.onerror=d=>{d.stopPropagation(),c(u.error)}});AD(o,16,n)}_del(e,r,n){let i=this[Bi]("readwrite"),o;try{o=i.delete(e)}catch(s){return this.nextTick(n,s)}this[ec](o,n)}_put(e,r,n,i){let o=this[Bi]("readwrite"),s;try{s=o.put(r,e)}catch(c){return this.nextTick(i,c)}this[ec](s,i)}_iterator(e){return new _D(this,this[un],e)}_batch(e,r,n){let i=this[Bi]("readwrite"),o=i.transaction,s=0,c;o.onabort=function(){n(c||o.error||new Error("aborted by user"))},o.oncomplete=function(){n()};function u(){let d=e[s++],a=d.key,h;try{h=d.type==="del"?i.delete(a):i.put(d.value,a)}catch(m){c=m,o.abort();return}s<e.length?h.onsuccess=u:typeof o.commit=="function"&&o.commit()}u()}_clear(e,r){let n,i;try{n=BD(e)}catch{return this.nextTick(r)}if(e.limit>=0)return ID(this,this[un],n,e,r);try{let o=this[Bi]("readwrite");i=n?o.delete(n):o.clear()}catch(o){return this.nextTick(r,o)}this[ec](i,r)}_close(e){this[Qs].close(),this.nextTick(e)}};La.destroy=function(t,e,r){typeof e=="function"&&(r=e,e=gm),r=TD(r,bm);let n=indexedDB.deleteDatabase(e+t);return n.onsuccess=function(){r()},n.onerror=function(i){r(i)},r[bm]};wm.BrowserLevel=La});var Yl=F(Em=>{var qR=l(f());Em.Level=xm().BrowserLevel});var Ye=F((GR,vm)=>{"use strict";var JR=l(f());vm.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Uint8Array}});var Rr=F((YR,Zl)=>{"use strict";var XR=l(f()),RD=Tt(),CD=Object.getPrototypeOf(async function(){}).constructor,Dm=globalThis.Blob||RD.Blob,OD=typeof Dm<"u"?function(e){return e instanceof Dm}:function(e){return!1},Xl=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};Zl.exports={AggregateError:Xl,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof CD},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:OD};Zl.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Na=F((ZR,Ma)=>{"use strict";var QR=l(f()),{AbortController:Sm,AbortSignal:UD}=typeof self<"u"?self:typeof window<"u"?window:void 0;Ma.exports=Sm;Ma.exports.AbortSignal=UD;Ma.exports.default=Sm});var Et=F((eC,_m)=>{"use strict";var tC=l(f()),{format:PD,inspect:$a,AggregateError:LD}=Rr(),KD=globalThis.AggregateError||LD,MD=Symbol("kIsNodeError"),ND=["string","function","number","object","Function","Object","boolean","bigint","symbol"],$D=/^([A-Z][a-z0-9]*)+$/,FD="__node_internal_",Fa={};function Ri(t,e){if(!t)throw new Fa.ERR_INTERNAL_ASSERTION(e)}function Am(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function qD(t,e,r){if(typeof e=="function")return Ri(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return Ri(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:PD(e,...r)}function ut(t,e,r){r||(r=Error);class n extends r{constructor(...o){super(qD(t,e,o))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[MD]=!0,Fa[t]=n}function Tm(t){let e=FD+t.name;return Object.defineProperty(t,"name",{value:e}),t}function VD(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new KD([e,t],e.message);return r.code=e.code,r}return t||e}var Ql=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new Fa.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};ut("ERR_ASSERTION","%s",Error);ut("ERR_INVALID_ARG_TYPE",(t,e,r)=>{Ri(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],o=[],s=[];for(let u of e)Ri(typeof u=="string","All expected entries have to be of type string"),ND.includes(u)?i.push(u.toLowerCase()):$D.test(u)?o.push(u):(Ri(u!=="object",'The value "object" should be written as "Object"'),s.push(u));if(o.length>0){let u=i.indexOf("object");u!==-1&&(i.splice(i,u,1),o.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let u=i.pop();n+=`one of type ${i.join(", ")}, or ${u}`}}(o.length>0||s.length>0)&&(n+=" or ")}if(o.length>0){switch(o.length){case 1:n+=`an instance of ${o[0]}`;break;case 2:n+=`an instance of ${o[0]} or ${o[1]}`;break;default:{let u=o.pop();n+=`an instance of ${o.join(", ")}, or ${u}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{let u=s.pop();n+=`one of ${s.join(", ")}, or ${u}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var c;if((c=r.constructor)!==null&&c!==void 0&&c.name)n+=`. Received an instance of ${r.constructor.name}`;else{let u=$a(r,{depth:-1});n+=`. Received ${u}`}}else{let u=$a(r,{colors:!1});u.length>25&&(u=`${u.slice(0,25)}...`),n+=`. Received type ${typeof r} (${u})`}return n},TypeError);ut("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=$a(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);ut("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);ut("ERR_MISSING_ARGS",(...t)=>{Ri(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);ut("ERR_OUT_OF_RANGE",(t,e,r)=>{Ri(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=Am(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=Am(n)),n+="n"):n=$a(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);ut("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);ut("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);ut("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);ut("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);ut("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);ut("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ut("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);ut("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);ut("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);ut("ERR_STREAM_WRITE_AFTER_END","write after end",Error);ut("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);_m.exports={AbortError:Ql,aggregateTwoErrors:Tm(VD),hideStackFrames:Tm,codes:Fa}});var tc=F((rC,Lm)=>{"use strict";var nC=l(f()),{ArrayIsArray:tf,ArrayPrototypeIncludes:Rm,ArrayPrototypeJoin:Cm,ArrayPrototypeMap:jD,NumberIsInteger:rf,NumberIsNaN:HD,NumberMAX_SAFE_INTEGER:zD,NumberMIN_SAFE_INTEGER:WD,NumberParseInt:GD,ObjectPrototypeHasOwnProperty:JD,RegExpPrototypeExec:Om,String:YD,StringPrototypeToUpperCase:XD,StringPrototypeTrim:ZD}=Ye(),{hideStackFrames:er,codes:{ERR_SOCKET_BAD_PORT:QD,ERR_INVALID_ARG_TYPE:vt,ERR_INVALID_ARG_VALUE:Ro,ERR_OUT_OF_RANGE:Ci,ERR_UNKNOWN_SIGNAL:Im}}=Et(),{normalizeEncoding:e8}=Rr(),{isAsyncFunction:t8,isArrayBufferView:r8}=Rr().types,Bm={};function n8(t){return t===(t|0)}function i8(t){return t===t>>>0}var o8=/^[0-7]+$/,s8="must be a 32-bit unsigned integer or an octal string";function c8(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(Om(o8,t)===null)throw new Ro(e,t,s8);t=GD(t,8)}return Um(t,e),t}var a8=er((t,e,r=WD,n=zD)=>{if(typeof t!="number")throw new vt(e,"number",t);if(!rf(t))throw new Ci(e,"an integer",t);if(t<r||t>n)throw new Ci(e,`>= ${r} && <= ${n}`,t)}),u8=er((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new vt(e,"number",t);if(!rf(t))throw new Ci(e,"an integer",t);if(t<r||t>n)throw new Ci(e,`>= ${r} && <= ${n}`,t)}),Um=er((t,e,r=!1)=>{if(typeof t!="number")throw new vt(e,"number",t);if(!rf(t))throw new Ci(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new Ci(e,`>= ${n} && <= ${i}`,t)});function nf(t,e){if(typeof t!="string")throw new vt(e,"string",t)}function d8(t,e,r=void 0,n){if(typeof t!="number")throw new vt(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&HD(t))throw new Ci(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var l8=er((t,e,r)=>{if(!Rm(r,t)){let i="must be one of: "+Cm(jD(r,o=>typeof o=="string"?`'${o}'`:YD(o)),", ");throw new Ro(e,t,i)}});function Pm(t,e){if(typeof t!="boolean")throw new vt(e,"boolean",t)}function ef(t,e,r){return t==null||!JD(t,e)?r:t[e]}var f8=er((t,e,r=null)=>{let n=ef(r,"allowArray",!1),i=ef(r,"allowFunction",!1);if(!ef(r,"nullable",!1)&&t===null||!n&&tf(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new vt(e,"Object",t)}),h8=er((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new vt(e,"a dictionary",t)}),of=er((t,e,r=0)=>{if(!tf(t))throw new vt(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new Ro(e,t,n)}});function p8(t,e){of(t,e);for(let r=0;r<t.length;r++)nf(t[r],`${e}[${r}]`)}function y8(t,e){of(t,e);for(let r=0;r<t.length;r++)Pm(t[r],`${e}[${r}]`)}function m8(t,e="signal"){if(nf(t,e),Bm[t]===void 0)throw Bm[XD(t)]!==void 0?new Im(t+" (signals must use all capital letters)"):new Im(t)}var b8=er((t,e="buffer")=>{if(!r8(t))throw new vt(e,["Buffer","TypedArray","DataView"],t)});function g8(t,e){let r=e8(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Ro("encoding",e,`is invalid for data of length ${n}`)}function w8(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&ZD(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new QD(e,t,r);return t|0}var x8=er((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new vt(e,"AbortSignal",t)}),E8=er((t,e)=>{if(typeof t!="function")throw new vt(e,"Function",t)}),v8=er((t,e)=>{if(typeof t!="function"||t8(t))throw new vt(e,"Function",t)}),D8=er((t,e)=>{if(t!==void 0)throw new vt(e,"undefined",t)});function S8(t,e,r){if(!Rm(r,t))throw new vt(e,`('${Cm(r,"|")}')`,t)}var A8=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function km(t,e){if(typeof t>"u"||!Om(A8,t))throw new Ro(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function T8(t){if(typeof t=="string")return km(t,"hints"),t;if(tf(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];km(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new Ro("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Lm.exports={isInt32:n8,isUint32:i8,parseFileMode:c8,validateArray:of,validateStringArray:p8,validateBooleanArray:y8,validateBoolean:Pm,validateBuffer:b8,validateDictionary:h8,validateEncoding:g8,validateFunction:E8,validateInt32:u8,validateInteger:a8,validateNumber:d8,validateObject:f8,validateOneOf:l8,validatePlainFunction:v8,validatePort:w8,validateSignalName:m8,validateString:nf,validateUint32:Um,validateUndefined:D8,validateUnion:S8,validateAbortSignal:x8,validateLinkHeaderValue:T8}});var Vn=F((iC,$m)=>{var oC=l(f()),Ve=$m.exports={},Cr,Or;function sf(){throw new Error("setTimeout has not been defined")}function cf(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Cr=setTimeout:Cr=sf}catch{Cr=sf}try{typeof clearTimeout=="function"?Or=clearTimeout:Or=cf}catch{Or=cf}})();function Km(t){if(Cr===setTimeout)return setTimeout(t,0);if((Cr===sf||!Cr)&&setTimeout)return Cr=setTimeout,setTimeout(t,0);try{return Cr(t,0)}catch{try{return Cr.call(null,t,0)}catch{return Cr.call(this,t,0)}}}function _8(t){if(Or===clearTimeout)return clearTimeout(t);if((Or===cf||!Or)&&clearTimeout)return Or=clearTimeout,clearTimeout(t);try{return Or(t)}catch{try{return Or.call(null,t)}catch{return Or.call(this,t)}}}var dn=[],Co=!1,Oi,qa=-1;function I8(){!Co||!Oi||(Co=!1,Oi.length?dn=Oi.concat(dn):qa=-1,dn.length&&Mm())}function Mm(){if(!Co){var t=Km(I8);Co=!0;for(var e=dn.length;e;){for(Oi=dn,dn=[];++qa<e;)Oi&&Oi[qa].run();qa=-1,e=dn.length}Oi=null,Co=!1,_8(t)}}Ve.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];dn.push(new Nm(t,e)),dn.length===1&&!Co&&Km(Mm)};function Nm(t,e){this.fun=t,this.array=e}Nm.prototype.run=function(){this.fun.apply(null,this.array)};Ve.title="browser";Ve.browser=!0;Ve.env={};Ve.argv=[];Ve.version="";Ve.versions={};function ln(){}Ve.on=ln;Ve.addListener=ln;Ve.once=ln;Ve.off=ln;Ve.removeListener=ln;Ve.removeAllListeners=ln;Ve.emit=ln;Ve.prependListener=ln;Ve.prependOnceListener=ln;Ve.listeners=function(t){return[]};Ve.binding=function(t){throw new Error("process.binding is not supported")};Ve.cwd=function(){return"/"};Ve.chdir=function(t){throw new Error("process.chdir is not supported")};Ve.umask=function(){return 0}});var Pr=F((sC,rb)=>{"use strict";var cC=l(f()),{Symbol:Va,SymbolAsyncIterator:Fm,SymbolIterator:qm,SymbolFor:Vm}=Ye(),jm=Va("kDestroyed"),Hm=Va("kIsErrored"),af=Va("kIsReadable"),zm=Va("kIsDisturbed"),B8=Vm("nodejs.webstream.isClosedPromise"),k8=Vm("nodejs.webstream.controllerErrorFunction");function ja(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function Ha(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function R8(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Ur(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function Wm(t){return!!(t&&!Ur(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function Gm(t){return!!(t&&!Ur(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function Jm(t){return!!(t&&!Ur(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function C8(t){return Wm(t)||Gm(t)||Jm(t)}function O8(t,e){return t==null?!1:e===!0?typeof t[Fm]=="function":e===!1?typeof t[qm]=="function":typeof t[Fm]=="function"||typeof t[qm]=="function"}function za(t){if(!Ur(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[jm]||n!=null&&n.destroyed)}function Ym(t){if(!Ha(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function U8(t,e){if(!Ha(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function P8(t){if(!ja(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Xm(t,e){if(!ja(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function Zm(t){return t&&t[af]!=null?t[af]:typeof t?.readable!="boolean"?null:za(t)?!1:ja(t)&&t.readable&&!Xm(t)}function Qm(t){return typeof t?.writable!="boolean"?null:za(t)?!1:Ha(t)&&t.writable&&!Ym(t)}function L8(t,e){return Ur(t)?za(t)?!0:!(e?.readable!==!1&&Zm(t)||e?.writable!==!1&&Qm(t)):null}function K8(t){var e,r;return Ur(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function M8(t){var e,r;return Ur(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function N8(t){if(!Ur(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&eb(t)?t._closed:null}function eb(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function tb(t){return typeof t._sent100=="boolean"&&eb(t)}function $8(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function F8(t){if(!Ur(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&tb(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function q8(t){var e;return!!(t&&((e=t[zm])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function V8(t){var e,r,n,i,o,s,c,u,d,a;return!!(t&&((e=(r=(n=(i=(o=(s=t[Hm])!==null&&s!==void 0?s:t.readableErrored)!==null&&o!==void 0?o:t.writableErrored)!==null&&i!==void 0?i:(c=t._readableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&n!==void 0?n:(u=t._writableState)===null||u===void 0?void 0:u.errorEmitted)!==null&&r!==void 0?r:(d=t._readableState)===null||d===void 0?void 0:d.errored)!==null&&e!==void 0?e:!((a=t._writableState)===null||a===void 0)&&a.errored))}rb.exports={kDestroyed:jm,isDisturbed:q8,kIsDisturbed:zm,isErrored:V8,kIsErrored:Hm,isReadable:Zm,kIsReadable:af,kIsClosedPromise:B8,kControllerErrorFunction:k8,isClosed:N8,isDestroyed:za,isDuplexNodeStream:R8,isFinished:L8,isIterable:O8,isReadableNodeStream:ja,isReadableStream:Wm,isReadableEnded:P8,isReadableFinished:Xm,isReadableErrored:M8,isNodeStream:Ur,isWebStream:C8,isWritable:Qm,isWritableNodeStream:Ha,isWritableStream:Gm,isWritableEnded:Ym,isWritableFinished:U8,isWritableErrored:K8,isServerRequest:$8,isServerResponse:tb,willEmitClose:F8,isTransformStream:Jm}});var fn=F((aC,hf)=>{var uC=l(f()),jn=Vn(),{AbortError:lb,codes:j8}=Et(),{ERR_INVALID_ARG_TYPE:H8,ERR_STREAM_PREMATURE_CLOSE:nb}=j8,{kEmptyObject:df,once:lf}=Rr(),{validateAbortSignal:z8,validateFunction:W8,validateObject:G8,validateBoolean:J8}=tc(),{Promise:Y8,PromisePrototypeThen:X8}=Ye(),{isClosed:Z8,isReadable:ib,isReadableNodeStream:uf,isReadableStream:Q8,isReadableFinished:ob,isReadableErrored:sb,isWritable:cb,isWritableNodeStream:ab,isWritableStream:eS,isWritableFinished:ub,isWritableErrored:db,isNodeStream:tS,willEmitClose:rS,kIsClosedPromise:nS}=Pr();function iS(t){return t.setHeader&&typeof t.abort=="function"}var ff=()=>{};function fb(t,e,r){var n,i;if(arguments.length===2?(r=e,e=df):e==null?e=df:G8(e,"options"),W8(r,"callback"),z8(e.signal,"options.signal"),r=lf(r),Q8(t)||eS(t))return oS(t,e,r);if(!tS(t))throw new H8("stream",["ReadableStream","WritableStream","Stream"],t);let o=(n=e.readable)!==null&&n!==void 0?n:uf(t),s=(i=e.writable)!==null&&i!==void 0?i:ab(t),c=t._writableState,u=t._readableState,d=()=>{t.writable||m()},a=rS(t)&&uf(t)===o&&ab(t)===s,h=ub(t,!1),m=()=>{h=!0,t.destroyed&&(a=!1),!(a&&(!t.readable||o))&&(!o||y)&&r.call(t)},y=ob(t,!1),p=()=>{y=!0,t.destroyed&&(a=!1),!(a&&(!t.writable||s))&&(!s||h)&&r.call(t)},b=T=>{r.call(t,T)},x=Z8(t),v=()=>{x=!0;let T=db(t)||sb(t);if(T&&typeof T!="boolean")return r.call(t,T);if(o&&!y&&uf(t,!0)&&!ob(t,!1))return r.call(t,new nb);if(s&&!h&&!ub(t,!1))return r.call(t,new nb);r.call(t)},S=()=>{x=!0;let T=db(t)||sb(t);if(T&&typeof T!="boolean")return r.call(t,T);r.call(t)},w=()=>{t.req.on("finish",m)};iS(t)?(t.on("complete",m),a||t.on("abort",v),t.req?w():t.on("request",w)):s&&!c&&(t.on("end",d),t.on("close",d)),!a&&typeof t.aborted=="boolean"&&t.on("aborted",v),t.on("end",p),t.on("finish",m),e.error!==!1&&t.on("error",b),t.on("close",v),x?jn.nextTick(v):c!=null&&c.errorEmitted||u!=null&&u.errorEmitted?a||jn.nextTick(S):(!o&&(!a||ib(t))&&(h||cb(t)===!1)||!s&&(!a||cb(t))&&(y||ib(t)===!1)||u&&t.req&&t.aborted)&&jn.nextTick(S);let B=()=>{r=ff,t.removeListener("aborted",v),t.removeListener("complete",m),t.removeListener("abort",v),t.removeListener("request",w),t.req&&t.req.removeListener("finish",m),t.removeListener("end",d),t.removeListener("close",d),t.removeListener("finish",m),t.removeListener("end",p),t.removeListener("error",b),t.removeListener("close",v)};if(e.signal&&!x){let T=()=>{let k=r;B(),k.call(t,new lb(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)jn.nextTick(T);else{let k=r;r=lf((...O)=>{e.signal.removeEventListener("abort",T),k.apply(t,O)}),e.signal.addEventListener("abort",T)}}return B}function oS(t,e,r){let n=!1,i=ff;if(e.signal)if(i=()=>{n=!0,r.call(t,new lb(void 0,{cause:e.signal.reason}))},e.signal.aborted)jn.nextTick(i);else{let s=r;r=lf((...c)=>{e.signal.removeEventListener("abort",i),s.apply(t,c)}),e.signal.addEventListener("abort",i)}let o=(...s)=>{n||jn.nextTick(()=>r.apply(t,s))};return X8(t[nS].promise,o,o),ff}function sS(t,e){var r;let n=!1;return e===null&&(e=df),(r=e)!==null&&r!==void 0&&r.cleanup&&(J8(e.cleanup,"cleanup"),n=e.cleanup),new Y8((i,o)=>{let s=fb(t,e,c=>{n&&s(),c?o(c):i()})})}hf.exports=fb;hf.exports.finished=sS});var Ui=F((dC,xb)=>{"use strict";var lC=l(f()),Lr=Vn(),{aggregateTwoErrors:cS,codes:{ERR_MULTIPLE_CALLBACK:aS},AbortError:uS}=Et(),{Symbol:yb}=Ye(),{kDestroyed:dS,isDestroyed:lS,isFinished:fS,isServerRequest:hS}=Pr(),mb=yb("kDestroy"),pf=yb("kConstruct");function bb(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function pS(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(bb(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?hb(this,t,e):this.once(mb,function(o){hb(this,cS(o,t),e)}),this)}function hb(t,e,r){let n=!1;function i(o){if(n)return;n=!0;let s=t._readableState,c=t._writableState;bb(o,c,s),c&&(c.closed=!0),s&&(s.closed=!0),typeof r=="function"&&r(o),o?Lr.nextTick(yS,t,o):Lr.nextTick(gb,t)}try{t._destroy(e||null,i)}catch(o){i(o)}}function yS(t,e){yf(t,e),gb(t)}function gb(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function yf(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function mS(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function mf(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?Lr.nextTick(yf,t,e):yf(t,e))}function bS(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(pf,e),!(t.listenerCount(pf)>1)&&Lr.nextTick(gS,t)}function gS(t){let e=!1;function r(n){if(e){mf(t,n??new aS);return}e=!0;let i=t._readableState,o=t._writableState,s=o||i;i&&(i.constructed=!0),o&&(o.constructed=!0),s.destroyed?t.emit(mb,n):n?mf(t,n,!0):Lr.nextTick(wS,t)}try{t._construct(n=>{Lr.nextTick(r,n)})}catch(n){Lr.nextTick(r,n)}}function wS(t){t.emit(pf)}function pb(t){return t?.setHeader&&typeof t.abort=="function"}function wb(t){t.emit("close")}function xS(t,e){t.emit("error",e),Lr.nextTick(wb,t)}function ES(t,e){!t||lS(t)||(!e&&!fS(t)&&(e=new uS),hS(t)?(t.socket=null,t.destroy(e)):pb(t)?t.abort():pb(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Lr.nextTick(xS,t,e):Lr.nextTick(wb,t),t.destroyed||(t[dS]=!0))}xb.exports={construct:bS,destroyer:ES,destroy:pS,undestroy:mS,errorOrDestroy:mf}});var Ja=F((fC,vb)=>{"use strict";var hC=l(f()),{ArrayIsArray:vS,ObjectSetPrototypeOf:Eb}=Ye(),{EventEmitter:Wa}=Ms();function Ga(t){Wa.call(this,t)}Eb(Ga.prototype,Wa.prototype);Eb(Ga,Wa);Ga.prototype.pipe=function(t,e){let r=this;function n(a){t.writable&&t.write(a)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",s),r.on("close",c));let o=!1;function s(){o||(o=!0,t.end())}function c(){o||(o=!0,typeof t.destroy=="function"&&t.destroy())}function u(a){d(),Wa.listenerCount(this,"error")===0&&this.emit("error",a)}bf(r,"error",u),bf(t,"error",u);function d(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",c),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",d),r.removeListener("close",d),t.removeListener("close",d)}return r.on("end",d),r.on("close",d),t.on("close",d),t.emit("pipe",r),t};function bf(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):vS(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}vb.exports={Stream:Ga,prependListener:bf}});var rc=F((pC,Ya)=>{"use strict";var yC=l(f()),{AbortError:Db,codes:DS}=Et(),{isNodeStream:Sb,isWebStream:SS,kControllerErrorFunction:AS}=Pr(),TS=fn(),{ERR_INVALID_ARG_TYPE:Ab}=DS,_S=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new Ab(e,"AbortSignal",t)};Ya.exports.addAbortSignal=function(e,r){if(_S(e,"signal"),!Sb(r)&&!SS(r))throw new Ab("stream",["ReadableStream","WritableStream","Stream"],r);return Ya.exports.addAbortSignalNoValidate(e,r)};Ya.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=Sb(e)?()=>{e.destroy(new Db(void 0,{cause:t.reason}))}:()=>{e[AS](new Db(void 0,{cause:t.reason}))};return t.aborted?r():(t.addEventListener("abort",r),TS(e,()=>t.removeEventListener("abort",r))),e}});var Ib=F((bC,_b)=>{"use strict";var gC=l(f()),{StringPrototypeSlice:Tb,SymbolIterator:IS,TypedArrayPrototypeSet:Xa,Uint8Array:BS}=Ye(),{Buffer:gf}=Tt(),{inspect:kS}=Rr();_b.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return gf.alloc(0);let r=gf.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)Xa(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[IS](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let o=n.data;if(e>o.length)r+=o,e-=o.length;else{e===o.length?(r+=o,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=Tb(o,0,e),this.head=n,n.data=Tb(o,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=gf.allocUnsafe(e),n=e,i=this.head,o=0;do{let s=i.data;if(e>s.length)Xa(r,s,n-e),e-=s.length;else{e===s.length?(Xa(r,s,n-e),++o,i.next?this.head=i.next:this.head=this.tail=null):(Xa(r,new BS(s.buffer,s.byteOffset,e),n-e),this.head=i,i.data=s.slice(e));break}++o}while((i=i.next)!==null);return this.length-=o,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return kS(this,{...r,depth:0,customInspect:!1})}}});var Za=F((wC,kb)=>{"use strict";var xC=l(f()),{MathFloor:RS,NumberIsInteger:CS}=Ye(),{ERR_INVALID_ARG_VALUE:OS}=Et().codes;function US(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Bb(t){return t?16:16*1024}function PS(t,e,r,n){let i=US(e,n,r);if(i!=null){if(!CS(i)||i<0){let o=n?`options.${r}`:"options.highWaterMark";throw new OS(o,i)}return RS(i)}return Bb(t.objectMode)}kb.exports={getHighWaterMark:PS,getDefaultHighWaterMark:Bb}});var Ob=F((wf,Cb)=>{var EC=l(f());var Qa=Tt(),Kr=Qa.Buffer;function Rb(t,e){for(var r in t)e[r]=t[r]}Kr.from&&Kr.alloc&&Kr.allocUnsafe&&Kr.allocUnsafeSlow?Cb.exports=Qa:(Rb(Qa,wf),wf.Buffer=Pi);function Pi(t,e,r){return Kr(t,e,r)}Pi.prototype=Object.create(Kr.prototype);Rb(Kr,Pi);Pi.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Kr(t,e,r)};Pi.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Kr(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Pi.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Kr(t)};Pi.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Qa.SlowBuffer(t)}});var Lb=F(Pb=>{"use strict";var DC=l(f()),Ef=Ob().Buffer,Ub=Ef.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function LS(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function KS(t){var e=LS(t);if(typeof e!="string"&&(Ef.isEncoding===Ub||!Ub(t)))throw new Error("Unknown encoding: "+t);return e||t}Pb.StringDecoder=nc;function nc(t){this.encoding=KS(t);var e;switch(this.encoding){case"utf16le":this.text=VS,this.end=jS,e=4;break;case"utf8":this.fillLast=$S,e=4;break;case"base64":this.text=HS,this.end=zS,e=3;break;default:this.write=WS,this.end=GS;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Ef.allocUnsafe(e)}nc.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};nc.prototype.end=qS;nc.prototype.text=FS;nc.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function xf(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function MS(t,e,r){var n=e.length-1;if(n<r)return 0;var i=xf(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=xf(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=xf(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function NS(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function $S(t){var e=this.lastTotal-this.lastNeed,r=NS(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function FS(t,e){var r=MS(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function qS(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function VS(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function jS(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function HS(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function zS(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function WS(t){return t.toString(this.encoding)}function GS(t){return t&&t.length?this.write(t):""}});var vf=F((SC,$b)=>{"use strict";var AC=l(f()),Kb=Vn(),{PromisePrototypeThen:JS,SymbolAsyncIterator:Mb,SymbolIterator:Nb}=Ye(),{Buffer:YS}=Tt(),{ERR_INVALID_ARG_TYPE:XS,ERR_STREAM_NULL_VALUES:ZS}=Et().codes;function QS(t,e,r){let n;if(typeof e=="string"||e instanceof YS)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[Mb])i=!0,n=e[Mb]();else if(e&&e[Nb])i=!1,n=e[Nb]();else throw new XS("iterable",["Iterable"],e);let o=new t({objectMode:!0,highWaterMark:1,...r}),s=!1;o._read=function(){s||(s=!0,u())},o._destroy=function(d,a){JS(c(d),()=>Kb.nextTick(a,d),h=>Kb.nextTick(a,h||d))};async function c(d){let a=d!=null,h=typeof n.throw=="function";if(a&&h){let{value:m,done:y}=await n.throw(d);if(await m,y)return}if(typeof n.return=="function"){let{value:m}=await n.return();await m}}async function u(){for(;;){try{let{value:d,done:a}=i?await n.next():n.next();if(a)o.push(null);else{let h=d&&typeof d.then=="function"?await d:d;if(h===null)throw s=!1,new ZS;if(o.push(h))continue;s=!1}}catch(d){o.destroy(d)}break}}return o}$b.exports=QS});var ic=F((TC,Qb)=>{var _C=l(f()),hr=Vn(),{ArrayPrototypeIndexOf:eA,NumberIsInteger:tA,NumberIsNaN:rA,NumberParseInt:nA,ObjectDefineProperties:Vb,ObjectKeys:iA,ObjectSetPrototypeOf:jb,Promise:oA,SafeSet:sA,SymbolAsyncIterator:cA,Symbol:aA}=Ye();Qb.exports=he;he.ReadableState=If;var{EventEmitter:uA}=Ms(),{Stream:Hn,prependListener:dA}=Ja(),{Buffer:Df}=Tt(),{addAbortSignal:lA}=rc(),fA=fn(),ye=Rr().debuglog("stream",t=>{ye=t}),hA=Ib(),Uo=Ui(),{getHighWaterMark:pA,getDefaultHighWaterMark:yA}=Za(),{aggregateTwoErrors:Fb,codes:{ERR_INVALID_ARG_TYPE:mA,ERR_METHOD_NOT_IMPLEMENTED:bA,ERR_OUT_OF_RANGE:gA,ERR_STREAM_PUSH_AFTER_EOF:wA,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:xA}}=Et(),{validateObject:EA}=tc(),Li=aA("kPaused"),{StringDecoder:Hb}=Lb(),vA=vf();jb(he.prototype,Hn.prototype);jb(he,Hn);var Sf=()=>{},{errorOrDestroy:Oo}=Uo;function If(t,e,r){typeof r!="boolean"&&(r=e instanceof Mr()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.readableObjectMode)),this.highWaterMark=t?pA(this,t,"readableHighWaterMark",r):yA(!1),this.buffer=new hA,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[Li]=null,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new Hb(t.encoding),this.encoding=t.encoding)}function he(t){if(!(this instanceof he))return new he(t);let e=this instanceof Mr();this._readableState=new If(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&lA(t.signal,this)),Hn.call(this,t),Uo.construct(this,()=>{this._readableState.needReadable&&eu(this,this._readableState)})}he.prototype.destroy=Uo.destroy;he.prototype._undestroy=Uo.undestroy;he.prototype._destroy=function(t,e){e(t)};he.prototype[uA.captureRejectionSymbol]=function(t){this.destroy(t)};he.prototype.push=function(t,e){return zb(this,t,e,!1)};he.prototype.unshift=function(t,e){return zb(this,t,e,!0)};function zb(t,e,r,n){ye("readableAddChunk",e);let i=t._readableState,o;if(i.objectMode||(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=Df.from(e,r).toString(i.encoding):(e=Df.from(e,r),r=""))):e instanceof Df?r="":Hn._isUint8Array(e)?(e=Hn._uint8ArrayToBuffer(e),r=""):e!=null&&(o=new mA("chunk",["string","Buffer","Uint8Array"],e))),o)Oo(t,o);else if(e===null)i.reading=!1,AA(t,i);else if(i.objectMode||e&&e.length>0)if(n)if(i.endEmitted)Oo(t,new xA);else{if(i.destroyed||i.errored)return!1;Af(t,i,e,!0)}else if(i.ended)Oo(t,new wA);else{if(i.destroyed||i.errored)return!1;i.reading=!1,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?Af(t,i,e,!1):eu(t,i)):Af(t,i,e,!1)}else n||(i.reading=!1,eu(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function Af(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?(e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&tu(t)),eu(t,e)}he.prototype.isPaused=function(){let t=this._readableState;return t[Li]===!0||t.flowing===!1};he.prototype.setEncoding=function(t){let e=new Hb(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var DA=1073741824;function SA(t){if(t>DA)throw new gA("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function qb(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:rA(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}he.prototype.read=function(t){ye("read",t),t===void 0?t=NaN:tA(t)||(t=nA(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=SA(t)),t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return ye("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Tf(this):tu(this),null;if(t=qb(t,e),t===0&&e.ended)return e.length===0&&Tf(this),null;let n=e.needReadable;if(ye("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,ye("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,ye("reading, ended or constructing",n);else if(n){ye("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0);try{this._read(e.highWaterMark)}catch(o){Oo(this,o)}e.sync=!1,e.reading||(t=qb(r,e))}let i;return t>0?i=Xb(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Tf(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function AA(t,e){if(ye("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?tu(t):(e.needReadable=!1,e.emittedReadable=!0,Wb(t))}}function tu(t){let e=t._readableState;ye("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(ye("emitReadable",e.flowing),e.emittedReadable=!0,hr.nextTick(Wb,t))}function Wb(t){let e=t._readableState;ye("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Jb(t)}function eu(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,hr.nextTick(TA,t,e))}function TA(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(ye("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}he.prototype._read=function(t){throw new bA("_read()")};he.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new sA(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),ye("pipe count=%d opts=%j",n.pipes.length,e);let o=(!e||e.end!==!1)&&t!==hr.stdout&&t!==hr.stderr?c:x;n.endEmitted?hr.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(v,S){ye("onunpipe"),v===r&&S&&S.hasUnpiped===!1&&(S.hasUnpiped=!0,a())}function c(){ye("onend"),t.end()}let u,d=!1;function a(){ye("cleanup"),t.removeListener("close",p),t.removeListener("finish",b),u&&t.removeListener("drain",u),t.removeListener("error",y),t.removeListener("unpipe",s),r.removeListener("end",c),r.removeListener("end",x),r.removeListener("data",m),d=!0,u&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&u()}function h(){d||(n.pipes.length===1&&n.pipes[0]===t?(ye("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(ye("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),u||(u=_A(r,t),t.on("drain",u))}r.on("data",m);function m(v){ye("ondata");let S=t.write(v);ye("dest.write",S),S===!1&&h()}function y(v){if(ye("onerror",v),x(),t.removeListener("error",y),t.listenerCount("error")===0){let S=t._writableState||t._readableState;S&&!S.errorEmitted?Oo(t,v):t.emit("error",v)}}dA(t,"error",y);function p(){t.removeListener("finish",b),x()}t.once("close",p);function b(){ye("onfinish"),t.removeListener("close",p),x()}t.once("finish",b);function x(){ye("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?n.flowing&&h():n.flowing||(ye("pipe resume"),r.resume()),t};function _A(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(ye("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(ye("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}he.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let o=0;o<i.length;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}let n=eA(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};he.prototype.on=function(t,e){let r=Hn.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,ye("on readable",n.length,n.reading),n.length?tu(this):n.reading||hr.nextTick(IA,this)),r};he.prototype.addListener=he.prototype.on;he.prototype.removeListener=function(t,e){let r=Hn.prototype.removeListener.call(this,t,e);return t==="readable"&&hr.nextTick(Gb,this),r};he.prototype.off=he.prototype.removeListener;he.prototype.removeAllListeners=function(t){let e=Hn.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&hr.nextTick(Gb,this),e};function Gb(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[Li]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function IA(t){ye("readable nexttick read 0"),t.read(0)}he.prototype.resume=function(){let t=this._readableState;return t.flowing||(ye("resume"),t.flowing=!t.readableListening,BA(this,t)),t[Li]=!1,this};function BA(t,e){e.resumeScheduled||(e.resumeScheduled=!0,hr.nextTick(kA,t,e))}function kA(t,e){ye("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Jb(t),e.flowing&&!e.reading&&t.read(0)}he.prototype.pause=function(){return ye("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ye("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Li]=!0,this};function Jb(t){let e=t._readableState;for(ye("flow",e.flowing);e.flowing&&t.read()!==null;);}he.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{Oo(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=iA(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};he.prototype[cA]=function(){return Yb(this)};he.prototype.iterator=function(t){return t!==void 0&&EA(t,"options"),Yb(this,t)};function Yb(t,e){typeof t.read!="function"&&(t=he.wrap(t,{objectMode:!0}));let r=RA(t,e);return r.stream=t,r}async function*RA(t,e){let r=Sf;function n(s){this===t?(r(),r=Sf):r=s}t.on("readable",n);let i,o=fA(t,{writable:!1},s=>{i=s?Fb(i,s):null,r(),r=Sf});try{for(;;){let s=t.destroyed?null:t.read();if(s!==null)yield s;else{if(i)throw i;if(i===null)return;await new oA(n)}}}catch(s){throw i=Fb(i,s),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?Uo.destroyer(t,null):(t.off("readable",n),o())}}Vb(he.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});Vb(If.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Li]!==!1},set(t){this[Li]=!!t}}});he._fromList=Xb;function Xb(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Tf(t){let e=t._readableState;ye("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,hr.nextTick(CA,e,t))}function CA(t,e){if(ye("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)hr.nextTick(OA,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function OA(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}he.from=function(t,e){return vA(he,t,e)};var _f;function Zb(){return _f===void 0&&(_f={}),_f}he.fromWeb=function(t,e){return Zb().newStreamReadableFromReadableStream(t,e)};he.toWeb=function(t,e){return Zb().newReadableStreamFromStreamReadable(t,e)};he.wrap=function(t,e){var r,n;return new he({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,o){Uo.destroyer(t,i),o(i)}}).wrap(t)}});var Pf=F((IC,lg)=>{var BC=l(f()),Ki=Vn(),{ArrayPrototypeSlice:rg,Error:UA,FunctionPrototypeSymbolHasInstance:ng,ObjectDefineProperty:ig,ObjectDefineProperties:PA,ObjectSetPrototypeOf:og,StringPrototypeToLowerCase:LA,Symbol:KA,SymbolHasInstance:MA}=Ye();lg.exports=Ne;Ne.WritableState=cc;var{EventEmitter:NA}=Ms(),oc=Ja().Stream,{Buffer:ru}=Tt(),ou=Ui(),{addAbortSignal:$A}=rc(),{getHighWaterMark:FA,getDefaultHighWaterMark:qA}=Za(),{ERR_INVALID_ARG_TYPE:VA,ERR_METHOD_NOT_IMPLEMENTED:jA,ERR_MULTIPLE_CALLBACK:sg,ERR_STREAM_CANNOT_PIPE:HA,ERR_STREAM_DESTROYED:sc,ERR_STREAM_ALREADY_FINISHED:zA,ERR_STREAM_NULL_VALUES:WA,ERR_STREAM_WRITE_AFTER_END:GA,ERR_UNKNOWN_ENCODING:cg}=Et().codes,{errorOrDestroy:Po}=ou;og(Ne.prototype,oc.prototype);og(Ne,oc);function Rf(){}var Lo=KA("kOnFinished");function cc(t,e,r){typeof r!="boolean"&&(r=e instanceof Mr()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?FA(this,t,"writableHighWaterMark",r):qA(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=YA.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,iu(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Lo]=[]}function iu(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}cc.prototype.getBuffer=function(){return rg(this.buffered,this.bufferedIndex)};ig(cc.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Ne(t){let e=this instanceof Mr();if(!e&&!ng(Ne,this))return new Ne(t);this._writableState=new cc(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&$A(t.signal,this)),oc.call(this,t),ou.construct(this,()=>{let r=this._writableState;r.writing||Of(this,r),Uf(this,r)})}ig(Ne,MA,{__proto__:null,value:function(t){return ng(this,t)?!0:this!==Ne?!1:t&&t._writableState instanceof cc}});Ne.prototype.pipe=function(){Po(this,new HA)};function ag(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!ru.isEncoding(r))throw new cg(r);typeof n!="function"&&(n=Rf)}if(e===null)throw new WA;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=ru.from(e,r),r="buffer");else if(e instanceof ru)r="buffer";else if(oc._isUint8Array(e))e=oc._uint8ArrayToBuffer(e),r="buffer";else throw new VA("chunk",["string","Buffer","Uint8Array"],e);let o;return i.ending?o=new GA:i.destroyed&&(o=new sc("write")),o?(Ki.nextTick(n,o),Po(t,o,!0),o):(i.pendingcb++,JA(t,i,e,r,n))}Ne.prototype.write=function(t,e,r){return ag(this,t,e,r)===!0};Ne.prototype.cork=function(){this._writableState.corked++};Ne.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||Of(this,t))};Ne.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=LA(e)),!ru.isEncoding(e))throw new cg(e);return this._writableState.defaultEncoding=e,this};function JA(t,e,r,n,i){let o=e.objectMode?1:r.length;e.length+=o;let s=e.length<e.highWaterMark;return s||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==Rf&&(e.allNoop=!1)):(e.writelen=o,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),s&&!e.errored&&!e.destroyed}function eg(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new sc("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function tg(t,e,r,n){--e.pendingcb,n(r),Cf(e),Po(t,r)}function YA(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){Po(t,new sg);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?Ki.nextTick(tg,t,r,e,i):tg(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&Of(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},Ki.nextTick(XA,r.afterWriteTickInfo)):ug(t,r,1,i))}function XA({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,ug(t,e,r,n)}function ug(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&Cf(e),Uf(t,e)}function Cf(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:o,callback:s}=t.buffered[i],c=t.objectMode?1:o.length;t.length-=c,s((e=t.errored)!==null&&e!==void 0?e:new sc("write"))}let r=t[Lo].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new sc("end"))}iu(t)}function Of(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,o=r.length-n;if(!o)return;let s=n;if(e.bufferProcessing=!0,o>1&&t._writev){e.pendingcb-=o-1;let c=e.allNoop?Rf:d=>{for(let a=s;a<r.length;++a)r[a].callback(d)},u=e.allNoop&&s===0?r:rg(r,s);u.allBuffers=e.allBuffers,eg(t,e,!0,e.length,u,"",c),iu(e)}else{do{let{chunk:c,encoding:u,callback:d}=r[s];r[s++]=null;let a=i?1:c.length;eg(t,e,!1,a,c,u,d)}while(s<r.length&&!e.writing);s===r.length?iu(e):s>256?(r.splice(0,s),e.bufferedIndex=0):e.bufferedIndex=s}e.bufferProcessing=!1}Ne.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new jA("_write()")};Ne.prototype._writev=null;Ne.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let o=ag(this,t,e);o instanceof UA&&(i=o)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,Uf(this,n,!0),n.ended=!0):n.finished?i=new zA("end"):n.destroyed&&(i=new sc("end"))),typeof r=="function"&&(i||n.finished?Ki.nextTick(r,i):n[Lo].push(r)),this};function nu(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function ZA(t,e){let r=!1;function n(i){if(r){Po(t,i??sg());return}if(r=!0,e.pendingcb--,i){let o=e[Lo].splice(0);for(let s=0;s<o.length;s++)o[s](i);Po(t,i,e.sync)}else nu(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,Ki.nextTick(kf,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function QA(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,ZA(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Uf(t,e,r){nu(e)&&(QA(t,e),e.pendingcb===0&&(r?(e.pendingcb++,Ki.nextTick((n,i)=>{nu(i)?kf(n,i):i.pendingcb--},t,e)):nu(e)&&(e.pendingcb++,kf(t,e))))}function kf(t,e){e.pendingcb--,e.finished=!0;let r=e[Lo].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}PA(Ne.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var e3=ou.destroy;Ne.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[Lo].length)&&Ki.nextTick(Cf,r),e3.call(this,t,e),this};Ne.prototype._undestroy=ou.undestroy;Ne.prototype._destroy=function(t,e){e(t)};Ne.prototype[NA.captureRejectionSymbol]=function(t){this.destroy(t)};var Bf;function dg(){return Bf===void 0&&(Bf={}),Bf}Ne.fromWeb=function(t,e){return dg().newStreamWritableFromWritableStream(t,e)};Ne.toWeb=function(t){return dg().newWritableStreamFromStreamWritable(t)}});var Dg=F((kC,vg)=>{var RC=l(f()),Lf=Vn(),t3=Tt(),{isReadable:r3,isWritable:n3,isIterable:fg,isNodeStream:i3,isReadableNodeStream:hg,isWritableNodeStream:pg,isDuplexNodeStream:o3}=Pr(),yg=fn(),{AbortError:Eg,codes:{ERR_INVALID_ARG_TYPE:s3,ERR_INVALID_RETURN_VALUE:mg}}=Et(),{destroyer:Ko}=Ui(),c3=Mr(),a3=ic(),{createDeferredPromise:bg}=Rr(),gg=vf(),wg=globalThis.Blob||t3.Blob,u3=typeof wg<"u"?function(e){return e instanceof wg}:function(e){return!1},d3=globalThis.AbortController||Na().AbortController,{FunctionPrototypeCall:xg}=Ye(),Mi=class extends c3{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};vg.exports=function t(e,r){if(o3(e))return e;if(hg(e))return su({readable:e});if(pg(e))return su({writable:e});if(i3(e))return su({writable:!1,readable:!1});if(typeof e=="function"){let{value:i,write:o,final:s,destroy:c}=l3(e);if(fg(i))return gg(Mi,i,{objectMode:!0,write:o,final:s,destroy:c});let u=i?.then;if(typeof u=="function"){let d,a=xg(u,i,h=>{if(h!=null)throw new mg("nully","body",h)},h=>{Ko(d,h)});return d=new Mi({objectMode:!0,readable:!1,write:o,final(h){s(async()=>{try{await a,Lf.nextTick(h,null)}catch(m){Lf.nextTick(h,m)}})},destroy:c})}throw new mg("Iterable, AsyncIterable or AsyncFunction",r,i)}if(u3(e))return t(e.arrayBuffer());if(fg(e))return gg(Mi,e,{objectMode:!0,writable:!1});if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?hg(e?.readable)?e?.readable:t(e.readable):void 0,o=e!=null&&e.writable?pg(e?.writable)?e?.writable:t(e.writable):void 0;return su({readable:i,writable:o})}let n=e?.then;if(typeof n=="function"){let i;return xg(n,e,o=>{o!=null&&i.push(o),i.push(null)},o=>{Ko(i,o)}),i=new Mi({objectMode:!0,writable:!1,read(){}})}throw new s3(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function l3(t){let{promise:e,resolve:r}=bg(),n=new d3,i=n.signal;return{value:t(async function*(){for(;;){let s=e;e=null;let{chunk:c,done:u,cb:d}=await s;if(Lf.nextTick(d),u)return;if(i.aborted)throw new Eg(void 0,{cause:i.reason});({promise:e,resolve:r}=bg()),yield c}}(),{signal:i}),write(s,c,u){let d=r;r=null,d({chunk:s,done:!1,cb:u})},final(s){let c=r;r=null,c({done:!0,cb:s})},destroy(s,c){n.abort(),c(s)}}}function su(t){let e=t.readable&&typeof t.readable.read!="function"?a3.wrap(t.readable):t.readable,r=t.writable,n=!!r3(e),i=!!n3(r),o,s,c,u,d;function a(h){let m=u;u=null,m?m(h):h&&d.destroy(h)}return d=new Mi({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(yg(r,h=>{i=!1,h&&Ko(e,h),a(h)}),d._write=function(h,m,y){r.write(h,m)?y():o=y},d._final=function(h){r.end(),s=h},r.on("drain",function(){if(o){let h=o;o=null,h()}}),r.on("finish",function(){if(s){let h=s;s=null,h()}})),n&&(yg(e,h=>{n=!1,h&&Ko(e,h),a(h)}),e.on("readable",function(){if(c){let h=c;c=null,h()}}),e.on("end",function(){d.push(null)}),d._read=function(){for(;;){let h=e.read();if(h===null){c=d._read;return}if(!d.push(h))return}}),d._destroy=function(h,m){!h&&u!==null&&(h=new Eg),c=null,o=null,s=null,u===null?m(h):(u=m,Ko(r,h),Ko(e,h))},d}});var Mr=F((CC,Tg)=>{"use strict";var OC=l(f()),{ObjectDefineProperties:f3,ObjectGetOwnPropertyDescriptor:hn,ObjectKeys:h3,ObjectSetPrototypeOf:Sg}=Ye();Tg.exports=pr;var Nf=ic(),tr=Pf();Sg(pr.prototype,Nf.prototype);Sg(pr,Nf);{let t=h3(tr.prototype);for(let e=0;e<t.length;e++){let r=t[e];pr.prototype[r]||(pr.prototype[r]=tr.prototype[r])}}function pr(t){if(!(this instanceof pr))return new pr(t);Nf.call(this,t),tr.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}f3(pr.prototype,{writable:{__proto__:null,...hn(tr.prototype,"writable")},writableHighWaterMark:{__proto__:null,...hn(tr.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...hn(tr.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...hn(tr.prototype,"writableBuffer")},writableLength:{__proto__:null,...hn(tr.prototype,"writableLength")},writableFinished:{__proto__:null,...hn(tr.prototype,"writableFinished")},writableCorked:{__proto__:null,...hn(tr.prototype,"writableCorked")},writableEnded:{__proto__:null,...hn(tr.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...hn(tr.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var Kf;function Ag(){return Kf===void 0&&(Kf={}),Kf}pr.fromWeb=function(t,e){return Ag().newStreamDuplexFromReadableWritablePair(t,e)};pr.toWeb=function(t){return Ag().newReadableWritablePairFromDuplex(t)};var Mf;pr.from=function(t){return Mf||(Mf=Dg()),Mf(t,"body")}});var qf=F((UC,Ig)=>{"use strict";var PC=l(f()),{ObjectSetPrototypeOf:_g,Symbol:p3}=Ye();Ig.exports=pn;var{ERR_METHOD_NOT_IMPLEMENTED:y3}=Et().codes,Ff=Mr(),{getHighWaterMark:m3}=Za();_g(pn.prototype,Ff.prototype);_g(pn,Ff);var ac=p3("kCallback");function pn(t){if(!(this instanceof pn))return new pn(t);let e=t?m3(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),Ff.call(this,t),this._readableState.sync=!1,this[ac]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",b3)}function $f(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function b3(){this._final!==$f&&$f.call(this)}pn.prototype._final=$f;pn.prototype._transform=function(t,e,r){throw new y3("_transform()")};pn.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,o=n.length;this._transform(t,e,(s,c)=>{if(s){r(s);return}c!=null&&this.push(c),i.ended||o===n.length||n.length<n.highWaterMark?r():this[ac]=r})};pn.prototype._read=function(){if(this[ac]){let t=this[ac];this[ac]=null,t()}}});var jf=F((LC,kg)=>{"use strict";var KC=l(f()),{ObjectSetPrototypeOf:Bg}=Ye();kg.exports=Mo;var Vf=qf();Bg(Mo.prototype,Vf.prototype);Bg(Mo,Vf);function Mo(t){if(!(this instanceof Mo))return new Mo(t);Vf.call(this,t)}Mo.prototype._transform=function(t,e,r){r(null,t)}});var du=F((MC,Pg)=>{var NC=l(f()),uc=Vn(),{ArrayIsArray:g3,Promise:w3,SymbolAsyncIterator:x3}=Ye(),uu=fn(),{once:E3}=Rr(),v3=Ui(),Rg=Mr(),{aggregateTwoErrors:D3,codes:{ERR_INVALID_ARG_TYPE:Zf,ERR_INVALID_RETURN_VALUE:Hf,ERR_MISSING_ARGS:S3,ERR_STREAM_DESTROYED:A3,ERR_STREAM_PREMATURE_CLOSE:T3},AbortError:_3}=Et(),{validateFunction:I3,validateAbortSignal:B3}=tc(),{isIterable:Ni,isReadable:zf,isReadableNodeStream:au,isNodeStream:Cg,isTransformStream:No,isWebStream:k3,isReadableStream:Wf,isReadableEnded:R3}=Pr(),C3=globalThis.AbortController||Na().AbortController,Gf,Jf;function Og(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=uu(t,{readable:e,writable:r},o=>{n=!o});return{destroy:o=>{n||(n=!0,v3.destroyer(t,o||new A3("pipe")))},cleanup:i}}function O3(t){return I3(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function Yf(t){if(Ni(t))return t;if(au(t))return U3(t);throw new Zf("val",["Readable","Iterable","AsyncIterable"],t)}async function*U3(t){Jf||(Jf=ic()),yield*Jf.prototype[x3].call(t)}async function cu(t,e,r,{end:n}){let i,o=null,s=d=>{if(d&&(i=d),o){let a=o;o=null,a()}},c=()=>new w3((d,a)=>{i?a(i):o=()=>{i?a(i):d()}});e.on("drain",s);let u=uu(e,{readable:!1},s);try{e.writableNeedDrain&&await c();for await(let d of t)e.write(d)||await c();n&&e.end(),await c(),r()}catch(d){r(i!==d?D3(i,d):d)}finally{u(),e.off("drain",s)}}async function Xf(t,e,r,{end:n}){No(e)&&(e=e.writable);let i=e.getWriter();try{for await(let o of t)await i.ready,i.write(o).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(o){try{await i.abort(o),r(o)}catch(s){r(s)}}}function P3(...t){return Ug(t,E3(O3(t)))}function Ug(t,e,r){if(t.length===1&&g3(t[0])&&(t=t[0]),t.length<2)throw new S3("streams");let n=new C3,i=n.signal,o=r?.signal,s=[];B3(o,"options.signal");function c(){y(new _3)}o?.addEventListener("abort",c);let u,d,a=[],h=0;function m(S){y(S,--h===0)}function y(S,w){if(S&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=S),!(!u&&!w)){for(;a.length;)a.shift()(u);o?.removeEventListener("abort",c),n.abort(),w&&(u||s.forEach(B=>B()),uc.nextTick(e,u,d))}}let p;for(let S=0;S<t.length;S++){let w=t[S],B=S<t.length-1,T=S>0,k=B||r?.end!==!1,O=S===t.length-1;if(Cg(w)){let C=function(M){M&&M.name!=="AbortError"&&M.code!=="ERR_STREAM_PREMATURE_CLOSE"&&m(M)};var v=C;if(k){let{destroy:M,cleanup:$}=Og(w,B,T);a.push(M),zf(w)&&O&&s.push($)}w.on("error",C),zf(w)&&O&&s.push(()=>{w.removeListener("error",C)})}if(S===0)if(typeof w=="function"){if(p=w({signal:i}),!Ni(p))throw new Hf("Iterable, AsyncIterable or Stream","source",p)}else Ni(w)||au(w)||No(w)?p=w:p=Rg.from(w);else if(typeof w=="function"){if(No(p)){var b;p=Yf((b=p)===null||b===void 0?void 0:b.readable)}else p=Yf(p);if(p=w(p,{signal:i}),B){if(!Ni(p,!0))throw new Hf("AsyncIterable",`transform[${S-1}]`,p)}else{var x;Gf||(Gf=jf());let C=new Gf({objectMode:!0}),M=(x=p)===null||x===void 0?void 0:x.then;if(typeof M=="function")h++,M.call(p,j=>{d=j,j!=null&&C.write(j),k&&C.end(),uc.nextTick(m)},j=>{C.destroy(j),uc.nextTick(m,j)});else if(Ni(p,!0))h++,cu(p,C,m,{end:k});else if(Wf(p)||No(p)){let j=p.readable||p;h++,cu(j,C,m,{end:k})}else throw new Hf("AsyncIterable or Promise","destination",p);p=C;let{destroy:$,cleanup:q}=Og(p,!1,!0);a.push($),O&&s.push(q)}}else if(Cg(w)){if(au(p)){h+=2;let C=L3(p,w,m,{end:k});zf(w)&&O&&s.push(C)}else if(No(p)||Wf(p)){let C=p.readable||p;h++,cu(C,w,m,{end:k})}else if(Ni(p))h++,cu(p,w,m,{end:k});else throw new Zf("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],p);p=w}else if(k3(w)){if(au(p))h++,Xf(Yf(p),w,m,{end:k});else if(Wf(p)||Ni(p))h++,Xf(p,w,m,{end:k});else if(No(p))h++,Xf(p.readable,w,m,{end:k});else throw new Zf("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],p);p=w}else p=Rg.from(w)}return(i!=null&&i.aborted||o!=null&&o.aborted)&&uc.nextTick(c),p}function L3(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new T3)}),t.pipe(e,{end:!1}),n){let s=function(){i=!0,e.end()};var o=s;R3(t)?uc.nextTick(s):t.once("end",s)}else r();return uu(t,{readable:!0,writable:!1},s=>{let c=t._readableState;s&&s.code==="ERR_STREAM_PREMATURE_CLOSE"&&c&&c.ended&&!c.errored&&!c.errorEmitted?t.once("end",r).once("error",r):r(s)}),uu(e,{readable:!1,writable:!0},r)}Pg.exports={pipelineImpl:Ug,pipeline:P3}});var eh=F(($C,Fg)=>{"use strict";var FC=l(f()),{pipeline:K3}=du(),lu=Mr(),{destroyer:M3}=Ui(),{isNodeStream:fu,isReadable:Lg,isWritable:Kg,isWebStream:Qf,isTransformStream:$i,isWritableStream:Mg,isReadableStream:Ng}=Pr(),{AbortError:N3,codes:{ERR_INVALID_ARG_VALUE:$g,ERR_MISSING_ARGS:$3}}=Et(),F3=fn();Fg.exports=function(...e){if(e.length===0)throw new $3("streams");if(e.length===1)return lu.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=lu.from(e[0])),typeof e[e.length-1]=="function"){let y=e.length-1;e[y]=lu.from(e[y])}for(let y=0;y<e.length;++y)if(!(!fu(e[y])&&!Qf(e[y]))){if(y<e.length-1&&!(Lg(e[y])||Ng(e[y])||$i(e[y])))throw new $g(`streams[${y}]`,r[y],"must be readable");if(y>0&&!(Kg(e[y])||Mg(e[y])||$i(e[y])))throw new $g(`streams[${y}]`,r[y],"must be writable")}let n,i,o,s,c;function u(y){let p=s;s=null,p?p(y):y?c.destroy(y):!m&&!h&&c.destroy()}let d=e[0],a=K3(e,u),h=!!(Kg(d)||Mg(d)||$i(d)),m=!!(Lg(a)||Ng(a)||$i(a));if(c=new lu({writableObjectMode:!!(d!=null&&d.writableObjectMode),readableObjectMode:!!(a!=null&&a.writableObjectMode),writable:h,readable:m}),h){if(fu(d))c._write=function(p,b,x){d.write(p,b)?x():n=x},c._final=function(p){d.end(),i=p},d.on("drain",function(){if(n){let p=n;n=null,p()}});else if(Qf(d)){let b=($i(d)?d.writable:d).getWriter();c._write=async function(x,v,S){try{await b.ready,b.write(x).catch(()=>{}),S()}catch(w){S(w)}},c._final=async function(x){try{await b.ready,b.close().catch(()=>{}),i=x}catch(v){x(v)}}}let y=$i(a)?a.readable:a;F3(y,()=>{if(i){let p=i;i=null,p()}})}if(m){if(fu(a))a.on("readable",function(){if(o){let y=o;o=null,y()}}),a.on("end",function(){c.push(null)}),c._read=function(){for(;;){let y=a.read();if(y===null){o=c._read;return}if(!c.push(y))return}};else if(Qf(a)){let p=($i(a)?a.readable:a).getReader();c._read=async function(){for(;;)try{let{value:b,done:x}=await p.read();if(!c.push(b))return;if(x){c.push(null);return}}catch{return}}}}return c._destroy=function(y,p){!y&&s!==null&&(y=new N3),o=null,n=null,i=null,s===null?p(y):(s=p,fu(a)&&M3(a,y))},c}});var Jg=F((qC,nh)=>{"use strict";var VC=l(f()),Hg=globalThis.AbortController||Na().AbortController,{codes:{ERR_INVALID_ARG_VALUE:q3,ERR_INVALID_ARG_TYPE:dc,ERR_MISSING_ARGS:V3,ERR_OUT_OF_RANGE:j3},AbortError:Nr}=Et(),{validateAbortSignal:Fi,validateInteger:H3,validateObject:qi}=tc(),z3=Ye().Symbol("kWeak"),{finished:W3}=fn(),G3=eh(),{addAbortSignalNoValidate:J3}=rc(),{isWritable:Y3,isNodeStream:X3}=Pr(),{ArrayPrototypePush:Z3,MathFloor:Q3,Number:e6,NumberIsNaN:t6,Promise:qg,PromiseReject:Vg,PromisePrototypeThen:r6,Symbol:zg}=Ye(),hu=zg("kEmpty"),jg=zg("kEof");function n6(t,e){if(e!=null&&qi(e,"options"),e?.signal!=null&&Fi(e.signal,"options.signal"),X3(t)&&!Y3(t))throw new q3("stream",t,"must be writable");let r=G3(this,t);return e!=null&&e.signal&&J3(e.signal,r),r}function pu(t,e){if(typeof t!="function")throw new dc("fn",["Function","AsyncFunction"],t);e!=null&&qi(e,"options"),e?.signal!=null&&Fi(e.signal,"options.signal");let r=1;return e?.concurrency!=null&&(r=Q3(e.concurrency)),H3(r,"concurrency",1),(async function*(){var i,o;let s=new Hg,c=this,u=[],d=s.signal,a={signal:d},h=()=>s.abort();e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted&&h(),e==null||(o=e.signal)===null||o===void 0||o.addEventListener("abort",h);let m,y,p=!1;function b(){p=!0}async function x(){try{for await(let w of c){var v;if(p)return;if(d.aborted)throw new Nr;try{w=t(w,a)}catch(B){w=Vg(B)}w!==hu&&(typeof((v=w)===null||v===void 0?void 0:v.catch)=="function"&&w.catch(b),u.push(w),m&&(m(),m=null),!p&&u.length&&u.length>=r&&await new qg(B=>{y=B}))}u.push(jg)}catch(w){let B=Vg(w);r6(B,void 0,b),u.push(B)}finally{var S;p=!0,m&&(m(),m=null),e==null||(S=e.signal)===null||S===void 0||S.removeEventListener("abort",h)}}x();try{for(;;){for(;u.length>0;){let v=await u[0];if(v===jg)return;if(d.aborted)throw new Nr;v!==hu&&(yield v),u.shift(),y&&(y(),y=null)}await new qg(v=>{m=v})}}finally{s.abort(),p=!0,y&&(y(),y=null)}}).call(this)}function i6(t=void 0){return t!=null&&qi(t,"options"),t?.signal!=null&&Fi(t.signal,"options.signal"),(async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Nr({cause:t.signal.reason});yield[r++,i]}}).call(this)}async function Wg(t,e=void 0){for await(let r of rh.call(this,t,e))return!0;return!1}async function o6(t,e=void 0){if(typeof t!="function")throw new dc("fn",["Function","AsyncFunction"],t);return!await Wg.call(this,async(...r)=>!await t(...r),e)}async function s6(t,e){for await(let r of rh.call(this,t,e))return r}async function c6(t,e){if(typeof t!="function")throw new dc("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),hu}for await(let n of pu.call(this,r,e));}function rh(t,e){if(typeof t!="function")throw new dc("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:hu}return pu.call(this,r,e)}var th=class extends V3{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function a6(t,e,r){var n;if(typeof t!="function")throw new dc("reducer",["Function","AsyncFunction"],t);r!=null&&qi(r,"options"),r?.signal!=null&&Fi(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let d=new Nr(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await W3(this.destroy(d)),d}let o=new Hg,s=o.signal;if(r!=null&&r.signal){let d={once:!0,[z3]:this};r.signal.addEventListener("abort",()=>o.abort(),d)}let c=!1;try{for await(let d of this){var u;if(c=!0,r!=null&&(u=r.signal)!==null&&u!==void 0&&u.aborted)throw new Nr;i?e=await t(e,d,{signal:s}):(e=d,i=!0)}if(!c&&!i)throw new th}finally{o.abort()}return e}async function u6(t){t!=null&&qi(t,"options"),t?.signal!=null&&Fi(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Nr(void 0,{cause:t.signal.reason});Z3(e,n)}return e}function d6(t,e){let r=pu.call(this,t,e);return(async function*(){for await(let i of r)yield*i}).call(this)}function Gg(t){if(t=e6(t),t6(t))return 0;if(t<0)throw new j3("number",">= 0",t);return t}function l6(t,e=void 0){return e!=null&&qi(e,"options"),e?.signal!=null&&Fi(e.signal,"options.signal"),t=Gg(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Nr;for await(let o of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Nr;t--<=0&&(yield o)}}).call(this)}function f6(t,e=void 0){return e!=null&&qi(e,"options"),e?.signal!=null&&Fi(e.signal,"options.signal"),t=Gg(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Nr;for await(let o of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Nr;if(t-- >0)yield o;else return}}).call(this)}nh.exports.streamReturningOperators={asIndexedPairs:i6,drop:l6,filter:rh,flatMap:d6,map:pu,take:f6,compose:n6};nh.exports.promiseReturningOperators={every:o6,forEach:c6,reduce:a6,toArray:u6,some:Wg,find:s6}});var ih=F((jC,Yg)=>{"use strict";var HC=l(f()),{ArrayPrototypePop:h6,Promise:p6}=Ye(),{isIterable:y6,isNodeStream:m6,isWebStream:b6}=Pr(),{pipelineImpl:g6}=du(),{finished:w6}=fn();oh();function x6(...t){return new p6((e,r)=>{let n,i,o=t[t.length-1];if(o&&typeof o=="object"&&!m6(o)&&!y6(o)&&!b6(o)){let s=h6(t);n=s.signal,i=s.end}g6(t,(s,c)=>{s?r(s):e(c)},{signal:n,end:i})})}Yg.exports={finished:w6,pipeline:x6}});var oh=F((zC,ow)=>{var WC=l(f()),{Buffer:E6}=Tt(),{ObjectDefineProperty:yn,ObjectKeys:Qg,ReflectApply:ew}=Ye(),{promisify:{custom:tw}}=Rr(),{streamReturningOperators:Xg,promiseReturningOperators:Zg}=Jg(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:rw}}=Et(),v6=eh(),{pipeline:nw}=du(),{destroyer:D6}=Ui(),iw=fn(),sh=ih(),ch=Pr(),je=ow.exports=Ja().Stream;je.isDisturbed=ch.isDisturbed;je.isErrored=ch.isErrored;je.isReadable=ch.isReadable;je.Readable=ic();for(let t of Qg(Xg)){let r=function(...n){if(new.target)throw rw();return je.Readable.from(ew(e,this,n))};ah=r;let e=Xg[t];yn(r,"name",{__proto__:null,value:e.name}),yn(r,"length",{__proto__:null,value:e.length}),yn(je.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var ah;for(let t of Qg(Zg)){let r=function(...i){if(new.target)throw rw();return ew(e,this,i)};ah=r;let e=Zg[t];yn(r,"name",{__proto__:null,value:e.name}),yn(r,"length",{__proto__:null,value:e.length}),yn(je.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var ah;je.Writable=Pf();je.Duplex=Mr();je.Transform=qf();je.PassThrough=jf();je.pipeline=nw;var{addAbortSignal:S6}=rc();je.addAbortSignal=S6;je.finished=iw;je.destroy=D6;je.compose=v6;yn(je,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return sh}});yn(nw,tw,{__proto__:null,enumerable:!0,get(){return sh.pipeline}});yn(iw,tw,{__proto__:null,enumerable:!0,get(){return sh.finished}});je.Stream=je;je._isUint8Array=function(e){return e instanceof Uint8Array};je._uint8ArrayToBuffer=function(e){return E6.from(e.buffer,e.byteOffset,e.byteLength)}});var uh=F((GC,He)=>{"use strict";var JC=l(f()),et=oh(),A6=ih(),T6=et.Readable.destroy;He.exports=et.Readable;He.exports._uint8ArrayToBuffer=et._uint8ArrayToBuffer;He.exports._isUint8Array=et._isUint8Array;He.exports.isDisturbed=et.isDisturbed;He.exports.isErrored=et.isErrored;He.exports.isReadable=et.isReadable;He.exports.Readable=et.Readable;He.exports.Writable=et.Writable;He.exports.Duplex=et.Duplex;He.exports.Transform=et.Transform;He.exports.PassThrough=et.PassThrough;He.exports.addAbortSignal=et.addAbortSignal;He.exports.finished=et.finished;He.exports.destroy=et.destroy;He.exports.destroy=T6;He.exports.pipeline=et.pipeline;He.exports.compose=et.compose;Object.defineProperty(et,"promises",{configurable:!0,enumerable:!0,get(){return A6}});He.exports.Stream=et.Stream;He.exports.default=He.exports});var kx=F((id,Bx)=>{var DN=l(f());(function(t,e){typeof id=="object"&&typeof Bx<"u"?e(id):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(id,function(t){"use strict";function e(){for(var E=arguments.length,g=Array(E),D=0;D<E;D++)g[D]=arguments[D];if(g.length>1){g[0]=g[0].slice(0,-1);for(var _=g.length-1,I=1;I<_;++I)g[I]=g[I].slice(1,-1);return g[_]=g[_].slice(1),g.join("")}else return g[0]}function r(E){return"(?:"+E+")"}function n(E){return E===void 0?"undefined":E===null?"null":Object.prototype.toString.call(E).split(" ").pop().split("]").shift().toLowerCase()}function i(E){return E.toUpperCase()}function o(E){return E!=null?E instanceof Array?E:typeof E.length!="number"||E.split||E.setInterval||E.call?[E]:Array.prototype.slice.call(E):[]}function s(E,g){var D=E;if(g)for(var _ in g)D[_]=g[_];return D}function c(E){var g="[A-Za-z]",D="[\\x0D]",_="[0-9]",I="[\\x22]",z=e(_,"[A-Fa-f]"),ae="[\\x0A]",ge="[\\x20]",De=r(r("%[EFef]"+z+"%"+z+z+"%"+z+z)+"|"+r("%[89A-Fa-f]"+z+"%"+z+z)+"|"+r("%"+z+z)),We="[\\:\\/\\?\\#\\[\\]\\@]",me="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Ke=e(We,me),Ge=E?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Ce=E?"[\\uE000-\\uF8FF]":"[]",we=e(g,_,"[\\-\\.\\_\\~]",Ge),Me=r(g+e(g,_,"[\\+\\-\\.]")+"*"),Ae=r(r(De+"|"+e(we,me,"[\\:]"))+"*"),ci=r(r("25[0-5]")+"|"+r("2[0-4]"+_)+"|"+r("1"+_+_)+"|"+r("[1-9]"+_)+"|"+_),Lt=r(r("25[0-5]")+"|"+r("2[0-4]"+_)+"|"+r("1"+_+_)+"|"+r("0?[1-9]"+_)+"|0?0?"+_),Jt=r(Lt+"\\."+Lt+"\\."+Lt+"\\."+Lt),_e=r(z+"{1,4}"),Kt=r(r(_e+"\\:"+_e)+"|"+Jt),Yt=r(r(_e+"\\:")+"{6}"+Kt),Sr=r("\\:\\:"+r(_e+"\\:")+"{5}"+Kt),ai=r(r(_e)+"?\\:\\:"+r(_e+"\\:")+"{4}"+Kt),Yr=r(r(r(_e+"\\:")+"{0,1}"+_e)+"?\\:\\:"+r(_e+"\\:")+"{3}"+Kt),Ss=r(r(r(_e+"\\:")+"{0,2}"+_e)+"?\\:\\:"+r(_e+"\\:")+"{2}"+Kt),ea=r(r(r(_e+"\\:")+"{0,3}"+_e)+"?\\:\\:"+_e+"\\:"+Kt),ta=r(r(r(_e+"\\:")+"{0,4}"+_e)+"?\\:\\:"+Kt),oo=r(r(r(_e+"\\:")+"{0,5}"+_e)+"?\\:\\:"+_e),so=r(r(r(_e+"\\:")+"{0,6}"+_e)+"?\\:\\:"),Xr=r([Yt,Sr,ai,Yr,Ss,ea,ta,oo,so].join("|")),co=r(r(we+"|"+De)+"+"),Od=r(Xr+"\\%25"+co),ui=r(Xr+r("\\%25|\\%(?!"+z+"{2})")+co),tE=r("[vV]"+z+"+\\."+e(we,me,"[\\:]")+"+"),rE=r("\\["+r(ui+"|"+Xr+"|"+tE)+"\\]"),Ey=r(r(De+"|"+e(we,me))+"*"),As=r(rE+"|"+Jt+"(?!"+Ey+")|"+Ey),Ts=r(_+"*"),vy=r(r(Ae+"@")+"?"+As+r("\\:"+Ts)+"?"),_s=r(De+"|"+e(we,me,"[\\:\\@]")),nE=r(_s+"*"),Dy=r(_s+"+"),iE=r(r(De+"|"+e(we,me,"[\\@]"))+"+"),Zr=r(r("\\/"+nE)+"*"),ao=r("\\/"+r(Dy+Zr)+"?"),Ud=r(iE+Zr),ra=r(Dy+Zr),uo="(?!"+_s+")",XB=r(Zr+"|"+ao+"|"+Ud+"|"+ra+"|"+uo),lo=r(r(_s+"|"+e("[\\/\\?]",Ce))+"*"),Is=r(r(_s+"|[\\/\\?]")+"*"),Sy=r(r("\\/\\/"+vy+Zr)+"|"+ao+"|"+ra+"|"+uo),oE=r(Me+"\\:"+Sy+r("\\?"+lo)+"?"+r("\\#"+Is)+"?"),sE=r(r("\\/\\/"+vy+Zr)+"|"+ao+"|"+Ud+"|"+uo),cE=r(sE+r("\\?"+lo)+"?"+r("\\#"+Is)+"?"),ZB=r(oE+"|"+cE),QB=r(Me+"\\:"+Sy+r("\\?"+lo)+"?"),ek="^("+Me+")\\:"+r(r("\\/\\/("+r("("+Ae+")@")+"?("+As+")"+r("\\:("+Ts+")")+"?)")+"?("+Zr+"|"+ao+"|"+ra+"|"+uo+")")+r("\\?("+lo+")")+"?"+r("\\#("+Is+")")+"?$",tk="^(){0}"+r(r("\\/\\/("+r("("+Ae+")@")+"?("+As+")"+r("\\:("+Ts+")")+"?)")+"?("+Zr+"|"+ao+"|"+Ud+"|"+uo+")")+r("\\?("+lo+")")+"?"+r("\\#("+Is+")")+"?$",rk="^("+Me+")\\:"+r(r("\\/\\/("+r("("+Ae+")@")+"?("+As+")"+r("\\:("+Ts+")")+"?)")+"?("+Zr+"|"+ao+"|"+ra+"|"+uo+")")+r("\\?("+lo+")")+"?$",nk="^"+r("\\#("+Is+")")+"?$",ik="^"+r("("+Ae+")@")+"?("+As+")"+r("\\:("+Ts+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",g,_,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",we,me),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",we,me),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",we,me),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",we,me),"g"),NOT_QUERY:new RegExp(e("[^\\%]",we,me,"[\\:\\@\\/\\?]",Ce),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",we,me,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",we,me),"g"),UNRESERVED:new RegExp(we,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",we,Ke),"g"),PCT_ENCODED:new RegExp(De,"g"),IPV4ADDRESS:new RegExp("^("+Jt+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Xr+")"+r(r("\\%25|\\%(?!"+z+"{2})")+"("+co+")")+"?\\]?$")}}var u=c(!1),d=c(!0),a=function(){function E(g,D){var _=[],I=!0,z=!1,ae=void 0;try{for(var ge=g[Symbol.iterator](),De;!(I=(De=ge.next()).done)&&(_.push(De.value),!(D&&_.length===D));I=!0);}catch(We){z=!0,ae=We}finally{try{!I&&ge.return&&ge.return()}finally{if(z)throw ae}}return _}return function(g,D){if(Array.isArray(g))return g;if(Symbol.iterator in Object(g))return E(g,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(E){if(Array.isArray(E)){for(var g=0,D=Array(E.length);g<E.length;g++)D[g]=E[g];return D}else return Array.from(E)},m=2147483647,y=36,p=1,b=26,x=38,v=700,S=72,w=128,B="-",T=/^xn--/,k=/[^\0-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=y-p,$=Math.floor,q=String.fromCharCode;function j(E){throw new RangeError(C[E])}function X(E,g){for(var D=[],_=E.length;_--;)D[_]=g(E[_]);return D}function ce(E,g){var D=E.split("@"),_="";D.length>1&&(_=D[0]+"@",E=D[1]),E=E.replace(O,".");var I=E.split("."),z=X(I,g).join(".");return _+z}function U(E){for(var g=[],D=0,_=E.length;D<_;){var I=E.charCodeAt(D++);if(I>=55296&&I<=56319&&D<_){var z=E.charCodeAt(D++);(z&64512)==56320?g.push(((I&1023)<<10)+(z&1023)+65536):(g.push(I),D--)}else g.push(I)}return g}var K=function(g){return String.fromCodePoint.apply(String,h(g))},H=function(g){return g-48<10?g-22:g-65<26?g-65:g-97<26?g-97:y},P=function(g,D){return g+22+75*(g<26)-((D!=0)<<5)},A=function(g,D,_){var I=0;for(g=_?$(g/v):g>>1,g+=$(g/D);g>M*b>>1;I+=y)g=$(g/M);return $(I+(M+1)*g/(g+x))},L=function(g){var D=[],_=g.length,I=0,z=w,ae=S,ge=g.lastIndexOf(B);ge<0&&(ge=0);for(var De=0;De<ge;++De)g.charCodeAt(De)>=128&&j("not-basic"),D.push(g.charCodeAt(De));for(var We=ge>0?ge+1:0;We<_;){for(var me=I,Ke=1,Ge=y;;Ge+=y){We>=_&&j("invalid-input");var Ce=H(g.charCodeAt(We++));(Ce>=y||Ce>$((m-I)/Ke))&&j("overflow"),I+=Ce*Ke;var we=Ge<=ae?p:Ge>=ae+b?b:Ge-ae;if(Ce<we)break;var Me=y-we;Ke>$(m/Me)&&j("overflow"),Ke*=Me}var Ae=D.length+1;ae=A(I-me,Ae,me==0),$(I/Ae)>m-z&&j("overflow"),z+=$(I/Ae),I%=Ae,D.splice(I++,0,z)}return String.fromCodePoint.apply(String,D)},N=function(g){var D=[];g=U(g);var _=g.length,I=w,z=0,ae=S,ge=!0,De=!1,We=void 0;try{for(var me=g[Symbol.iterator](),Ke;!(ge=(Ke=me.next()).done);ge=!0){var Ge=Ke.value;Ge<128&&D.push(q(Ge))}}catch(ui){De=!0,We=ui}finally{try{!ge&&me.return&&me.return()}finally{if(De)throw We}}var Ce=D.length,we=Ce;for(Ce&&D.push(B);we<_;){var Me=m,Ae=!0,ci=!1,Lt=void 0;try{for(var Jt=g[Symbol.iterator](),_e;!(Ae=(_e=Jt.next()).done);Ae=!0){var Kt=_e.value;Kt>=I&&Kt<Me&&(Me=Kt)}}catch(ui){ci=!0,Lt=ui}finally{try{!Ae&&Jt.return&&Jt.return()}finally{if(ci)throw Lt}}var Yt=we+1;Me-I>$((m-z)/Yt)&&j("overflow"),z+=(Me-I)*Yt,I=Me;var Sr=!0,ai=!1,Yr=void 0;try{for(var Ss=g[Symbol.iterator](),ea;!(Sr=(ea=Ss.next()).done);Sr=!0){var ta=ea.value;if(ta<I&&++z>m&&j("overflow"),ta==I){for(var oo=z,so=y;;so+=y){var Xr=so<=ae?p:so>=ae+b?b:so-ae;if(oo<Xr)break;var co=oo-Xr,Od=y-Xr;D.push(q(P(Xr+co%Od,0))),oo=$(co/Od)}D.push(q(P(oo,0))),ae=A(z,Yt,we==Ce),z=0,++we}}}catch(ui){ai=!0,Yr=ui}finally{try{!Sr&&Ss.return&&Ss.return()}finally{if(ai)throw Yr}}++z,++I}return D.join("")},V=function(g){return ce(g,function(D){return T.test(D)?L(D.slice(4).toLowerCase()):D})},te=function(g){return ce(g,function(D){return k.test(D)?"xn--"+N(D):D})},re={version:"2.1.0",ucs2:{decode:U,encode:K},decode:L,encode:N,toASCII:te,toUnicode:V},ne={};function Q(E){var g=E.charCodeAt(0),D=void 0;return g<16?D="%0"+g.toString(16).toUpperCase():g<128?D="%"+g.toString(16).toUpperCase():g<2048?D="%"+(g>>6|192).toString(16).toUpperCase()+"%"+(g&63|128).toString(16).toUpperCase():D="%"+(g>>12|224).toString(16).toUpperCase()+"%"+(g>>6&63|128).toString(16).toUpperCase()+"%"+(g&63|128).toString(16).toUpperCase(),D}function oe(E){for(var g="",D=0,_=E.length;D<_;){var I=parseInt(E.substr(D+1,2),16);if(I<128)g+=String.fromCharCode(I),D+=3;else if(I>=194&&I<224){if(_-D>=6){var z=parseInt(E.substr(D+4,2),16);g+=String.fromCharCode((I&31)<<6|z&63)}else g+=E.substr(D,6);D+=6}else if(I>=224){if(_-D>=9){var ae=parseInt(E.substr(D+4,2),16),ge=parseInt(E.substr(D+7,2),16);g+=String.fromCharCode((I&15)<<12|(ae&63)<<6|ge&63)}else g+=E.substr(D,9);D+=9}else g+=E.substr(D,3),D+=3}return g}function xe(E,g){function D(_){var I=oe(_);return I.match(g.UNRESERVED)?I:_}return E.scheme&&(E.scheme=String(E.scheme).replace(g.PCT_ENCODED,D).toLowerCase().replace(g.NOT_SCHEME,"")),E.userinfo!==void 0&&(E.userinfo=String(E.userinfo).replace(g.PCT_ENCODED,D).replace(g.NOT_USERINFO,Q).replace(g.PCT_ENCODED,i)),E.host!==void 0&&(E.host=String(E.host).replace(g.PCT_ENCODED,D).toLowerCase().replace(g.NOT_HOST,Q).replace(g.PCT_ENCODED,i)),E.path!==void 0&&(E.path=String(E.path).replace(g.PCT_ENCODED,D).replace(E.scheme?g.NOT_PATH:g.NOT_PATH_NOSCHEME,Q).replace(g.PCT_ENCODED,i)),E.query!==void 0&&(E.query=String(E.query).replace(g.PCT_ENCODED,D).replace(g.NOT_QUERY,Q).replace(g.PCT_ENCODED,i)),E.fragment!==void 0&&(E.fragment=String(E.fragment).replace(g.PCT_ENCODED,D).replace(g.NOT_FRAGMENT,Q).replace(g.PCT_ENCODED,i)),E}function be(E){return E.replace(/^0*(.*)/,"$1")||"0"}function Fe(E,g){var D=E.match(g.IPV4ADDRESS)||[],_=a(D,2),I=_[1];return I?I.split(".").map(be).join("."):E}function ze(E,g){var D=E.match(g.IPV6ADDRESS)||[],_=a(D,3),I=_[1],z=_[2];if(I){for(var ae=I.toLowerCase().split("::").reverse(),ge=a(ae,2),De=ge[0],We=ge[1],me=We?We.split(":").map(be):[],Ke=De.split(":").map(be),Ge=g.IPV4ADDRESS.test(Ke[Ke.length-1]),Ce=Ge?7:8,we=Ke.length-Ce,Me=Array(Ce),Ae=0;Ae<Ce;++Ae)Me[Ae]=me[Ae]||Ke[we+Ae]||"";Ge&&(Me[Ce-1]=Fe(Me[Ce-1],g));var ci=Me.reduce(function(Yt,Sr,ai){if(!Sr||Sr==="0"){var Yr=Yt[Yt.length-1];Yr&&Yr.index+Yr.length===ai?Yr.length++:Yt.push({index:ai,length:1})}return Yt},[]),Lt=ci.sort(function(Yt,Sr){return Sr.length-Yt.length})[0],Jt=void 0;if(Lt&&Lt.length>1){var _e=Me.slice(0,Lt.index),Kt=Me.slice(Lt.index+Lt.length);Jt=_e.join(":")+"::"+Kt.join(":")}else Jt=Me.join(":");return z&&(Jt+="%"+z),Jt}else return E}var qe=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,it="".match(/(){0}/)[1]===void 0;function Ze(E){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},D={},_=g.iri!==!1?d:u;g.reference==="suffix"&&(E=(g.scheme?g.scheme+":":"")+"//"+E);var I=E.match(qe);if(I){it?(D.scheme=I[1],D.userinfo=I[3],D.host=I[4],D.port=parseInt(I[5],10),D.path=I[6]||"",D.query=I[7],D.fragment=I[8],isNaN(D.port)&&(D.port=I[5])):(D.scheme=I[1]||void 0,D.userinfo=E.indexOf("@")!==-1?I[3]:void 0,D.host=E.indexOf("//")!==-1?I[4]:void 0,D.port=parseInt(I[5],10),D.path=I[6]||"",D.query=E.indexOf("?")!==-1?I[7]:void 0,D.fragment=E.indexOf("#")!==-1?I[8]:void 0,isNaN(D.port)&&(D.port=E.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?I[4]:void 0)),D.host&&(D.host=ze(Fe(D.host,_),_)),D.scheme===void 0&&D.userinfo===void 0&&D.host===void 0&&D.port===void 0&&!D.path&&D.query===void 0?D.reference="same-document":D.scheme===void 0?D.reference="relative":D.fragment===void 0?D.reference="absolute":D.reference="uri",g.reference&&g.reference!=="suffix"&&g.reference!==D.reference&&(D.error=D.error||"URI is not a "+g.reference+" reference.");var z=ne[(g.scheme||D.scheme||"").toLowerCase()];if(!g.unicodeSupport&&(!z||!z.unicodeSupport)){if(D.host&&(g.domainHost||z&&z.domainHost))try{D.host=re.toASCII(D.host.replace(_.PCT_ENCODED,oe).toLowerCase())}catch(ae){D.error=D.error||"Host's domain name can not be converted to ASCII via punycode: "+ae}xe(D,u)}else xe(D,_);z&&z.parse&&z.parse(D,g)}else D.error=D.error||"URI can not be parsed.";return D}function Jr(E,g){var D=g.iri!==!1?d:u,_=[];return E.userinfo!==void 0&&(_.push(E.userinfo),_.push("@")),E.host!==void 0&&_.push(ze(Fe(String(E.host),D),D).replace(D.IPV6ADDRESS,function(I,z,ae){return"["+z+(ae?"%25"+ae:"")+"]"})),(typeof E.port=="number"||typeof E.port=="string")&&(_.push(":"),_.push(String(E.port))),_.length?_.join(""):void 0}var kn=/^\.\.?\//,xs=/^\/\.(\/|$)/,Gc=/^\/\.\.(\/|$)/,kd=/^\/?(?:.|\n)*?(?=\/|$)/;function Rn(E){for(var g=[];E.length;)if(E.match(kn))E=E.replace(kn,"");else if(E.match(xs))E=E.replace(xs,"/");else if(E.match(Gc))E=E.replace(Gc,"/"),g.pop();else if(E==="."||E==="..")E="";else{var D=E.match(kd);if(D){var _=D[0];E=E.slice(_.length),g.push(_)}else throw new Error("Unexpected dot segment condition")}return g.join("")}function Wt(E){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},D=g.iri?d:u,_=[],I=ne[(g.scheme||E.scheme||"").toLowerCase()];if(I&&I.serialize&&I.serialize(E,g),E.host&&!D.IPV6ADDRESS.test(E.host)){if(g.domainHost||I&&I.domainHost)try{E.host=g.iri?re.toUnicode(E.host):re.toASCII(E.host.replace(D.PCT_ENCODED,oe).toLowerCase())}catch(ge){E.error=E.error||"Host's domain name can not be converted to "+(g.iri?"Unicode":"ASCII")+" via punycode: "+ge}}xe(E,D),g.reference!=="suffix"&&E.scheme&&(_.push(E.scheme),_.push(":"));var z=Jr(E,g);if(z!==void 0&&(g.reference!=="suffix"&&_.push("//"),_.push(z),E.path&&E.path.charAt(0)!=="/"&&_.push("/")),E.path!==void 0){var ae=E.path;!g.absolutePath&&(!I||!I.absolutePath)&&(ae=Rn(ae)),z===void 0&&(ae=ae.replace(/^\/\//,"/%2F")),_.push(ae)}return E.query!==void 0&&(_.push("?"),_.push(E.query)),E.fragment!==void 0&&(_.push("#"),_.push(E.fragment)),_.join("")}function Es(E,g){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_=arguments[3],I={};return _||(E=Ze(Wt(E,D),D),g=Ze(Wt(g,D),D)),D=D||{},!D.tolerant&&g.scheme?(I.scheme=g.scheme,I.userinfo=g.userinfo,I.host=g.host,I.port=g.port,I.path=Rn(g.path||""),I.query=g.query):(g.userinfo!==void 0||g.host!==void 0||g.port!==void 0?(I.userinfo=g.userinfo,I.host=g.host,I.port=g.port,I.path=Rn(g.path||""),I.query=g.query):(g.path?(g.path.charAt(0)==="/"?I.path=Rn(g.path):((E.userinfo!==void 0||E.host!==void 0||E.port!==void 0)&&!E.path?I.path="/"+g.path:E.path?I.path=E.path.slice(0,E.path.lastIndexOf("/")+1)+g.path:I.path=g.path,I.path=Rn(I.path)),I.query=g.query):(I.path=E.path,g.query!==void 0?I.query=g.query:I.query=E.query),I.userinfo=E.userinfo,I.host=E.host,I.port=E.port),I.scheme=E.scheme),I.fragment=g.fragment,I}function Jc(E,g,D){var _=s({scheme:"null"},D);return Wt(Es(Ze(E,_),Ze(g,_),_,!0),_)}function vs(E,g){return typeof E=="string"?E=Wt(Ze(E,g),g):n(E)==="object"&&(E=Ze(Wt(E,g),g)),E}function Yc(E,g,D){return typeof E=="string"?E=Wt(Ze(E,D),D):n(E)==="object"&&(E=Wt(E,D)),typeof g=="string"?g=Wt(Ze(g,D),D):n(g)==="object"&&(g=Wt(g,D)),E===g}function Xc(E,g){return E&&E.toString().replace(!g||!g.iri?u.ESCAPE:d.ESCAPE,Q)}function Gt(E,g){return E&&E.toString().replace(!g||!g.iri?u.PCT_ENCODED:d.PCT_ENCODED,oe)}var Cn={scheme:"http",domainHost:!0,parse:function(g,D){return g.host||(g.error=g.error||"HTTP URIs must have a host."),g},serialize:function(g,D){var _=String(g.scheme).toLowerCase()==="https";return(g.port===(_?443:80)||g.port==="")&&(g.port=void 0),g.path||(g.path="/"),g}},Ds={scheme:"https",domainHost:Cn.domainHost,parse:Cn.parse,serialize:Cn.serialize};function Zc(E){return typeof E.secure=="boolean"?E.secure:String(E.scheme).toLowerCase()==="wss"}var si={scheme:"ws",domainHost:!0,parse:function(g,D){var _=g;return _.secure=Zc(_),_.resourceName=(_.path||"/")+(_.query?"?"+_.query:""),_.path=void 0,_.query=void 0,_},serialize:function(g,D){if((g.port===(Zc(g)?443:80)||g.port==="")&&(g.port=void 0),typeof g.secure=="boolean"&&(g.scheme=g.secure?"wss":"ws",g.secure=void 0),g.resourceName){var _=g.resourceName.split("?"),I=a(_,2),z=I[0],ae=I[1];g.path=z&&z!=="/"?z:void 0,g.query=ae,g.resourceName=void 0}return g.fragment=void 0,g}},Qc={scheme:"wss",domainHost:si.domainHost,parse:si.parse,serialize:si.serialize},Rd={},j2=!0,my="[A-Za-z0-9\\-\\.\\_\\~"+(j2?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",Dr="[0-9A-Fa-f]",H2=r(r("%[EFef]"+Dr+"%"+Dr+Dr+"%"+Dr+Dr)+"|"+r("%[89A-Fa-f]"+Dr+"%"+Dr+Dr)+"|"+r("%"+Dr+Dr)),z2="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",W2="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",G2=e(W2,'[\\"\\\\]'),J2="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Y2=new RegExp(my,"g"),io=new RegExp(H2,"g"),X2=new RegExp(e("[^]",z2,"[\\.]",'[\\"]',G2),"g"),by=new RegExp(e("[^]",my,J2),"g"),Z2=by;function Cd(E){var g=oe(E);return g.match(Y2)?g:E}var gy={scheme:"mailto",parse:function(g,D){var _=g,I=_.to=_.path?_.path.split(","):[];if(_.path=void 0,_.query){for(var z=!1,ae={},ge=_.query.split("&"),De=0,We=ge.length;De<We;++De){var me=ge[De].split("=");switch(me[0]){case"to":for(var Ke=me[1].split(","),Ge=0,Ce=Ke.length;Ge<Ce;++Ge)I.push(Ke[Ge]);break;case"subject":_.subject=Gt(me[1],D);break;case"body":_.body=Gt(me[1],D);break;default:z=!0,ae[Gt(me[0],D)]=Gt(me[1],D);break}}z&&(_.headers=ae)}_.query=void 0;for(var we=0,Me=I.length;we<Me;++we){var Ae=I[we].split("@");if(Ae[0]=Gt(Ae[0]),D.unicodeSupport)Ae[1]=Gt(Ae[1],D).toLowerCase();else try{Ae[1]=re.toASCII(Gt(Ae[1],D).toLowerCase())}catch(ci){_.error=_.error||"Email address's domain name can not be converted to ASCII via punycode: "+ci}I[we]=Ae.join("@")}return _},serialize:function(g,D){var _=g,I=o(g.to);if(I){for(var z=0,ae=I.length;z<ae;++z){var ge=String(I[z]),De=ge.lastIndexOf("@"),We=ge.slice(0,De).replace(io,Cd).replace(io,i).replace(X2,Q),me=ge.slice(De+1);try{me=D.iri?re.toUnicode(me):re.toASCII(Gt(me,D).toLowerCase())}catch(we){_.error=_.error||"Email address's domain name can not be converted to "+(D.iri?"Unicode":"ASCII")+" via punycode: "+we}I[z]=We+"@"+me}_.path=I.join(",")}var Ke=g.headers=g.headers||{};g.subject&&(Ke.subject=g.subject),g.body&&(Ke.body=g.body);var Ge=[];for(var Ce in Ke)Ke[Ce]!==Rd[Ce]&&Ge.push(Ce.replace(io,Cd).replace(io,i).replace(by,Q)+"="+Ke[Ce].replace(io,Cd).replace(io,i).replace(Z2,Q));return Ge.length&&(_.query=Ge.join("&")),_}},Q2=/^([^\:]+)\:(.*)/,wy={scheme:"urn",parse:function(g,D){var _=g.path&&g.path.match(Q2),I=g;if(_){var z=D.scheme||I.scheme||"urn",ae=_[1].toLowerCase(),ge=_[2],De=z+":"+(D.nid||ae),We=ne[De];I.nid=ae,I.nss=ge,I.path=void 0,We&&(I=We.parse(I,D))}else I.error=I.error||"URN can not be parsed.";return I},serialize:function(g,D){var _=D.scheme||g.scheme||"urn",I=g.nid,z=_+":"+(D.nid||I),ae=ne[z];ae&&(g=ae.serialize(g,D));var ge=g,De=g.nss;return ge.path=(I||D.nid)+":"+De,ge}},eE=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,xy={scheme:"urn:uuid",parse:function(g,D){var _=g;return _.uuid=_.nss,_.nss=void 0,!D.tolerant&&(!_.uuid||!_.uuid.match(eE))&&(_.error=_.error||"UUID is not valid."),_},serialize:function(g,D){var _=g;return _.nss=(g.uuid||"").toLowerCase(),_}};ne[Cn.scheme]=Cn,ne[Ds.scheme]=Ds,ne[si.scheme]=si,ne[Qc.scheme]=Qc,ne[gy.scheme]=gy,ne[wy.scheme]=wy,ne[xy.scheme]=xy,t.SCHEMES=ne,t.pctEncChar=Q,t.pctDecChars=oe,t.parse=Ze,t.removeDotSegments=Rn,t.serialize=Wt,t.resolveComponents=Es,t.resolve=Jc,t.normalize=vs,t.equal=Yc,t.escapeComponent=Xc,t.unescapeComponent=Gt,Object.defineProperty(t,"__esModule",{value:!0})})});var Cx=F((UN,Rx)=>{"use strict";var PN=l(f());Rx.exports=function t(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?t(e.toJSON()):Array.isArray(e)?`[${e.reduce((i,o,s)=>`${i}${s===0?"":","}${t(o===void 0||typeof o=="symbol"?null:o)}`,"")}]`:`{${Object.keys(e).sort().reduce((n,i)=>{if(e[i]===void 0||typeof e[i]=="symbol")return n;let o=n.length===0?"":",";return`${n}${o}${t(i)}:${t(e[i])}`},"")}}`}});var Px=F((NN,Ux)=>{"use strict";var $N=l(f());function o_(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),o=i.charCodeAt(0);if(e[o]!==255)throw new TypeError(i+" is ambiguous");e[o]=n}var s=t.length,c=t.charAt(0),u=Math.log(s)/Math.log(256),d=Math.log(256)/Math.log(s);function a(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var p=0,b=0,x=0,v=y.length;x!==v&&y[x]===0;)x++,p++;for(var S=(v-x)*d+1>>>0,w=new Uint8Array(S);x!==v;){for(var B=y[x],T=0,k=S-1;(B!==0||T<b)&&k!==-1;k--,T++)B+=256*w[k]>>>0,w[k]=B%s>>>0,B=B/s>>>0;if(B!==0)throw new Error("Non-zero carry");b=T,x++}for(var O=S-b;O!==S&&w[O]===0;)O++;for(var C=c.repeat(p);O<S;++O)C+=t.charAt(w[O]);return C}function h(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var p=0;if(y[p]!==" "){for(var b=0,x=0;y[p]===c;)b++,p++;for(var v=(y.length-p)*u+1>>>0,S=new Uint8Array(v);y[p];){var w=e[y.charCodeAt(p)];if(w===255)return;for(var B=0,T=v-1;(w!==0||B<x)&&T!==-1;T--,B++)w+=s*S[T]>>>0,S[T]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");x=B,p++}if(y[p]!==" "){for(var k=v-x;k!==v&&S[k]===0;)k++;for(var O=new Uint8Array(b+(v-k)),C=b;k!==v;)O[C++]=S[k++];return O}}}function m(y){var p=h(y);if(p)return p;throw new Error("Non-base"+s+" character")}return{encode:a,decodeUnsafe:h,decode:m}}Ux.exports=o_});var od=F((FN,Lx)=>{"use strict";var qN=l(f()),s_=new TextDecoder,c_=t=>s_.decode(t),a_=new TextEncoder,u_=t=>a_.encode(t);function d_(t,e){let r=new Uint8Array(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return r}Lx.exports={decodeText:c_,encodeText:u_,concat:d_}});var Mx=F((VN,Kx)=>{"use strict";var jN=l(f()),{encodeText:l_}=od(),lp=class{constructor(e,r,n,i){this.name=e,this.code=r,this.codeBuf=l_(this.code),this.alphabet=i,this.codec=n(i)}encode(e){return this.codec.encode(e)}decode(e){for(let r of e)if(this.alphabet&&this.alphabet.indexOf(r)<0)throw new Error(`invalid character '${r}' in '${e}'`);return this.codec.decode(e)}};Kx.exports=lp});var $x=F((HN,Nx)=>{"use strict";var zN=l(f()),f_=(t,e,r)=>{let n={};for(let d=0;d<e.length;++d)n[e[d]]=d;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),s=0,c=0,u=0;for(let d=0;d<i;++d){let a=n[t[d]];if(a===void 0)throw new SyntaxError("Invalid character "+t[d]);c=c<<r|a,s+=r,s>=8&&(s-=8,o[u++]=255&c>>s)}if(s>=r||255&c<<8-s)throw new SyntaxError("Unexpected end of data");return o},h_=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,c=0;for(let u=0;u<t.length;++u)for(c=c<<8|t[u],s+=8;s>r;)s-=r,o+=e[i&c>>s];if(s&&(o+=e[i&c<<r-s]),n)for(;o.length*r&7;)o+="=";return o},p_=t=>e=>({encode(r){return h_(r,e,t)},decode(r){return f_(r,e,t)}});Nx.exports={rfc4648:p_}});var jx=F((WN,Vx)=>{"use strict";var GN=l(f()),Kc=Px(),y_=Mx(),{rfc4648:yt}=$x(),{decodeText:m_,encodeText:b_}=od(),g_=()=>({encode:m_,decode:b_}),Fx=[["identity","\0",g_,""],["base2","0",yt(1),"01"],["base8","7",yt(3),"01234567"],["base10","9",Kc,"0123456789"],["base16","f",yt(4),"0123456789abcdef"],["base16upper","F",yt(4),"0123456789ABCDEF"],["base32hex","v",yt(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",yt(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",yt(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",yt(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",yt(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",yt(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",yt(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",yt(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",yt(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",Kc,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",Kc,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",Kc,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",Kc,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",yt(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",yt(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",yt(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",yt(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],qx=Fx.reduce((t,e)=>(t[e[0]]=new y_(e[0],e[1],e[2],e[3]),t),{}),w_=Fx.reduce((t,e)=>(t[e[1]]=qx[e[0]],t),{});Vx.exports={names:qx,codes:w_}});var Wx=F((_n,zx)=>{"use strict";var JN=l(f()),os=jx(),{encodeText:x_,decodeText:sd,concat:Hx}=od();function E_(t,e){if(!e)throw new Error("requires an encoded Uint8Array");let{name:r,codeBuf:n}=Ji(t);return A_(r,e),Hx([n,e],n.length+e.length)}function v_(t,e){let r=Ji(t),n=x_(r.encode(e));return Hx([r.codeBuf,n],r.codeBuf.length+n.length)}function D_(t){t instanceof Uint8Array&&(t=sd(t));let e=t[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(e)&&(t=t.toLowerCase()),Ji(t[0]).decode(t.substring(1))}function S_(t){if(t instanceof Uint8Array&&(t=sd(t)),Object.prototype.toString.call(t)!=="[object String]")return!1;try{return Ji(t[0]).name}catch{return!1}}function A_(t,e){Ji(t).decode(sd(e))}function Ji(t){if(Object.prototype.hasOwnProperty.call(os.names,t))return os.names[t];if(Object.prototype.hasOwnProperty.call(os.codes,t))return os.codes[t];throw new Error(`Unsupported encoding: ${t}`)}function T_(t){return t instanceof Uint8Array&&(t=sd(t)),Ji(t[0])}_n=zx.exports=E_;_n.encode=v_;_n.decode=D_;_n.isEncoded=S_;_n.encoding=Ji;_n.encodingFromData=T_;var __=Object.freeze(os.names),I_=Object.freeze(os.codes);_n.names=__;_n.codes=I_});var Xx=F((YN,Yx)=>{var XN=l(f());Yx.exports=Jx;var Gx=128,B_=127,k_=~B_,R_=Math.pow(2,31);function Jx(t,e,r){e=e||[],r=r||0;for(var n=r;t>=R_;)e[r++]=t&255|Gx,t/=128;for(;t&k_;)e[r++]=t&255|Gx,t>>>=7;return e[r]=t|0,Jx.bytes=r-n+1,e}});var e1=F((ZN,Qx)=>{var QN=l(f());Qx.exports=fp;var C_=128,Zx=127;function fp(t,n){var r=0,n=n||0,i=0,o=n,s,c=t.length;do{if(o>=c)throw fp.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&Zx)<<i:(s&Zx)*Math.pow(2,i),i+=7}while(s>=C_);return fp.bytes=o-n,r}});var r1=F((e9,t1)=>{var t9=l(f()),O_=Math.pow(2,7),U_=Math.pow(2,14),P_=Math.pow(2,21),L_=Math.pow(2,28),K_=Math.pow(2,35),M_=Math.pow(2,42),N_=Math.pow(2,49),$_=Math.pow(2,56),F_=Math.pow(2,63);t1.exports=function(t){return t<O_?1:t<U_?2:t<P_?3:t<L_?4:t<K_?5:t<M_?6:t<N_?7:t<$_?8:t<F_?9:10}});var i1=F((r9,n1)=>{var n9=l(f());n1.exports={encode:Xx(),decode:e1(),encodingLength:r1()}});var s1=F((i9,o1)=>{"use strict";var o9=l(f()),q_=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});o1.exports={names:q_}});function V_(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var c=t.length,u=t.charAt(0),d=Math.log(c)/Math.log(256),a=Math.log(256)/Math.log(c);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var b=0,x=0,v=0,S=p.length;v!==S&&p[v]===0;)v++,b++;for(var w=(S-v)*a+1>>>0,B=new Uint8Array(w);v!==S;){for(var T=p[v],k=0,O=w-1;(T!==0||k<x)&&O!==-1;O--,k++)T+=256*B[O]>>>0,B[O]=T%c>>>0,T=T/c>>>0;if(T!==0)throw new Error("Non-zero carry");x=k,v++}for(var C=w-x;C!==w&&B[C]===0;)C++;for(var M=u.repeat(b);C<w;++C)M+=t.charAt(B[C]);return M}function m(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var b=0;if(p[b]!==" "){for(var x=0,v=0;p[b]===u;)x++,b++;for(var S=(p.length-b)*d+1>>>0,w=new Uint8Array(S);p[b];){var B=r[p.charCodeAt(b)];if(B===255)return;for(var T=0,k=S-1;(B!==0||T<v)&&k!==-1;k--,T++)B+=c*w[k]>>>0,w[k]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");v=T,b++}if(p[b]!==" "){for(var O=S-v;O!==S&&w[O]===0;)O++;for(var C=new Uint8Array(x+(S-O)),M=x;O!==S;)C[M++]=w[O++];return C}}}function y(p){var b=m(p);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:m,decode:y}}var c9,j_,H_,c1,a1=Se(()=>{c9=l(f(),1);j_=V_,H_=j_,c1=H_});var u9,a9,u1,In,d1,l1,ti=Se(()=>{u9=l(f(),1),a9=new Uint8Array(0),u1=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},In=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},d1=t=>new TextEncoder().encode(t),l1=t=>new TextDecoder().decode(t)});var h9,hp,pp,yp,h1,mp,ss,ri,z_,W_,$e,Er=Se(()=>{h9=l(f(),1);a1();ti();hp=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},pp=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return h1(this,e)}},yp=class{constructor(e){this.decoders=e}or(e){return h1(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},h1=(t,e)=>new yp({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),mp=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new hp(e,r,n),this.decoder=new pp(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},ss=({name:t,prefix:e,encode:r,decode:n})=>new mp(t,e,r,n),ri=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=c1(r,e);return ss({prefix:t,name:e,encode:n,decode:o=>In(i(o))})},z_=(t,e,r,n)=>{let i={};for(let a=0;a<e.length;++a)i[e[a]]=a;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),c=0,u=0,d=0;for(let a=0;a<o;++a){let h=i[t[a]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|h,c+=r,c>=8&&(c-=8,s[d++]=255&u>>c)}if(c>=r||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return s},W_=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,c=0;for(let u=0;u<t.length;++u)for(c=c<<8|t[u],s+=8;s>r;)s-=r,o+=e[i&c>>s];if(s&&(o+=e[i&c<<r-s]),n)for(;o.length*r&7;)o+="=";return o},$e=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>ss({prefix:e,name:t,encode(i){return W_(i,n,r)},decode(i){return z_(i,n,r,t)}})});var bp={};Je(bp,{identity:()=>G_});var m9,G_,p1=Se(()=>{m9=l(f(),1);Er();ti();G_=ss({prefix:"\0",name:"identity",encode:t=>l1(t),decode:t=>d1(t)})});var gp={};Je(gp,{base2:()=>J_});var g9,J_,y1=Se(()=>{g9=l(f(),1);Er();J_=$e({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var wp={};Je(wp,{base8:()=>Y_});var x9,Y_,m1=Se(()=>{x9=l(f(),1);Er();Y_=$e({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var xp={};Je(xp,{base10:()=>X_});var v9,X_,b1=Se(()=>{v9=l(f(),1);Er();X_=ri({prefix:"9",name:"base10",alphabet:"0123456789"})});var Ep={};Je(Ep,{base16:()=>Z_,base16upper:()=>Q_});var S9,Z_,Q_,g1=Se(()=>{S9=l(f(),1);Er();Z_=$e({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Q_=$e({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var vp={};Je(vp,{base32:()=>cs,base32hex:()=>nI,base32hexpad:()=>oI,base32hexpadupper:()=>sI,base32hexupper:()=>iI,base32pad:()=>tI,base32padupper:()=>rI,base32upper:()=>eI,base32z:()=>cI});var T9,cs,eI,tI,rI,nI,iI,oI,sI,cI,Dp=Se(()=>{T9=l(f(),1);Er();cs=$e({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),eI=$e({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),tI=$e({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),rI=$e({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),nI=$e({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),iI=$e({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),oI=$e({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),sI=$e({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),cI=$e({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var Sp={};Je(Sp,{base36:()=>aI,base36upper:()=>uI});var I9,aI,uI,w1=Se(()=>{I9=l(f(),1);Er();aI=ri({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),uI=ri({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var Ap={};Je(Ap,{base58btc:()=>zr,base58flickr:()=>dI});var k9,zr,dI,Tp=Se(()=>{k9=l(f(),1);Er();zr=ri({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),dI=ri({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var _p={};Je(_p,{base64:()=>lI,base64pad:()=>fI,base64url:()=>hI,base64urlpad:()=>pI});var C9,lI,fI,hI,pI,x1=Se(()=>{C9=l(f(),1);Er();lI=$e({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),fI=$e({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),hI=$e({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),pI=$e({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var Ip={};Je(Ip,{base256emoji:()=>wI});function bI(t){return t.reduce((e,r)=>(e+=yI[r],e),"")}function gI(t){let e=[];for(let r of t){let n=mI[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var U9,E1,yI,mI,wI,v1=Se(()=>{U9=l(f(),1);Er();E1=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),yI=E1.reduce((t,e,r)=>(t[r]=e,t),[]),mI=E1.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);wI=ss({prefix:"\u{1F680}",name:"base256emoji",encode:bI,decode:gI})});function A1(t,e,r){e=e||[],r=r||0;for(var n=r;t>=DI;)e[r++]=t&255|D1,t/=128;for(;t&vI;)e[r++]=t&255|D1,t>>>=7;return e[r]=t|0,A1.bytes=r-n+1,e}function Bp(t,n){var r=0,n=n||0,i=0,o=n,s,c=t.length;do{if(o>=c)throw Bp.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&S1)<<i:(s&S1)*Math.pow(2,i),i+=7}while(s>=AI);return Bp.bytes=o-n,r}var L9,xI,D1,EI,vI,DI,SI,AI,S1,TI,_I,II,BI,kI,RI,CI,OI,UI,PI,LI,KI,Mc,T1=Se(()=>{L9=l(f(),1),xI=A1,D1=128,EI=127,vI=~EI,DI=Math.pow(2,31);SI=Bp,AI=128,S1=127;TI=Math.pow(2,7),_I=Math.pow(2,14),II=Math.pow(2,21),BI=Math.pow(2,28),kI=Math.pow(2,35),RI=Math.pow(2,42),CI=Math.pow(2,49),OI=Math.pow(2,56),UI=Math.pow(2,63),PI=function(t){return t<TI?1:t<_I?2:t<II?3:t<BI?4:t<kI?5:t<RI?6:t<CI?7:t<OI?8:t<UI?9:10},LI={encode:xI,decode:SI,encodingLength:PI},KI=LI,Mc=KI});var M9,Nc,as,us,ad=Se(()=>{M9=l(f(),1);T1();Nc=(t,e=0)=>[Mc.decode(t,e),Mc.decode.bytes],as=(t,e,r=0)=>(Mc.encode(t,e,r),e),us=t=>Mc.encodingLength(t)});var $9,Yi,_1,I1,ds,Fc=Se(()=>{$9=l(f(),1);ti();ad();Yi=(t,e)=>{let r=e.byteLength,n=us(t),i=n+us(r),o=new Uint8Array(i+r);return as(t,o,0),as(r,o,n),o.set(e,i),new ds(t,r,e,o)},_1=t=>{let e=In(t),[r,n]=Nc(e),[i,o]=Nc(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new ds(r,i,s,e)},I1=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&u1(t.bytes,e.bytes),ds=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}});var F9,Rp,kp,Cp=Se(()=>{F9=l(f(),1);Fc();Rp=({name:t,code:e,encode:r})=>new kp(t,e,r),kp=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?Yi(this.code,r):r.then(n=>Yi(this.code,n))}else throw Error("Unknown type, must be binary type")}}});var Op={};Je(Op,{sha256:()=>MI,sha512:()=>NI});var V9,k1,MI,NI,R1=Se(()=>{V9=l(f(),1);Cp();k1=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),MI=Rp({name:"sha2-256",code:18,encode:k1("SHA-256")}),NI=Rp({name:"sha2-512",code:19,encode:k1("SHA-512")})});var Up={};Je(Up,{identity:()=>qI});var H9,C1,$I,O1,FI,qI,U1=Se(()=>{H9=l(f(),1);ti();Fc();C1=0,$I="identity",O1=In,FI=t=>Yi(C1,O1(t)),qI={code:C1,name:$I,encode:O1,digest:FI}});var W9,P1=Se(()=>{W9=l(f(),1);ti()});var Y9,G9,J9,L1=Se(()=>{Y9=l(f(),1),G9=new TextEncoder,J9=new TextDecoder});var t7,ld,HI,zI,WI,qc,GI,K1,M1,ud,dd,JI,YI,XI,N1=Se(()=>{t7=l(f(),1);ad();Fc();Tp();Dp();ti();ld=class t{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:dd,byteLength:dd,code:ud,version:ud,multihash:ud,bytes:ud,_baseCache:dd,asCID:dd})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==qc)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==GI)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Yi(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&I1(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:i}=this;switch(n){case 0:return zI(r,i,e||zr.encoder);default:return WI(r,i,e||cs.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return YI(/^0\.0/,XI),!!(e&&(e[M1]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof t)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:i,bytes:o}=e;return new t(r,n,i,o||K1(r,n,i.bytes))}else if(e!=null&&e[M1]===!0){let{version:r,multihash:n,code:i}=e,o=_1(n);return t.create(r,i,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==qc)throw new Error(`Version 0 CID must use dag-pb (code: ${qc}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let i=K1(e,r,n.bytes);return new t(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,qc,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,i=In(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new ds(r.multihashCode,r.digestSize,o,i);return[r.version===0?t.createV0(s):t.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[h,m]=Nc(e.subarray(r));return r+=m,h},i=n(),o=qc;if(i===18?(i=0,r=0):i===1&&(o=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,c=n(),u=n(),d=r+u,a=d-s;return{version:i,codec:o,multihashCode:c,digestSize:u,multihashSize:a,size:d}}static parse(e,r){let[n,i]=HI(e,r),o=t.decode(i);return o._baseCache.set(n,e),o}},HI=(t,e)=>{switch(t[0]){case"Q":{let r=e||zr;return[zr.prefix,r.decode(`${zr.prefix}${t}`)]}case zr.prefix:{let r=e||zr;return[zr.prefix,r.decode(t)]}case cs.prefix:{let r=e||cs;return[cs.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},zI=(t,e,r)=>{let{prefix:n}=r;if(n!==zr.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i},WI=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i},qc=112,GI=18,K1=(t,e,r)=>{let n=us(t),i=n+us(e),o=new Uint8Array(i+r.byteLength);return as(t,o,0),as(e,o,n),o.set(r,i),o},M1=Symbol.for("@ipld/js-cid/CID"),ud={writable:!1,configurable:!1,enumerable:!0},dd={writable:!1,enumerable:!1,configurable:!1},JI="0.0.0-dev",YI=(t,e)=>{if(t.test(JI))console.warn(e);else throw new Error(e)},XI=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var i7,$1=Se(()=>{i7=l(f(),1);N1();ad();ti();Cp();Fc()});var a7,Pp,s7,F1=Se(()=>{a7=l(f(),1);p1();y1();m1();b1();g1();Dp();w1();Tp();x1();v1();R1();U1();P1();L1();$1();Pp={...bp,...gp,...wp,...xp,...Ep,...vp,...Sp,...Ap,..._p,...Ip},s7={...Op,...Up}});function ls(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}var d7,fd=Se(()=>{d7=l(f(),1)});function hd(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ls(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}var h7,Lp=Se(()=>{h7=l(f(),1);fd()});function V1(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var b7,q1,Kp,ZI,pd,Mp=Se(()=>{b7=l(f(),1);F1();Lp();q1=V1("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Kp=V1("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=hd(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),ZI={utf8:q1,"utf-8":q1,hex:Pp.base16,latin1:Kp,ascii:Kp,binary:Kp,...Pp},pd=ZI});var j1={};Je(j1,{toString:()=>QI});function QI(t,e="utf8"){let r=pd[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var w7,H1=Se(()=>{w7=l(f(),1);Mp()});var z1={};Je(z1,{fromString:()=>eB});function eB(t,e="utf8"){let r=pd[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ls(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var v7,W1=Se(()=>{v7=l(f(),1);Mp();fd()});var G1={};Je(G1,{concat:()=>tB});function tB(t,e){e||(e=t.reduce((i,o)=>i+o.length,0));let r=hd(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return ls(r)}var A7,J1=Se(()=>{A7=l(f(),1);Lp();fd()});var r2=F((T7,t2)=>{"use strict";var _7=l(f()),Y1=Wx(),fs=i1(),{names:Vc}=s1(),{toString:yd}=(H1(),ia(j1)),{fromString:rB}=(W1(),ia(z1)),{concat:nB}=(J1(),ia(G1)),hs={};for(let t in Vc){let e=t;hs[Vc[e]]=e}Object.freeze(hs);function iB(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return yd(t,"base16")}function oB(t){return rB(t,"base16")}function sB(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return yd(Y1.encode("base58btc",t)).slice(1)}function cB(t){let e=t instanceof Uint8Array?yd(t):t;return Y1.decode("z"+e)}function X1(t){if(!(t instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(t.length<2)throw new Error("multihash too short. must be > 2 bytes.");let e=fs.decode(t);if(!Q1(e))throw new Error(`multihash unknown function code: 0x${e.toString(16)}`);t=t.slice(fs.decode.bytes);let r=fs.decode(t);if(r<0)throw new Error(`multihash invalid length: ${r}`);if(t=t.slice(fs.decode.bytes),t.length!==r)throw new Error(`multihash length inconsistent: 0x${yd(t,"base16")}`);return{code:e,name:hs[e],length:r,digest:t}}function aB(t,e,r){if(!t||e===void 0)throw new Error("multihash encode requires at least two args: digest, code");let n=Z1(e);if(!(t instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(r==null&&(r=t.length),r&&t.length!==r)throw new Error("digest length should be equal to specified length.");let i=fs.encode(n),o=fs.encode(r);return nB([i,o,t],i.length+o.length+t.length)}function Z1(t){let e=t;if(typeof t=="string"){if(Vc[t]===void 0)throw new Error(`Unrecognized hash function named: ${t}`);e=Vc[t]}if(typeof e!="number")throw new Error(`Hash function code should be a number. Got: ${e}`);if(hs[e]===void 0&&!Np(e))throw new Error(`Unrecognized function code: ${e}`);return e}function Np(t){return t>0&&t<16}function Q1(t){return!!(Np(t)||hs[t])}function e2(t){X1(t)}function uB(t){return e2(t),t.subarray(0,2)}t2.exports={names:Vc,codes:hs,toHexString:iB,fromHexString:oB,toB58String:sB,fromB58String:cB,decode:X1,encode:aB,coerceCode:Z1,isAppCode:Np,validate:e2,prefix:uB,isValidCode:Q1}});var F2=F((OF,$2)=>{var UF=l(f()),bs=1e3,gs=bs*60,ws=gs*60,no=ws*24,HB=no*7,zB=no*365.25;$2.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return WB(t);if(r==="number"&&isFinite(t))return e.long?JB(t):GB(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function WB(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*zB;case"weeks":case"week":case"w":return r*HB;case"days":case"day":case"d":return r*no;case"hours":case"hour":case"hrs":case"hr":case"h":return r*ws;case"minutes":case"minute":case"mins":case"min":case"m":return r*gs;case"seconds":case"second":case"secs":case"sec":case"s":return r*bs;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function GB(t){var e=Math.abs(t);return e>=no?Math.round(t/no)+"d":e>=ws?Math.round(t/ws)+"h":e>=gs?Math.round(t/gs)+"m":e>=bs?Math.round(t/bs)+"s":t+"ms"}function JB(t){var e=Math.abs(t);return e>=no?Bd(t,e,no,"day"):e>=ws?Bd(t,e,ws,"hour"):e>=gs?Bd(t,e,gs,"minute"):e>=bs?Bd(t,e,bs,"second"):t+" ms"}function Bd(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var YB={};Je(YB,{BearerDid:()=>Dt,Did:()=>Ue,DidDht:()=>Oc,DidDhtDocument:()=>Uc,DidDhtRegisteredDidType:()=>ip,DidDhtRegisteredKeyType:()=>nd,DidDhtUtils:()=>pt,DidDhtVerificationRelationship:()=>op,DidError:()=>Y,DidErrorCode:()=>en,DidIon:()=>uy,DidIonRegisteredKeyType:()=>M2,DidIonUtils:()=>oi,DidJwk:()=>dy,DidKey:()=>ly,DidKeyRegisteredKeyType:()=>N2,DidKeyUtils:()=>ur,DidKeyVerificationMethodType:()=>_d,DidMethod:()=>Ht,DidResolverCacheLevel:()=>hy,DidResolverCacheNoop:()=>py,DidVerificationRelationship:()=>fi,DidWeb:()=>fy,EMPTY_DID_RESOLUTION_RESULT:()=>Oe,UniversalResolver:()=>yy,utils:()=>Vh});var HF=l(f(),1);var mk=l(f(),1),fi=(o=>(o.authentication="authentication",o.assertionMethod="assertionMethod",o.keyAgreement="keyAgreement",o.capabilityDelegation="capabilityDelegation",o.capabilityInvocation="capabilityInvocation",o))(fi||{});var gk=l(f(),1),Oe={"@context":"https://w3id.org/did-resolution/v1",didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};var xk=l(f(),1),Qe=class Qe{constructor({method:e,id:r,path:n,query:i,fragment:o,params:s}){this.uri=`did:${e}:${r}`,this.method=e,this.id=r,this.path=n,this.query=i,this.fragment=o,this.params=s}static parse(e){if(!e)return null;let r=Qe.DID_URI_PATTERN.exec(e);if(!r||!r.groups)return null;let{method:n,id:i,path:o,query:s,fragment:c}=r.groups,u={uri:`did:${n}:${i}`,method:n,id:i};if(o&&(u.path=o),s&&(u.query=s.slice(1)),c&&(u.fragment=c.slice(1)),s){let d={},a=s.slice(1).split("&");for(let h of a){let[m,y]=h.split("=");d[m]=y}u.params=d}return u}};Qe.METHOD_PATTERN="([a-z0-9]+)",Qe.PCT_ENCODED_PATTERN="(?:%[0-9a-fA-F]{2})",Qe.ID_CHAR_PATTERN=`(?:[a-zA-Z0-9._-]|${Qe.PCT_ENCODED_PATTERN})`,Qe.METHOD_ID_PATTERN=`((?:${Qe.ID_CHAR_PATTERN}*:)*(${Qe.ID_CHAR_PATTERN}+))`,Qe.PATH_PATTERN="(/[^#?]*)?",Qe.QUERY_PATTERN="([?][^#]*)?",Qe.FRAGMENT_PATTERN="(#.*)?",Qe.DID_URI_PATTERN=new RegExp(`^did:(?<method>${Qe.METHOD_PATTERN}):(?<id>${Qe.METHOD_ID_PATTERN})(?<path>${Qe.PATH_PATTERN})(?<query>${Qe.QUERY_PATTERN})(?<fragment>${Qe.FRAGMENT_PATTERN})$`);var Ue=Qe;var vk=l(f(),1),Y=class t extends Error{constructor(r,n){super(n);this.code=r;this.name="DidError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,t)}},en=(y=>(y.InvalidDid="invalidDid",y.MethodNotSupported="methodNotSupported",y.InternalError="internalError",y.InvalidDidDocument="invalidDidDocument",y.InvalidDidDocumentLength="invalidDidDocumentLength",y.InvalidDidUrl="invalidDidUrl",y.InvalidPublicKey="invalidPublicKey",y.InvalidPublicKeyLength="invalidPublicKeyLength",y.InvalidPublicKeyType="invalidPublicKeyType",y.InvalidSignature="invalidSignature",y.NotFound="notFound",y.RepresentationNotSupported="representationNotSupported",y.UnsupportedPublicKeyType="unsupportedPublicKeyType",y))(en||{});var zK=l(f(),1);var dK=l(f(),1);var qP=l(f(),1);var rO=l(f(),1);var Tk=l(f(),1),GE=l(Gy(),1);var d4=l(f(),1);var zk=l(f(),1);var Lk=l(f(),1);var Ik=l(f(),1);function JE(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var c=t.length,u=t.charAt(0),d=Math.log(c)/Math.log(256),a=Math.log(256)/Math.log(c);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var b=0,x=0,v=0,S=p.length;v!==S&&p[v]===0;)v++,b++;for(var w=(S-v)*a+1>>>0,B=new Uint8Array(w);v!==S;){for(var T=p[v],k=0,O=w-1;(T!==0||k<x)&&O!==-1;O--,k++)T+=256*B[O]>>>0,B[O]=T%c>>>0,T=T/c>>>0;if(T!==0)throw new Error("Non-zero carry");x=k,v++}for(var C=w-x;C!==w&&B[C]===0;)C++;for(var M=u.repeat(b);C<w;++C)M+=t.charAt(B[C]);return M}function m(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var b=0;if(p[b]!==" "){for(var x=0,v=0;p[b]===u;)x++,b++;for(var S=(p.length-b)*d+1>>>0,w=new Uint8Array(S);p[b];){var B=r[p.charCodeAt(b)];if(B===255)return;for(var T=0,k=S-1;(B!==0||T<v)&&k!==-1;k--,T++)B+=c*w[k]>>>0,w[k]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");v=T,b++}if(p[b]!==" "){for(var O=S-v;O!==S&&w[O]===0;)O++;for(var C=new Uint8Array(x+(S-O)),M=x;O!==S;)C[M++]=w[O++];return C}}}function y(p){var b=m(p);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:m,decode:y}}var YE=JE,XE=YE,Jy=XE;var kk=l(f(),1),Bk=new Uint8Array(0);var Yy=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},mo=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var Rk=l(f(),1);var Wd=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Gd=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Xy(this,e)}},Jd=class{constructor(e){this.decoders=e}or(e){return Xy(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Xy=(t,e)=>new Jd({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),Yd=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Wd(e,r,n),this.decoder=new Gd(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Zy=({name:t,prefix:e,encode:r,decode:n})=>new Yd(t,e,r,n),Xd=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=Jy(r,e);return Zy({prefix:t,name:e,encode:n,decode:o=>mo(i(o))})},QE=(t,e,r,n)=>{let i={};for(let a=0;a<e.length;++a)i[e[a]]=a;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),c=0,u=0,d=0;for(let a=0;a<o;++a){let h=i[t[a]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|h,c+=r,c>=8&&(c-=8,s[d++]=255&u>>c)}if(c>=r||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return s},ev=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,c=0;for(let u=0;u<t.length;++u)for(c=c<<8|t[u],s+=8;s>r;)s-=r,o+=e[i&c>>s];if(s&&(o+=e[i&c<<r-s]),n)for(;o.length*r&7;)o+="=";return o},xt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Zy({prefix:e,name:t,encode(i){return ev(i,n,r)},decode(i){return QE(i,n,r,t)}});var ks=xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Mk=xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Nk=xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),$k=xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Fk=xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),qk=xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Vk=xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),jk=xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Zd=xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Yk=l(f(),1);var _t=Xd({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Gk=Xd({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var r4=l(f(),1);var Zk=xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Qk=xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),_r=xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),e4=xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var i4=l(f(),1);function Qy(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function e0(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function bo(t){let r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,i]=r;return i}var Rs=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(a){try{d(n.next(a))}catch(h){s(h)}}function u(a){try{d(n.throw(a))}catch(h){s(h)}}function d(a){a.done?o(a.value):i(a.value).then(c,u)}d((n=n.apply(t,e||[])).next())})},t0=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(d){o({value:d,done:c})},s)}},ua=new TextEncoder,hi=new TextDecoder,W=class t{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new t(e,"ArrayBuffer")}static asyncIterable(e){if(!e0(e))throw new TypeError("Input must be of type AsyncIterable.");return new t(e,"AsyncIterable")}static base32Z(e){return new t(e,"Base32Z")}static base58Btc(e){return new t(e,"Base58Btc")}static base64Url(e){return new t(e,"Base64Url")}static bufferSource(e){return new t(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new t(e,"Hex")}static multibase(e){return new t(e,"Multibase")}static object(e){return new t(e,"Object")}static string(e){return new t(e,"String")}static uint8Array(e){return new t(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return _t.baseDecode(this.data).buffer;case"Base64Url":return _r.baseDecode(this.data).buffer;case"BufferSource":{if(bo(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return Qy(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return Rs(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return Zd.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return _t.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return _t.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return _r.baseEncode(e)}case"BufferSource":{let e=this.toUint8Array();return _r.baseEncode(e)}case"Object":{let e=JSON.stringify(this.data),r=ua.encode(e);return _r.baseEncode(r)}case"String":{let e=ua.encode(this.data);return _r.baseEncode(e)}case"Uint8Array":return _r.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var e,r,n,i;return Rs(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let u=[];try{for(var o=!0,s=t0(this.data),c;c=yield s.next(),e=c.done,!e;o=!0){i=c.value,o=!1;let a=i;u.push(a)}}catch(a){r={error:a}}finally{try{!o&&!e&&(n=s.return)&&(yield n.call(s))}finally{if(r)throw r.error}}return new Blob(u)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){let e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{let r=this.toUint8Array();return t.uint8Array(r).toHex()}case"Base64Url":{let r=this.toUint8Array();return t.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{let e=_r.baseDecode(this.data),r=hi.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{let e=hi.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return Rs(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return hi.decode(this.data);case"Base64Url":{let e=_r.baseDecode(this.data);return hi.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return hi.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var e,r,n,i;return Rs(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let u="";try{for(var o=!0,s=t0(this.data),c;c=yield s.next(),e=c.done,!e;o=!0){i=c.value,o=!1;let d=i;typeof d=="string"?u+=d:u+=hi.decode(d,{stream:!0})}}catch(d){r={error:d}}finally{try{!o&&!e&&(n=s.return)&&(yield n.call(s))}finally{if(r)throw r.error}}return u+=hi.decode(void 0,{stream:!1}),u}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return Zd.baseDecode(this.data);case"Base58Btc":return _t.baseDecode(this.data);case"Base64Url":return _r.baseDecode(this.data);case"BufferSource":{let e=bo(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{let e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){let n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{let e=JSON.stringify(this.data);return ua.encode(e)}case"String":return ua.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return Rs(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var O4=l(f(),1);var B4=l(f(),1);var D4=l(f(),1);var tn={};Je(tn,{decode:()=>go,encodeTo:()=>pi,encodingLength:()=>yi});var p4=l(f(),1);var f4=l(f(),1),tv=i0,r0=128,rv=127,nv=~rv,iv=Math.pow(2,31);function i0(t,e,r){e=e||[],r=r||0;for(var n=r;t>=iv;)e[r++]=t&255|r0,t/=128;for(;t&nv;)e[r++]=t&255|r0,t>>>=7;return e[r]=t|0,i0.bytes=r-n+1,e}var ov=Qd,sv=128,n0=127;function Qd(t,n){var r=0,n=n||0,i=0,o=n,s,c=t.length;do{if(o>=c)throw Qd.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&n0)<<i:(s&n0)*Math.pow(2,i),i+=7}while(s>=sv);return Qd.bytes=o-n,r}var cv=Math.pow(2,7),av=Math.pow(2,14),uv=Math.pow(2,21),dv=Math.pow(2,28),lv=Math.pow(2,35),fv=Math.pow(2,42),hv=Math.pow(2,49),pv=Math.pow(2,56),yv=Math.pow(2,63),mv=function(t){return t<cv?1:t<av?2:t<uv?3:t<dv?4:t<lv?5:t<fv?6:t<hv?7:t<pv?8:t<yv?9:10},bv={encode:tv,decode:ov,encodingLength:mv},gv=bv,Cs=gv;var go=(t,e=0)=>[Cs.decode(t,e),Cs.decode.bytes],pi=(t,e,r=0)=>(Cs.encode(t,e,r),e),yi=t=>Cs.encodingLength(t);var m4=l(f(),1);var el=(t,e)=>{let r=e.byteLength,n=yi(t),i=n+yi(r),o=new Uint8Array(i+r);return pi(t,o,0),pi(r,o,n),o.set(e,i),new wo(t,r,e,o)},o0=t=>{let e=mo(t),[r,n]=go(e),[i,o]=go(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new wo(r,i,s,e)},s0=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&Yy(t.bytes,r.bytes)}},wo=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};var b4=l(f(),1);var c0=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return xv(r,rl(t),e||_t.encoder);default:return Ev(r,rl(t),e||ks.encoder)}};var a0=new WeakMap,rl=t=>{let e=a0.get(t);if(e==null){let r=new Map;return a0.set(t,r),r}return e},nl=class t{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==Os)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==vv)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=el(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&s0(e.multihash,n.multihash)}toString(e){return c0(this,e)}toJSON(){return{"/":c0(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new t(n,i,o,s||u0(n,i,o.bytes))}else if(r[Dv]===!0){let{version:n,multihash:i,code:o}=r,s=o0(i);return t.create(n,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Os)throw new Error(`Version 0 CID must use dag-pb (code: ${Os}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let i=u0(e,r,n.bytes);return new t(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,Os,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,i=mo(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new wo(r.multihashCode,r.digestSize,o,i);return[r.version===0?t.createV0(s):t.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[h,m]=go(e.subarray(r));return r+=m,h},i=n(),o=Os;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,c=n(),u=n(),d=r+u,a=d-s;return{version:i,codec:o,multihashCode:c,digestSize:u,multihashSize:a,size:d}}static parse(e,r){let[n,i]=wv(e,r),o=t.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return rl(o).set(n,e),o}},wv=(t,e)=>{switch(t[0]){case"Q":{let r=e||_t;return[_t.prefix,r.decode(`${_t.prefix}${t}`)]}case _t.prefix:{let r=e||_t;return[_t.prefix,r.decode(t)]}case ks.prefix:{let r=e||ks;return[ks.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},xv=(t,e,r)=>{let{prefix:n}=r;if(n!==_t.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i},Ev=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i},Os=112,vv=18,u0=(t,e,r)=>{let n=yi(t),i=n+yi(e),o=new Uint8Array(i+r.byteLength);return pi(t,o,0),pi(e,o,n),o.set(r,i),o},Dv=Symbol.for("@ipld/js-cid/CID");var A4=l(f(),1);var T4=l(f(),1);var bt=class t{static addPrefix(e){var r;let{code:n,data:i,name:o}=e;if(!(o?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=t.codeToName.has(n)?n:t.nameToCode.get(o),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);let s=tn.encodingLength(n),c=new Uint8Array(s+i.byteLength);return c.set(i,s),tn.encodeTo(n,c),c}static getCodeFromData(e){let{prefixedData:r}=e,[n,i]=tn.decode(r);return n}static getCodeFromName(e){let{name:r}=e,n=t.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){let{code:r}=e,n=t.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){t.codeToName.set(e.code,e.name),t.nameToCode.set(e.name,e.code)}static removePrefix(e){let{prefixedData:r}=e,[n,i]=tn.decode(r),o=t.codeToName.get(n);if(o===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(i),name:o}}};bt.codeToName=new Map;bt.nameToCode=new Map;bt.registerCodec({code:237,name:"ed25519-pub"});bt.registerCodec({code:4864,name:"ed25519-priv"});bt.registerCodec({code:236,name:"x25519-pub"});bt.registerCodec({code:4866,name:"x25519-priv"});bt.registerCodec({code:231,name:"secp256k1-pub"});bt.registerCodec({code:4865,name:"secp256k1-priv"});var P4=l(f(),1);function il(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&il(t[e])})}var jR=l(f(),1),kD=l(Yl(),1),ki=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(a){try{d(n.next(a))}catch(h){s(h)}}function u(a){try{d(n.throw(a))}catch(h){s(h)}}function d(a){a.done?o(a.value):i(a.value).then(c,u)}d((n=n.apply(t,e||[])).next())})};var Ka=class{constructor(){this.store=new Map}clear(){return ki(this,void 0,void 0,function*(){this.store.clear()})}close(){return ki(this,void 0,void 0,function*(){})}delete(e){return ki(this,void 0,void 0,function*(){return this.store.delete(e)})}get(e){return ki(this,void 0,void 0,function*(){return this.store.get(e)})}has(e){return ki(this,void 0,void 0,function*(){return this.store.has(e)})}list(){return ki(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(e,r){return ki(this,void 0,void 0,function*(){this.store.set(e,r)})}};var WR=l(f(),1);var eO=l(f(),1),_6=l(uh(),1);var I6=l(uh(),1);var PO=l(f(),1);var BO=l(f(),1);var TO=l(f(),1);var vO=l(f(),1);var fO=l(f(),1);function sw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function B6(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function dh(t,...e){if(!B6(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function cw(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");sw(t.outputLen),sw(t.blockLen)}function $o(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function aw(t,e){dh(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var gO=l(f(),1);var pO=l(f(),1),Fo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function uw(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var yu=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),yr=(t,e)=>t<<32-e|t>>>e,k6=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!k6)throw new Error("Non little-endian hardware is not supported");function lh(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function lc(t){if(typeof t=="string"&&(t=lh(t)),!uw(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function mu(...t){let e=0;for(let n=0;n<t.length;n++){let i=t[n];if(!uw(i))throw new Error("Uint8Array expected");e+=i.length}let r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}var qo=class{clone(){return this._cloneInto()}},mO={}.toString;function bu(t){let e=n=>t().update(lc(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Vi(t=32){if(Fo&&typeof Fo.getRandomValues=="function")return Fo.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function R6(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),c=Number(r&o),u=n?4:0,d=n?0:4;t.setUint32(e+u,s,n),t.setUint32(e+d,c,n)}var Vo=class extends qo{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=yu(this.buffer)}update(e){$o(this);let{view:r,buffer:n,blockLen:i}=this;e=lc(e);let o=e.length;for(let s=0;s<o;){let c=Math.min(i-this.pos,o-s);if(c===i){let u=yu(e);for(;i<=o-s;s+=i)this.process(u,s);continue}n.set(e.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){$o(this),aw(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let h=s;h<i;h++)r[h]=0;R6(n,i-8,BigInt(this.length*8),o),this.process(n,0);let c=yu(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let d=u/4,a=this.get();if(d>a.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<d;h++)c.setUint32(4*h,a[h],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:c}=this;return e.length=i,e.pos=c,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};var C6=(t,e,r)=>t&e^~t&r,O6=(t,e,r)=>t&e^t&r^e&r,U6=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),zn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Wn=new Uint32Array(64),fh=class extends Vo{constructor(){super(64,32,8,!1),this.A=zn[0]|0,this.B=zn[1]|0,this.C=zn[2]|0,this.D=zn[3]|0,this.E=zn[4]|0,this.F=zn[5]|0,this.G=zn[6]|0,this.H=zn[7]|0}get(){let{A:e,B:r,C:n,D:i,E:o,F:s,G:c,H:u}=this;return[e,r,n,i,o,s,c,u]}set(e,r,n,i,o,s,c,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=c|0,this.H=u|0}process(e,r){for(let h=0;h<16;h++,r+=4)Wn[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){let m=Wn[h-15],y=Wn[h-2],p=yr(m,7)^yr(m,18)^m>>>3,b=yr(y,17)^yr(y,19)^y>>>10;Wn[h]=b+Wn[h-7]+p+Wn[h-16]|0}let{A:n,B:i,C:o,D:s,E:c,F:u,G:d,H:a}=this;for(let h=0;h<64;h++){let m=yr(c,6)^yr(c,11)^yr(c,25),y=a+m+C6(c,u,d)+U6[h]+Wn[h]|0,b=(yr(n,2)^yr(n,13)^yr(n,22))+O6(n,i,o)|0;a=d,d=u,u=c,c=s+y|0,s=o,o=i,i=n,n=y+b|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,c=c+this.E|0,u=u+this.F|0,d=d+this.G|0,a=a+this.H|0,this.set(n,i,o,s,c,u,d,a)}roundClean(){Wn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var rr=bu(()=>new fh);var P6=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(a){try{d(n.next(a))}catch(h){s(h)}}function u(a){try{d(n.throw(a))}catch(h){s(h)}}function d(a){a.done?o(a.value):i(a.value).then(c,u)}d((n=n.apply(t,e||[])).next())})},jo=class{static digest({data:e}){return P6(this,void 0,void 0,function*(){return rr(e)})}};var RO=l(f(),1),$r=class{};var L6=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(a){try{d(n.next(a))}catch(h){s(h)}}function u(a){try{d(n.throw(a))}catch(h){s(h)}}function d(a){a.done?o(a.value):i(a.value).then(c,u)}d((n=n.apply(t,e||[])).next())})},gu=class extends $r{digest({algorithm:e,data:r}){return L6(this,void 0,void 0,function*(){switch(e){case"SHA-256":return yield jo.digest({data:r})}})}};var VU=l(f(),1);var AU=l(f(),1);var lU=l(f(),1);var MO=l(f(),1);var xu={};Je(xu,{bitGet:()=>V6,bitLen:()=>q6,bitMask:()=>fc,bitSet:()=>j6,bytesToHex:()=>bn,bytesToNumberBE:()=>gn,bytesToNumberLE:()=>br,concatBytes:()=>xn,createHmacDrbg:()=>yh,ensureBytes:()=>ke,equalBytes:()=>$6,hexToBytes:()=>ji,hexToNumber:()=>ph,isBytes:()=>mr,numberToBytesBE:()=>Bt,numberToBytesLE:()=>wn,numberToHexUnpadded:()=>hw,numberToVarBytesBE:()=>N6,utf8ToBytes:()=>F6,validateObject:()=>nr});var LO=l(f(),1);var fw=BigInt(0),wu=BigInt(1),K6=BigInt(2);function mr(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var M6=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bn(t){if(!mr(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=M6[t[r]];return e}function hw(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function ph(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}var mn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function dw(t){if(t>=mn._0&&t<=mn._9)return t-mn._0;if(t>=mn._A&&t<=mn._F)return t-(mn._A-10);if(t>=mn._a&&t<=mn._f)return t-(mn._a-10)}function ji(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=dw(t.charCodeAt(o)),c=dw(t.charCodeAt(o+1));if(s===void 0||c===void 0){let u=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+o)}n[i]=s*16+c}return n}function gn(t){return ph(bn(t))}function br(t){if(!mr(t))throw new Error("Uint8Array expected");return ph(bn(Uint8Array.from(t).reverse()))}function Bt(t,e){return ji(t.toString(16).padStart(e*2,"0"))}function wn(t,e){return Bt(t,e).reverse()}function N6(t){return ji(hw(t))}function ke(t,e,r){let n;if(typeof e=="string")try{n=ji(e)}catch(o){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${o}`)}else if(mr(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function xn(...t){let e=0;for(let i=0;i<t.length;i++){let o=t[i];if(!mr(o))throw new Error("Uint8Array expected");e+=o.length}let r=new Uint8Array(e),n=0;for(let i=0;i<t.length;i++){let o=t[i];r.set(o,n),n+=o.length}return r}function $6(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function F6(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function q6(t){let e;for(e=0;t>fw;t>>=wu,e+=1);return e}function V6(t,e){return t>>BigInt(e)&wu}var j6=(t,e,r)=>t|(r?wu:fw)<<BigInt(e),fc=t=>(K6<<BigInt(t-1))-wu,hh=t=>new Uint8Array(t),lw=t=>Uint8Array.from(t);function yh(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=hh(t),i=hh(t),o=0,s=()=>{n.fill(1),i.fill(0),o=0},c=(...h)=>r(i,n,...h),u=(h=hh())=>{i=c(lw([0]),h),n=c(),h.length!==0&&(i=c(lw([1]),h),n=c())},d=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let h=0,m=[];for(;h<e;){n=c();let y=n.slice();m.push(y),h+=n.length}return xn(...m)};return(h,m)=>{s(),u(h);let y;for(;!(y=m(d()));)u();return s(),y}}var H6={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||mr(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function nr(t,e,r={}){let n=(i,o,s)=>{let c=H6[o];if(typeof c!="function")throw new Error(`Invalid validator "${o}", expected function`);let u=t[i];if(!(s&&u===void 0)&&!c(u,t))throw new Error(`Invalid param ${String(i)}=${u} (${typeof u}), expected ${o}`)};for(let[i,o]of Object.entries(e))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return t}var tt=BigInt(0),Pe=BigInt(1),Hi=BigInt(2),z6=BigInt(3),mh=BigInt(4),pw=BigInt(5),yw=BigInt(8),W6=BigInt(9),G6=BigInt(16);function Ee(t,e){let r=t%e;return r>=tt?r:e+r}function bh(t,e,r){if(r<=tt||e<tt)throw new Error("Expected power/modulo > 0");if(r===Pe)return tt;let n=Pe;for(;e>tt;)e&Pe&&(n=n*t%r),t=t*t%r,e>>=Pe;return n}function Re(t,e,r){let n=t;for(;e-- >tt;)n*=n,n%=r;return n}function Eu(t,e){if(t===tt||e<=tt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Ee(t,e),n=e,i=tt,o=Pe,s=Pe,c=tt;for(;r!==tt;){let d=n/r,a=n%r,h=i-s*d,m=o-c*d;n=r,r=a,i=s,o=c,s=h,c=m}if(n!==Pe)throw new Error("invert: does not exist");return Ee(i,e)}function J6(t){let e=(t-Pe)/Hi,r,n,i;for(r=t-Pe,n=0;r%Hi===tt;r/=Hi,n++);for(i=Hi;i<t&&bh(i,e,t)!==t-Pe;i++);if(n===1){let s=(t+Pe)/mh;return function(u,d){let a=u.pow(d,s);if(!u.eql(u.sqr(a),d))throw new Error("Cannot find square root");return a}}let o=(r+Pe)/Hi;return function(c,u){if(c.pow(u,e)===c.neg(c.ONE))throw new Error("Cannot find square root");let d=n,a=c.pow(c.mul(c.ONE,i),r),h=c.pow(u,o),m=c.pow(u,r);for(;!c.eql(m,c.ONE);){if(c.eql(m,c.ZERO))return c.ZERO;let y=1;for(let b=c.sqr(m);y<d&&!c.eql(b,c.ONE);y++)b=c.sqr(b);let p=c.pow(a,Pe<<BigInt(d-y-1));a=c.sqr(p),h=c.mul(h,p),m=c.mul(m,a),d=y}return h}}function Y6(t){if(t%mh===z6){let e=(t+Pe)/mh;return function(n,i){let o=n.pow(i,e);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(t%yw===pw){let e=(t-pw)/yw;return function(n,i){let o=n.mul(i,Hi),s=n.pow(o,e),c=n.mul(i,s),u=n.mul(n.mul(c,Hi),s),d=n.mul(c,n.sub(u,n.ONE));if(!n.eql(n.sqr(d),i))throw new Error("Cannot find square root");return d}}return t%G6,J6(t)}var mw=(t,e)=>(Ee(t,e)&Pe)===Pe,X6=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function gh(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=X6.reduce((n,i)=>(n[i]="function",n),e);return nr(t,r)}function Z6(t,e,r){if(r<tt)throw new Error("Expected power > 0");if(r===tt)return t.ONE;if(r===Pe)return e;let n=t.ONE,i=e;for(;r>tt;)r&Pe&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Pe;return n}function Q6(t,e){let r=new Array(e.length),n=e.reduce((o,s,c)=>t.is0(s)?o:(r[c]=o,t.mul(o,s)),t.ONE),i=t.inv(n);return e.reduceRight((o,s,c)=>t.is0(s)?o:(r[c]=t.mul(o,r[c]),t.mul(o,s)),i),r}function wh(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Ho(t,e,r=!1,n={}){if(t<=tt)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:i,nByteLength:o}=wh(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=Y6(t),c=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:fc(i),ZERO:tt,ONE:Pe,create:u=>Ee(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return tt<=u&&u<t},is0:u=>u===tt,isOdd:u=>(u&Pe)===Pe,neg:u=>Ee(-u,t),eql:(u,d)=>u===d,sqr:u=>Ee(u*u,t),add:(u,d)=>Ee(u+d,t),sub:(u,d)=>Ee(u-d,t),mul:(u,d)=>Ee(u*d,t),pow:(u,d)=>Z6(c,u,d),div:(u,d)=>Ee(u*Eu(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>Eu(u,t),sqrt:n.sqrt||(u=>s(c,u)),invertBatch:u=>Q6(c,u),cmov:(u,d,a)=>a?d:u,toBytes:u=>r?wn(u,o):Bt(u,o),fromBytes:u=>{if(u.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${u.length}`);return r?br(u):gn(u)}});return Object.freeze(c)}function bw(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}function gw(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function xh(t){let e=gw(t);return e+Math.ceil(e/2)}function ww(t,e,r=!1){let n=t.length,i=gw(e),o=xh(e);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=r?gn(t):br(t),c=Ee(s,e-Pe)+Pe;return r?wn(c,i):Bt(c,i)}var JO=l(f(),1);var qO=l(f(),1);var tT=BigInt(0),Eh=BigInt(1);function vu(t,e){let r=(i,o)=>{let s=o.negate();return i?s:o},n=i=>{let o=Math.ceil(e/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=t.ZERO,c=i;for(;o>tT;)o&Eh&&(s=s.add(c)),c=c.double(),o>>=Eh;return s},precomputeWindow(i,o){let{windows:s,windowSize:c}=n(o),u=[],d=i,a=d;for(let h=0;h<s;h++){a=d,u.push(a);for(let m=1;m<c;m++)a=a.add(d),u.push(a);d=a.double()}return u},wNAF(i,o,s){let{windows:c,windowSize:u}=n(i),d=t.ZERO,a=t.BASE,h=BigInt(2**i-1),m=2**i,y=BigInt(i);for(let p=0;p<c;p++){let b=p*u,x=Number(s&h);s>>=y,x>u&&(x-=m,s+=Eh);let v=b,S=b+Math.abs(x)-1,w=p%2!==0,B=x<0;x===0?a=a.add(r(w,o[v])):d=d.add(r(B,o[S]))}return{p:d,f:a}},wNAFCached(i,o,s,c){let u=i._WINDOW_SIZE||1,d=o.get(i);return d||(d=this.precomputeWindow(i,u),u!==1&&o.set(i,c(d))),this.wNAF(u,d,s)}}}function hc(t){return gh(t.Fp),nr(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...wh(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function rT(t){let e=hc(t);nr(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:nT,hexToBytes:iT}=xu,zi={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=zi;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:nT(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=zi,r=typeof t=="string"?iT(t):t;if(!mr(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:i,l:o}=zi._parseInt(r.subarray(2)),{d:s,l:c}=zi._parseInt(o);if(c.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){let e=d=>Number.parseInt(d[0],16)&8?"00"+d:d,r=d=>{let a=d.toString(16);return a.length&1?`0${a}`:a},n=e(r(t.s)),i=e(r(t.r)),o=n.length/2,s=i.length/2,c=r(o),u=r(s);return`30${r(s+o+4)}02${u}${i}02${c}${n}`}},En=BigInt(0),ir=BigInt(1),zO=BigInt(2),xw=BigInt(3),WO=BigInt(4);function oT(t){let e=rT(t),{Fp:r}=e,n=e.toBytes||((p,b,x)=>{let v=b.toAffine();return xn(Uint8Array.from([4]),r.toBytes(v.x),r.toBytes(v.y))}),i=e.fromBytes||(p=>{let b=p.subarray(1),x=r.fromBytes(b.subarray(0,r.BYTES)),v=r.fromBytes(b.subarray(r.BYTES,2*r.BYTES));return{x,y:v}});function o(p){let{a:b,b:x}=e,v=r.sqr(p),S=r.mul(v,p);return r.add(r.add(S,r.mul(p,b)),x)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(p){return typeof p=="bigint"&&En<p&&p<e.n}function c(p){if(!s(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(p){let{allowedPrivateKeyLengths:b,nByteLength:x,wrapPrivateKey:v,n:S}=e;if(b&&typeof p!="bigint"){if(mr(p)&&(p=bn(p)),typeof p!="string"||!b.includes(p.length))throw new Error("Invalid key");p=p.padStart(x*2,"0")}let w;try{w=typeof p=="bigint"?p:gn(ke("private key",p,x))}catch{throw new Error(`private key must be ${x} bytes, hex or bigint, not ${typeof p}`)}return v&&(w=Ee(w,S)),c(w),w}let d=new Map;function a(p){if(!(p instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(b,x,v){if(this.px=b,this.py=x,this.pz=v,b==null||!r.isValid(b))throw new Error("x required");if(x==null||!r.isValid(x))throw new Error("y required");if(v==null||!r.isValid(v))throw new Error("z required")}static fromAffine(b){let{x,y:v}=b||{};if(!b||!r.isValid(x)||!r.isValid(v))throw new Error("invalid affine point");if(b instanceof h)throw new Error("projective point not allowed");let S=w=>r.eql(w,r.ZERO);return S(x)&&S(v)?h.ZERO:new h(x,v,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){let x=r.invertBatch(b.map(v=>v.pz));return b.map((v,S)=>v.toAffine(x[S])).map(h.fromAffine)}static fromHex(b){let x=h.fromAffine(i(ke("pointHex",b)));return x.assertValidity(),x}static fromPrivateKey(b){return h.BASE.multiply(u(b))}_setWindowSize(b){this._WINDOW_SIZE=b,d.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:b,y:x}=this.toAffine();if(!r.isValid(b)||!r.isValid(x))throw new Error("bad point: x or y not FE");let v=r.sqr(x),S=o(b);if(!r.eql(v,S))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:b}=this.toAffine();if(r.isOdd)return!r.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){a(b);let{px:x,py:v,pz:S}=this,{px:w,py:B,pz:T}=b,k=r.eql(r.mul(x,T),r.mul(w,S)),O=r.eql(r.mul(v,T),r.mul(B,S));return k&&O}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){let{a:b,b:x}=e,v=r.mul(x,xw),{px:S,py:w,pz:B}=this,T=r.ZERO,k=r.ZERO,O=r.ZERO,C=r.mul(S,S),M=r.mul(w,w),$=r.mul(B,B),q=r.mul(S,w);return q=r.add(q,q),O=r.mul(S,B),O=r.add(O,O),T=r.mul(b,O),k=r.mul(v,$),k=r.add(T,k),T=r.sub(M,k),k=r.add(M,k),k=r.mul(T,k),T=r.mul(q,T),O=r.mul(v,O),$=r.mul(b,$),q=r.sub(C,$),q=r.mul(b,q),q=r.add(q,O),O=r.add(C,C),C=r.add(O,C),C=r.add(C,$),C=r.mul(C,q),k=r.add(k,C),$=r.mul(w,B),$=r.add($,$),C=r.mul($,q),T=r.sub(T,C),O=r.mul($,M),O=r.add(O,O),O=r.add(O,O),new h(T,k,O)}add(b){a(b);let{px:x,py:v,pz:S}=this,{px:w,py:B,pz:T}=b,k=r.ZERO,O=r.ZERO,C=r.ZERO,M=e.a,$=r.mul(e.b,xw),q=r.mul(x,w),j=r.mul(v,B),X=r.mul(S,T),ce=r.add(x,v),U=r.add(w,B);ce=r.mul(ce,U),U=r.add(q,j),ce=r.sub(ce,U),U=r.add(x,S);let K=r.add(w,T);return U=r.mul(U,K),K=r.add(q,X),U=r.sub(U,K),K=r.add(v,S),k=r.add(B,T),K=r.mul(K,k),k=r.add(j,X),K=r.sub(K,k),C=r.mul(M,U),k=r.mul($,X),C=r.add(k,C),k=r.sub(j,C),C=r.add(j,C),O=r.mul(k,C),j=r.add(q,q),j=r.add(j,q),X=r.mul(M,X),U=r.mul($,U),j=r.add(j,X),X=r.sub(q,X),X=r.mul(M,X),U=r.add(U,X),q=r.mul(j,U),O=r.add(O,q),q=r.mul(K,U),k=r.mul(ce,k),k=r.sub(k,q),q=r.mul(ce,j),C=r.mul(K,C),C=r.add(C,q),new h(k,O,C)}subtract(b){return this.add(b.negate())}is0(){return this.equals(h.ZERO)}wNAF(b){return y.wNAFCached(this,d,b,x=>{let v=r.invertBatch(x.map(S=>S.pz));return x.map((S,w)=>S.toAffine(v[w])).map(h.fromAffine)})}multiplyUnsafe(b){let x=h.ZERO;if(b===En)return x;if(c(b),b===ir)return this;let{endo:v}=e;if(!v)return y.unsafeLadder(this,b);let{k1neg:S,k1:w,k2neg:B,k2:T}=v.splitScalar(b),k=x,O=x,C=this;for(;w>En||T>En;)w&ir&&(k=k.add(C)),T&ir&&(O=O.add(C)),C=C.double(),w>>=ir,T>>=ir;return S&&(k=k.negate()),B&&(O=O.negate()),O=new h(r.mul(O.px,v.beta),O.py,O.pz),k.add(O)}multiply(b){c(b);let x=b,v,S,{endo:w}=e;if(w){let{k1neg:B,k1:T,k2neg:k,k2:O}=w.splitScalar(x),{p:C,f:M}=this.wNAF(T),{p:$,f:q}=this.wNAF(O);C=y.constTimeNegate(B,C),$=y.constTimeNegate(k,$),$=new h(r.mul($.px,w.beta),$.py,$.pz),v=C.add($),S=M.add(q)}else{let{p:B,f:T}=this.wNAF(x);v=B,S=T}return h.normalizeZ([v,S])[0]}multiplyAndAddUnsafe(b,x,v){let S=h.BASE,w=(T,k)=>k===En||k===ir||!T.equals(S)?T.multiplyUnsafe(k):T.multiply(k),B=w(this,x).add(w(b,v));return B.is0()?void 0:B}toAffine(b){let{px:x,py:v,pz:S}=this,w=this.is0();b==null&&(b=w?r.ONE:r.inv(S));let B=r.mul(x,b),T=r.mul(v,b),k=r.mul(S,b);if(w)return{x:r.ZERO,y:r.ZERO};if(!r.eql(k,r.ONE))throw new Error("invZ was invalid");return{x:B,y:T}}isTorsionFree(){let{h:b,isTorsionFree:x}=e;if(b===ir)return!0;if(x)return x(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:b,clearCofactor:x}=e;return b===ir?this:x?x(h,this):this.multiplyUnsafe(e.h)}toRawBytes(b=!0){return this.assertValidity(),n(h,this,b)}toHex(b=!0){return bn(this.toRawBytes(b))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);let m=e.nBitLength,y=vu(h,e.endo?Math.ceil(m/2):m);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:s}}function sT(t){let e=hc(t);return nr(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Ew(t){let e=sT(t),{Fp:r,n}=e,i=r.BYTES+1,o=2*r.BYTES+1;function s(U){return En<U&&U<r.ORDER}function c(U){return Ee(U,n)}function u(U){return Eu(U,n)}let{ProjectivePoint:d,normPrivateKeyToScalar:a,weierstrassEquation:h,isWithinCurveOrder:m}=oT({...e,toBytes(U,K,H){let P=K.toAffine(),A=r.toBytes(P.x),L=xn;return H?L(Uint8Array.from([K.hasEvenY()?2:3]),A):L(Uint8Array.from([4]),A,r.toBytes(P.y))},fromBytes(U){let K=U.length,H=U[0],P=U.subarray(1);if(K===i&&(H===2||H===3)){let A=gn(P);if(!s(A))throw new Error("Point is not on curve");let L=h(A),N=r.sqrt(L),V=(N&ir)===ir;return(H&1)===1!==V&&(N=r.neg(N)),{x:A,y:N}}else if(K===o&&H===4){let A=r.fromBytes(P.subarray(0,r.BYTES)),L=r.fromBytes(P.subarray(r.BYTES,2*r.BYTES));return{x:A,y:L}}else throw new Error(`Point of length ${K} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),y=U=>bn(Bt(U,e.nByteLength));function p(U){let K=n>>ir;return U>K}function b(U){return p(U)?c(-U):U}let x=(U,K,H)=>gn(U.slice(K,H));class v{constructor(K,H,P){this.r=K,this.s=H,this.recovery=P,this.assertValidity()}static fromCompact(K){let H=e.nByteLength;return K=ke("compactSignature",K,H*2),new v(x(K,0,H),x(K,H,2*H))}static fromDER(K){let{r:H,s:P}=zi.toSig(ke("DER",K));return new v(H,P)}assertValidity(){if(!m(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!m(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(K){return new v(this.r,this.s,K)}recoverPublicKey(K){let{r:H,s:P,recovery:A}=this,L=O(ke("msgHash",K));if(A==null||![0,1,2,3].includes(A))throw new Error("recovery id invalid");let N=A===2||A===3?H+e.n:H;if(N>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let V=A&1?"03":"02",te=d.fromHex(V+y(N)),re=u(N),ne=c(-L*re),Q=c(P*re),oe=d.BASE.multiplyAndAddUnsafe(te,ne,Q);if(!oe)throw new Error("point at infinify");return oe.assertValidity(),oe}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return ji(this.toDERHex())}toDERHex(){return zi.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ji(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}let S={isValidPrivateKey(U){try{return a(U),!0}catch{return!1}},normPrivateKeyToScalar:a,randomPrivateKey:()=>{let U=xh(e.n);return ww(e.randomBytes(U),e.n)},precompute(U=8,K=d.BASE){return K._setWindowSize(U),K.multiply(BigInt(3)),K}};function w(U,K=!0){return d.fromPrivateKey(U).toRawBytes(K)}function B(U){let K=mr(U),H=typeof U=="string",P=(K||H)&&U.length;return K?P===i||P===o:H?P===2*i||P===2*o:U instanceof d}function T(U,K,H=!0){if(B(U))throw new Error("first arg must be private key");if(!B(K))throw new Error("second arg must be public key");return d.fromHex(K).multiply(a(U)).toRawBytes(H)}let k=e.bits2int||function(U){let K=gn(U),H=U.length*8-e.nBitLength;return H>0?K>>BigInt(H):K},O=e.bits2int_modN||function(U){return c(k(U))},C=fc(e.nBitLength);function M(U){if(typeof U!="bigint")throw new Error("bigint expected");if(!(En<=U&&U<C))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Bt(U,e.nByteLength)}function $(U,K,H=q){if(["recovered","canonical"].some(be=>be in H))throw new Error("sign() legacy options not supported");let{hash:P,randomBytes:A}=e,{lowS:L,prehash:N,extraEntropy:V}=H;L==null&&(L=!0),U=ke("msgHash",U),N&&(U=ke("prehashed msgHash",P(U)));let te=O(U),re=a(K),ne=[M(re),M(te)];if(V!=null){let be=V===!0?A(r.BYTES):V;ne.push(ke("extraEntropy",be))}let Q=xn(...ne),oe=te;function xe(be){let Fe=k(be);if(!m(Fe))return;let ze=u(Fe),qe=d.BASE.multiply(Fe).toAffine(),it=c(qe.x);if(it===En)return;let Ze=c(ze*c(oe+it*re));if(Ze===En)return;let Jr=(qe.x===it?0:2)|Number(qe.y&ir),kn=Ze;return L&&p(Ze)&&(kn=b(Ze),Jr^=1),new v(it,kn,Jr)}return{seed:Q,k2sig:xe}}let q={lowS:e.lowS,prehash:!1},j={lowS:e.lowS,prehash:!1};function X(U,K,H=q){let{seed:P,k2sig:A}=$(U,K,H),L=e;return yh(L.hash.outputLen,L.nByteLength,L.hmac)(P,A)}d.BASE._setWindowSize(8);function ce(U,K,H,P=j){let A=U;if(K=ke("msgHash",K),H=ke("publicKey",H),"strict"in P)throw new Error("options.strict was renamed to lowS");let{lowS:L,prehash:N}=P,V,te;try{if(typeof A=="string"||mr(A))try{V=v.fromDER(A)}catch(qe){if(!(qe instanceof zi.Err))throw qe;V=v.fromCompact(A)}else if(typeof A=="object"&&typeof A.r=="bigint"&&typeof A.s=="bigint"){let{r:qe,s:it}=A;V=new v(qe,it)}else throw new Error("PARSE");te=d.fromHex(H)}catch(qe){if(qe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(L&&V.hasHighS())return!1;N&&(K=e.hash(K));let{r:re,s:ne}=V,Q=O(K),oe=u(ne),xe=c(Q*oe),be=c(re*oe),Fe=d.BASE.multiplyAndAddUnsafe(te,xe,be)?.toAffine();return Fe?c(Fe.x)===re:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:T,sign:X,verify:ce,ProjectivePoint:d,Signature:v,utils:S}}var iU=l(f(),1);var QO=l(f(),1);var Du=class extends qo{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,cw(e);let n=lc(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return $o(this),this.iHash.update(e),this}digestInto(e){$o(this),dh(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:c}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=c,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},vh=(t,e,r)=>new Du(t,e).update(r).digest();vh.create=(t,e)=>new Du(t,e);function cT(t){return{hash:t,hmac:(e,...r)=>vh(t,e,mu(...r)),randomBytes:Vi}}function Su(t,e){let r=n=>Ew({...t,...cT(n)});return Object.freeze({...r(e),create:r})}var Sw=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),vw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),aT=BigInt(1),Dh=BigInt(2),Dw=(t,e)=>(t+e/Dh)/e;function uT(t){let e=Sw,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),c=BigInt(44),u=BigInt(88),d=t*t*t%e,a=d*d*t%e,h=Re(a,r,e)*a%e,m=Re(h,r,e)*a%e,y=Re(m,Dh,e)*d%e,p=Re(y,i,e)*y%e,b=Re(p,o,e)*p%e,x=Re(b,c,e)*b%e,v=Re(x,u,e)*x%e,S=Re(v,c,e)*b%e,w=Re(S,r,e)*a%e,B=Re(w,s,e)*p%e,T=Re(B,n,e)*d%e,k=Re(T,Dh,e);if(!Sh.eql(Sh.sqr(k),t))throw new Error("Cannot find square root");return k}var Sh=Ho(Sw,void 0,void 0,{sqrt:uT}),kt=Su({a:BigInt(0),b:BigInt(7),Fp:Sh,n:vw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=vw,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-aT*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),c=Dw(o*t,e),u=Dw(-n*t,e),d=Ee(t-c*r-u*i,e),a=Ee(-c*n-u*o,e),h=d>s,m=a>s;if(h&&(d=e-d),m&&(a=e-a),d>s||a>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:d,k2neg:m,k2:a}}}},rr),aU=BigInt(0);var uU=kt.ProjectivePoint;var gU=l(f(),1);var hU=l(f(),1);function Aw(t){let e=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){let i=Object.keys(n).sort(),o={};for(let s of i)o[s]=e(n[s]);return o}return n},r=e(t);return JSON.stringify(r)}var dT=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(a){try{d(n.next(a))}catch(h){s(h)}}function u(a){try{d(n.throw(a))}catch(h){s(h)}}function d(a){a.done?o(a.value):i(a.value).then(c,u)}d((n=n.apply(t,e||[])).next())})},Ah="urn:jwk:";function fe({jwk:t}){return dT(this,void 0,void 0,function*(){let e=t.kty,r;if(e==="EC")r={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if(e==="oct")r={k:t.k,kty:t.kty};else if(e==="OKP")r={crv:t.crv,kty:t.kty,x:t.x};else if(e==="RSA")r={e:t.e,kty:t.kty,n:t.n};else throw new Error(`Unsupported key type: ${e}`);il(r);let n=Aw(r),i=W.string(n).toUint8Array(),o=yield jo.digest({data:i});return W.uint8Array(o).toBase64Url()})}function Fr(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="EC"||typeof t.d!="string"||typeof t.x!="string")}function zo(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t)||"d"in t||t.kty!=="EC"||typeof t.x!="string")}function qr(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="OKP"||typeof t.d!="string"||typeof t.x!="string")}function Wo(t){return!(!t||typeof t!="object"||"d"in t||!("kty"in t&&"crv"in t&&"x"in t)||t.kty!=="OKP"||typeof t.x!="string")}function Tw(t){if(!t||typeof t!="object")return!1;switch(t.kty){case"EC":case"OKP":case"RSA":return"d"in t;case"oct":return"k"in t;default:return!1}}var dt=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(a){try{d(n.next(a))}catch(h){s(h)}}function u(a){try{d(n.throw(a))}catch(h){s(h)}}function d(a){a.done?o(a.value):i(a.value).then(c,u)}d((n=n.apply(t,e||[])).next())})},lT=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Rt=class t{static adjustSignatureToLowS({signature:e}){return dt(this,void 0,void 0,function*(){let r=kt.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return dt(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",d:W.uint8Array(e).toBase64Url(),x:W.uint8Array(r.x).toBase64Url(),y:W.uint8Array(r.y).toBase64Url()};return n.kid=yield fe({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return dt(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",x:W.uint8Array(r.x).toBase64Url(),y:W.uint8Array(r.y).toBase64Url()};return n.kid=yield fe({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return dt(this,void 0,void 0,function*(){return kt.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return dt(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=yield t.getCurvePoint({keyBytes:r}),i={kty:"EC",crv:"secp256k1",x:W.uint8Array(n.x).toBase64Url(),y:W.uint8Array(n.y).toBase64Url()};return i.kid=yield fe({jwk:i}),i})}static convertDerToCompactSignature({derSignature:e}){return dt(this,void 0,void 0,function*(){return kt.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return dt(this,void 0,void 0,function*(){return kt.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return dt(this,void 0,void 0,function*(){let e=kt.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield fe({jwk:r}),r})}static getPublicKey({key:e}){var r;return dt(this,void 0,void 0,function*(){if(!(Fr(e)&&e.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let{d:n}=e,i=lT(e,["d"]);return(r=i.kid)!==null&&r!==void 0||(i.kid=yield fe({jwk:i})),i})}static privateKeyToBytes({privateKey:e}){return dt(this,void 0,void 0,function*(){if(!Fr(e))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return W.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return dt(this,void 0,void 0,function*(){if(!(zo(e)&&e.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");let r=new Uint8Array([4]),n=W.base64Url(e.x).toUint8Array(),i=W.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...i])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return dt(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield t.privateKeyToBytes({privateKey:e}),i=yield t.publicKeyToBytes({publicKey:r});return kt.getSharedSecret(n,i,!0).slice(1)})}static sign({data:e,key:r}){return dt(this,void 0,void 0,function*(){let n=yield t.privateKeyToBytes({privateKey:r}),i=rr(e);return kt.sign(i,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return dt(this,void 0,void 0,function*(){return kt.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return dt(this,void 0,void 0,function*(){try{kt.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return dt(this,void 0,void 0,function*(){let i=yield t.publicKeyToBytes({publicKey:e}),o=rr(n);return kt.verify(r,o,i,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return dt(this,void 0,void 0,function*(){e.byteLength===32&&(e=kt.getPublicKey(e));let r=kt.ProjectivePoint.fromHex(e),n=Bt(r.x,32),i=Bt(r.y,32);return{x:n,y:i}})}};var KU=l(f(),1);var kU=l(f(),1);var _w=Ho(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),fT=_w.create(BigInt("-3")),hT=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),pT=Su({a:fT,b:hT,Fp:_w,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},rr),Ft=pT;var lt=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(a){try{d(n.next(a))}catch(h){s(h)}}function u(a){try{d(n.throw(a))}catch(h){s(h)}}function d(a){a.done?o(a.value):i(a.value).then(c,u)}d((n=n.apply(t,e||[])).next())})},yT=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},qt=class t{static adjustSignatureToLowS({signature:e}){return lt(this,void 0,void 0,function*(){let r=Ft.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return lt(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",d:W.uint8Array(e).toBase64Url(),x:W.uint8Array(r.x).toBase64Url(),y:W.uint8Array(r.y).toBase64Url()};return n.kid=yield fe({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return lt(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",x:W.uint8Array(r.x).toBase64Url(),y:W.uint8Array(r.y).toBase64Url()};return n.kid=yield fe({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return lt(this,void 0,void 0,function*(){return Ft.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return lt(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=yield t.getCurvePoint({keyBytes:r}),i={kty:"EC",crv:"P-256",x:W.uint8Array(n.x).toBase64Url(),y:W.uint8Array(n.y).toBase64Url()};return i.kid=yield fe({jwk:i}),i})}static convertDerToCompactSignature({derSignature:e}){return lt(this,void 0,void 0,function*(){return Ft.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return lt(this,void 0,void 0,function*(){return Ft.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return lt(this,void 0,void 0,function*(){let e=Ft.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield fe({jwk:r}),r})}static getPublicKey({key:e}){var r;return lt(this,void 0,void 0,function*(){if(!(Fr(e)&&e.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let{d:n}=e,i=yT(e,["d"]);return(r=i.kid)!==null&&r!==void 0||(i.kid=yield fe({jwk:i})),i})}static privateKeyToBytes({privateKey:e}){return lt(this,void 0,void 0,function*(){if(!Fr(e))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return W.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return lt(this,void 0,void 0,function*(){if(!(zo(e)&&e.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");let r=new Uint8Array([4]),n=W.base64Url(e.x).toUint8Array(),i=W.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...i])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return lt(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield t.privateKeyToBytes({privateKey:e}),i=yield t.publicKeyToBytes({publicKey:r});return Ft.getSharedSecret(n,i,!0).slice(1)})}static sign({data:e,key:r}){return lt(this,void 0,void 0,function*(){let n=yield t.privateKeyToBytes({privateKey:r}),i=rr(e);return Ft.sign(i,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return lt(this,void 0,void 0,function*(){return Ft.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return lt(this,void 0,void 0,function*(){try{Ft.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return lt(this,void 0,void 0,function*(){let i=yield t.publicKeyToBytes({publicKey:e}),o=rr(n);return Ft.verify(r,o,i,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return lt(this,void 0,void 0,function*(){e.byteLength===32&&(e=Ft.getPublicKey(e));let r=Ft.ProjectivePoint.fromHex(e),n=Bt(r.x,32),i=Bt(r.y,32);return{x:n,y:i}})}};var pc=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(a){try{d(n.next(a))}catch(h){s(h)}}function u(a){try{d(n.throw(a))}catch(h){s(h)}}function d(a){a.done?o(a.value):i(a.value).then(c,u)}d((n=n.apply(t,e||[])).next())})},yc=class extends $r{computePublicKey({key:e}){return pc(this,void 0,void 0,function*(){if(!Fr(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{let r=yield Rt.computePublicKey({key:e});return r.alg="ES256K",r}case"P-256":{let r=yield qt.computePublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return pc(this,void 0,void 0,function*(){switch(e){case"ES256K":case"secp256k1":{let r=yield Rt.generateKey();return r.alg="ES256K",r}case"ES256":case"secp256r1":{let r=yield qt.generateKey();return r.alg="ES256",r}}})}getPublicKey({key:e}){return pc(this,void 0,void 0,function*(){if(!Fr(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{let r=yield Rt.getPublicKey({key:e});return r.alg="ES256K",r}case"P-256":{let r=yield qt.getPublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return pc(this,void 0,void 0,function*(){if(!Fr(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":return yield Rt.sign({key:e,data:r});case"P-256":return yield qt.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return pc(this,void 0,void 0,function*(){if(!zo(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(e.crv){case"secp256k1":return yield Rt.verify({key:e,signature:r,data:n});case"P-256":return yield qt.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}};var PP=l(f(),1);var kP=l(f(),1);var AP=l(f(),1);var YU=l(f(),1);var HU=l(f(),1),Au=BigInt(4294967295),Th=BigInt(32);function Iw(t,e=!1){return e?{h:Number(t&Au),l:Number(t>>Th&Au)}:{h:Number(t>>Th&Au)|0,l:Number(t&Au)|0}}function mT(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:o,l:s}=Iw(t[i],e);[r[i],n[i]]=[o,s]}return[r,n]}var bT=(t,e)=>BigInt(t>>>0)<<Th|BigInt(e>>>0),gT=(t,e,r)=>t>>>r,wT=(t,e,r)=>t<<32-r|e>>>r,xT=(t,e,r)=>t>>>r|e<<32-r,ET=(t,e,r)=>t<<32-r|e>>>r,vT=(t,e,r)=>t<<64-r|e>>>r-32,DT=(t,e,r)=>t>>>r-32|e<<64-r,ST=(t,e)=>e,AT=(t,e)=>t,TT=(t,e,r)=>t<<r|e>>>32-r,_T=(t,e,r)=>e<<r|t>>>32-r,IT=(t,e,r)=>e<<r-32|t>>>64-r,BT=(t,e,r)=>t<<r-32|e>>>64-r;function kT(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}var RT=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),CT=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,OT=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),UT=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,PT=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),LT=(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0;var KT={fromBig:Iw,split:mT,toBig:bT,shrSH:gT,shrSL:wT,rotrSH:xT,rotrSL:ET,rotrBH:vT,rotrBL:DT,rotr32H:ST,rotr32L:AT,rotlSH:TT,rotlSL:_T,rotlBH:IT,rotlBL:BT,add:kT,add3L:RT,add3H:CT,add4L:OT,add4H:UT,add5H:LT,add5L:PT},ue=KT;var[MT,NT]=ue.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Gn=new Uint32Array(80),Jn=new Uint32Array(80),_h=class extends Vo{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:c,Dl:u,Eh:d,El:a,Fh:h,Fl:m,Gh:y,Gl:p,Hh:b,Hl:x}=this;return[e,r,n,i,o,s,c,u,d,a,h,m,y,p,b,x]}set(e,r,n,i,o,s,c,u,d,a,h,m,y,p,b,x){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=c|0,this.Dl=u|0,this.Eh=d|0,this.El=a|0,this.Fh=h|0,this.Fl=m|0,this.Gh=y|0,this.Gl=p|0,this.Hh=b|0,this.Hl=x|0}process(e,r){for(let w=0;w<16;w++,r+=4)Gn[w]=e.getUint32(r),Jn[w]=e.getUint32(r+=4);for(let w=16;w<80;w++){let B=Gn[w-15]|0,T=Jn[w-15]|0,k=ue.rotrSH(B,T,1)^ue.rotrSH(B,T,8)^ue.shrSH(B,T,7),O=ue.rotrSL(B,T,1)^ue.rotrSL(B,T,8)^ue.shrSL(B,T,7),C=Gn[w-2]|0,M=Jn[w-2]|0,$=ue.rotrSH(C,M,19)^ue.rotrBH(C,M,61)^ue.shrSH(C,M,6),q=ue.rotrSL(C,M,19)^ue.rotrBL(C,M,61)^ue.shrSL(C,M,6),j=ue.add4L(O,q,Jn[w-7],Jn[w-16]),X=ue.add4H(j,k,$,Gn[w-7],Gn[w-16]);Gn[w]=X|0,Jn[w]=j|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:c,Cl:u,Dh:d,Dl:a,Eh:h,El:m,Fh:y,Fl:p,Gh:b,Gl:x,Hh:v,Hl:S}=this;for(let w=0;w<80;w++){let B=ue.rotrSH(h,m,14)^ue.rotrSH(h,m,18)^ue.rotrBH(h,m,41),T=ue.rotrSL(h,m,14)^ue.rotrSL(h,m,18)^ue.rotrBL(h,m,41),k=h&y^~h&b,O=m&p^~m&x,C=ue.add5L(S,T,O,NT[w],Jn[w]),M=ue.add5H(C,v,B,k,MT[w],Gn[w]),$=C|0,q=ue.rotrSH(n,i,28)^ue.rotrBH(n,i,34)^ue.rotrBH(n,i,39),j=ue.rotrSL(n,i,28)^ue.rotrBL(n,i,34)^ue.rotrBL(n,i,39),X=n&o^n&c^o&c,ce=i&s^i&u^s&u;v=b|0,S=x|0,b=y|0,x=p|0,y=h|0,p=m|0,{h,l:m}=ue.add(d|0,a|0,M|0,$|0),d=c|0,a=u|0,c=o|0,u=s|0,o=n|0,s=i|0;let U=ue.add3L($,j,ce);n=ue.add3H(U,M,q,X),i=U|0}({h:n,l:i}=ue.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=ue.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:c,l:u}=ue.add(this.Ch|0,this.Cl|0,c|0,u|0),{h:d,l:a}=ue.add(this.Dh|0,this.Dl|0,d|0,a|0),{h,l:m}=ue.add(this.Eh|0,this.El|0,h|0,m|0),{h:y,l:p}=ue.add(this.Fh|0,this.Fl|0,y|0,p|0),{h:b,l:x}=ue.add(this.Gh|0,this.Gl|0,b|0,x|0),{h:v,l:S}=ue.add(this.Hh|0,this.Hl|0,v|0,S|0),this.set(n,i,o,s,c,u,d,a,h,m,y,p,b,x,v,S)}roundClean(){Gn.fill(0),Jn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var Ih=bu(()=>new _h);var tP=l(f(),1);var gr=BigInt(0),Vt=BigInt(1),Tu=BigInt(2),$T=BigInt(8),FT={zip215:!0};function qT(t){let e=hc(t);return nr(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function _u(t){let e=qT(t),{Fp:r,n,prehash:i,hash:o,randomBytes:s,nByteLength:c,h:u}=e,d=Tu<<BigInt(c*8)-Vt,a=r.create,h=e.uvRatio||((P,A)=>{try{return{isValid:!0,value:r.sqrt(P*r.inv(A))}}catch{return{isValid:!1,value:gr}}}),m=e.adjustScalarBytes||(P=>P),y=e.domain||((P,A,L)=>{if(A.length||L)throw new Error("Contexts/pre-hash are not supported");return P}),p=P=>typeof P=="bigint"&&gr<P,b=(P,A)=>p(P)&&p(A)&&P<A,x=P=>P===gr||b(P,d);function v(P,A){if(b(P,A))return P;throw new Error(`Expected valid scalar < ${A}, got ${typeof P} ${P}`)}function S(P){return P===gr?P:v(P,n)}let w=new Map;function B(P){if(!(P instanceof T))throw new Error("ExtendedPoint expected")}class T{constructor(A,L,N,V){if(this.ex=A,this.ey=L,this.ez=N,this.et=V,!x(A))throw new Error("x required");if(!x(L))throw new Error("y required");if(!x(N))throw new Error("z required");if(!x(V))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(A){if(A instanceof T)throw new Error("extended point not allowed");let{x:L,y:N}=A||{};if(!x(L)||!x(N))throw new Error("invalid affine point");return new T(L,N,Vt,a(L*N))}static normalizeZ(A){let L=r.invertBatch(A.map(N=>N.ez));return A.map((N,V)=>N.toAffine(L[V])).map(T.fromAffine)}_setWindowSize(A){this._WINDOW_SIZE=A,w.delete(this)}assertValidity(){let{a:A,d:L}=e;if(this.is0())throw new Error("bad point: ZERO");let{ex:N,ey:V,ez:te,et:re}=this,ne=a(N*N),Q=a(V*V),oe=a(te*te),xe=a(oe*oe),be=a(ne*A),Fe=a(oe*a(be+Q)),ze=a(xe+a(L*a(ne*Q)));if(Fe!==ze)throw new Error("bad point: equation left != right (1)");let qe=a(N*V),it=a(te*re);if(qe!==it)throw new Error("bad point: equation left != right (2)")}equals(A){B(A);let{ex:L,ey:N,ez:V}=this,{ex:te,ey:re,ez:ne}=A,Q=a(L*ne),oe=a(te*V),xe=a(N*ne),be=a(re*V);return Q===oe&&xe===be}is0(){return this.equals(T.ZERO)}negate(){return new T(a(-this.ex),this.ey,this.ez,a(-this.et))}double(){let{a:A}=e,{ex:L,ey:N,ez:V}=this,te=a(L*L),re=a(N*N),ne=a(Tu*a(V*V)),Q=a(A*te),oe=L+N,xe=a(a(oe*oe)-te-re),be=Q+re,Fe=be-ne,ze=Q-re,qe=a(xe*Fe),it=a(be*ze),Ze=a(xe*ze),Jr=a(Fe*be);return new T(qe,it,Jr,Ze)}add(A){B(A);let{a:L,d:N}=e,{ex:V,ey:te,ez:re,et:ne}=this,{ex:Q,ey:oe,ez:xe,et:be}=A;if(L===BigInt(-1)){let Es=a((te-V)*(oe+Q)),Jc=a((te+V)*(oe-Q)),vs=a(Jc-Es);if(vs===gr)return this.double();let Yc=a(re*Tu*be),Xc=a(ne*Tu*xe),Gt=Xc+Yc,Cn=Jc+Es,Ds=Xc-Yc,Zc=a(Gt*vs),si=a(Cn*Ds),Qc=a(Gt*Ds),Rd=a(vs*Cn);return new T(Zc,si,Rd,Qc)}let Fe=a(V*Q),ze=a(te*oe),qe=a(ne*N*be),it=a(re*xe),Ze=a((V+te)*(Q+oe)-Fe-ze),Jr=it-qe,kn=it+qe,xs=a(ze-L*Fe),Gc=a(Ze*Jr),kd=a(kn*xs),Rn=a(Ze*xs),Wt=a(Jr*kn);return new T(Gc,kd,Wt,Rn)}subtract(A){return this.add(A.negate())}wNAF(A){return C.wNAFCached(this,w,A,T.normalizeZ)}multiply(A){let{p:L,f:N}=this.wNAF(v(A,n));return T.normalizeZ([L,N])[0]}multiplyUnsafe(A){let L=S(A);return L===gr?O:this.equals(O)||L===Vt?this:this.equals(k)?this.wNAF(L).p:C.unsafeLadder(this,L)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return C.unsafeLadder(this,n).is0()}toAffine(A){let{ex:L,ey:N,ez:V}=this,te=this.is0();A==null&&(A=te?$T:r.inv(V));let re=a(L*A),ne=a(N*A),Q=a(V*A);if(te)return{x:gr,y:Vt};if(Q!==Vt)throw new Error("invZ was invalid");return{x:re,y:ne}}clearCofactor(){let{h:A}=e;return A===Vt?this:this.multiplyUnsafe(A)}static fromHex(A,L=!1){let{d:N,a:V}=e,te=r.BYTES;A=ke("pointHex",A,te);let re=A.slice(),ne=A[te-1];re[te-1]=ne&-129;let Q=br(re);Q===gr||(L?v(Q,d):v(Q,r.ORDER));let oe=a(Q*Q),xe=a(oe-Vt),be=a(N*oe-V),{isValid:Fe,value:ze}=h(xe,be);if(!Fe)throw new Error("Point.fromHex: invalid y coordinate");let qe=(ze&Vt)===Vt,it=(ne&128)!==0;if(!L&&ze===gr&&it)throw new Error("Point.fromHex: x=0 and x_0=1");return it!==qe&&(ze=a(-ze)),T.fromAffine({x:ze,y:Q})}static fromPrivateKey(A){return q(A).point}toRawBytes(){let{x:A,y:L}=this.toAffine(),N=wn(L,r.BYTES);return N[N.length-1]|=A&Vt?128:0,N}toHex(){return bn(this.toRawBytes())}}T.BASE=new T(e.Gx,e.Gy,Vt,a(e.Gx*e.Gy)),T.ZERO=new T(gr,Vt,Vt,gr);let{BASE:k,ZERO:O}=T,C=vu(T,c*8);function M(P){return Ee(P,n)}function $(P){return M(br(P))}function q(P){let A=c;P=ke("private key",P,A);let L=ke("hashed private key",o(P),2*A),N=m(L.slice(0,A)),V=L.slice(A,2*A),te=$(N),re=k.multiply(te),ne=re.toRawBytes();return{head:N,prefix:V,scalar:te,point:re,pointBytes:ne}}function j(P){return q(P).pointBytes}function X(P=new Uint8Array,...A){let L=xn(...A);return $(o(y(L,ke("context",P),!!i)))}function ce(P,A,L={}){P=ke("message",P),i&&(P=i(P));let{prefix:N,scalar:V,pointBytes:te}=q(A),re=X(L.context,N,P),ne=k.multiply(re).toRawBytes(),Q=X(L.context,ne,te,P),oe=M(re+Q*V);S(oe);let xe=xn(ne,wn(oe,r.BYTES));return ke("result",xe,c*2)}let U=FT;function K(P,A,L,N=U){let{context:V,zip215:te}=N,re=r.BYTES;P=ke("signature",P,2*re),A=ke("message",A),i&&(A=i(A));let ne=br(P.slice(re,2*re)),Q,oe,xe;try{Q=T.fromHex(L,te),oe=T.fromHex(P.slice(0,re),te),xe=k.multiplyUnsafe(ne)}catch{return!1}if(!te&&Q.isSmallOrder())return!1;let be=X(V,oe.toRawBytes(),Q.toRawBytes(),A);return oe.add(Q.multiplyUnsafe(be)).subtract(xe).clearCofactor().equals(T.ZERO)}return k._setWindowSize(8),{CURVE:e,getPublicKey:j,sign:ce,verify:K,ExtendedPoint:T,utils:{getExtendedPublicKey:q,randomPrivateKey:()=>s(r.BYTES),precompute(P=8,A=T.BASE){return A._setWindowSize(P),A.multiply(BigInt(3)),A}}}}var oP=l(f(),1);var mc=BigInt(0),Bh=BigInt(1);function VT(t){return nr(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function Bw(t){let e=VT(t),{P:r}=e,n=w=>Ee(w,r),i=e.montgomeryBits,o=Math.ceil(i/8),s=e.nByteLength,c=e.adjustScalarBytes||(w=>w),u=e.powPminus2||(w=>bh(w,r-BigInt(2),r));function d(w,B,T){let k=n(w*(B-T));return B=n(B-k),T=n(T+k),[B,T]}function a(w){if(typeof w=="bigint"&&mc<=w&&w<r)return w;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}let h=(e.a-BigInt(2))/BigInt(4);function m(w,B){let T=a(w),k=a(B),O=T,C=Bh,M=mc,$=T,q=Bh,j=mc,X;for(let U=BigInt(i-1);U>=mc;U--){let K=k>>U&Bh;j^=K,X=d(j,C,$),C=X[0],$=X[1],X=d(j,M,q),M=X[0],q=X[1],j=K;let H=C+M,P=n(H*H),A=C-M,L=n(A*A),N=P-L,V=$+q,te=$-q,re=n(te*H),ne=n(V*A),Q=re+ne,oe=re-ne;$=n(Q*Q),q=n(O*n(oe*oe)),C=n(P*L),M=n(N*(P+n(h*N)))}X=d(j,C,$),C=X[0],$=X[1],X=d(j,M,q),M=X[0],q=X[1];let ce=u(M);return n(C*ce)}function y(w){return wn(n(w),o)}function p(w){let B=ke("u coordinate",w,o);return s===32&&(B[31]&=127),br(B)}function b(w){let B=ke("scalar",w),T=B.length;if(T!==o&&T!==s)throw new Error(`Expected ${o} or ${s} bytes, got ${T}`);return br(c(B))}function x(w,B){let T=p(B),k=b(w),O=m(T,k);if(O===mc)throw new Error("Invalid private or public key received");return y(O)}let v=y(e.Gu);function S(w){return x(w,v)}return{scalarMult:x,scalarMultBase:S,getSharedSecret:(w,B)=>x(w,B),getPublicKey:w=>S(w),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:v}}var bc=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),kw=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),lP=BigInt(0),jT=BigInt(1),kh=BigInt(2),HT=BigInt(5),Rw=BigInt(10),zT=BigInt(20),WT=BigInt(40),Cw=BigInt(80);function Ow(t){let e=bc,n=t*t%e*t%e,i=Re(n,kh,e)*n%e,o=Re(i,jT,e)*t%e,s=Re(o,HT,e)*o%e,c=Re(s,Rw,e)*s%e,u=Re(c,zT,e)*c%e,d=Re(u,WT,e)*u%e,a=Re(d,Cw,e)*d%e,h=Re(a,Cw,e)*d%e,m=Re(h,Rw,e)*s%e;return{pow_p_5_8:Re(m,kh,e)*t%e,b2:n}}function Uw(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function GT(t,e){let r=bc,n=Ee(e*e*e,r),i=Ee(n*n*e,r),o=Ow(t*i).pow_p_5_8,s=Ee(t*n*o,r),c=Ee(e*s*s,r),u=s,d=Ee(s*kw,r),a=c===t,h=c===Ee(-t,r),m=c===Ee(-t*kw,r);return a&&(s=u),(h||m)&&(s=d),mw(s,r)&&(s=Ee(-s,r)),{isValid:a||h,value:s}}var or=Ho(bc,void 0,!0),gc={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:or,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Ih,randomBytes:Vi,adjustScalarBytes:Uw,uvRatio:GT},Yn=_u(gc);function Pw(t,e,r){if(e.length>255)throw new Error("Context is too big");return mu(lh("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,e.length]),e,t)}var fP=_u({...gc,domain:Pw}),hP=_u({...gc,domain:Pw,prehash:Ih}),Wi=Bw({P:bc,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{let e=bc,{pow_p_5_8:r,b2:n}=Ow(t);return Ee(Re(r,BigInt(3),e)*n,e)},adjustScalarBytes:Uw,randomBytes:Vi});function Lw(t){let{y:e}=Yn.ExtendedPoint.fromHex(t),r=BigInt(1);return or.toBytes(or.create((r+e)*or.inv(r-e)))}function Kw(t){let e=gc.hash(t.subarray(0,32));return gc.adjustScalarBytes(e).subarray(0,32)}var JT=(or.ORDER+BigInt(3))/BigInt(8),pP=or.pow(kh,JT),yP=or.sqrt(or.neg(or.ONE)),mP=(or.ORDER-BigInt(5))/BigInt(8),bP=BigInt(486662);var gP=bw(or,or.neg(BigInt(486664)));var wP=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),xP=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),EP=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),vP=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");var DP=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var sr=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(a){try{d(n.next(a))}catch(h){s(h)}}function u(a){try{d(n.throw(a))}catch(h){s(h)}}function d(a){a.done?o(a.value):i(a.value).then(c,u)}d((n=n.apply(t,e||[])).next())})},YT=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},st=class t{static bytesToPrivateKey({privateKeyBytes:e}){return sr(this,void 0,void 0,function*(){let r=Yn.getPublicKey(e),n={crv:"Ed25519",d:W.uint8Array(e).toBase64Url(),kty:"OKP",x:W.uint8Array(r).toBase64Url()};return n.kid=yield fe({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return sr(this,void 0,void 0,function*(){let r={kty:"OKP",crv:"Ed25519",x:W.uint8Array(e).toBase64Url()};return r.kid=yield fe({jwk:r}),r})}static computePublicKey({key:e}){return sr(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=Yn.getPublicKey(r),i={kty:"OKP",crv:"Ed25519",x:W.uint8Array(n).toBase64Url()};return i.kid=yield fe({jwk:i}),i})}static convertPrivateKeyToX25519({privateKey:e}){return sr(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=Kw(r),i=Wi.getPublicKey(n),o={kty:"OKP",crv:"X25519",d:W.uint8Array(n).toBase64Url(),x:W.uint8Array(i).toBase64Url()};return o.kid=yield fe({jwk:o}),o})}static convertPublicKeyToX25519({publicKey:e}){return sr(this,void 0,void 0,function*(){let r=yield t.publicKeyToBytes({publicKey:e});if(!(yield t.validatePublicKey({publicKeyBytes:r})))throw new Error("Ed25519: Invalid public key.");let i=Lw(r),o={kty:"OKP",crv:"X25519",x:W.uint8Array(i).toBase64Url()};return o.kid=yield fe({jwk:o}),o})}static generateKey(){return sr(this,void 0,void 0,function*(){let e=Yn.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield fe({jwk:r}),r})}static getPublicKey({key:e}){var r;return sr(this,void 0,void 0,function*(){if(!(qr(e)&&e.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let{d:n}=e,i=YT(e,["d"]);return(r=i.kid)!==null&&r!==void 0||(i.kid=yield fe({jwk:i})),i})}static privateKeyToBytes({privateKey:e}){return sr(this,void 0,void 0,function*(){if(!qr(e))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return W.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return sr(this,void 0,void 0,function*(){if(!Wo(e))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return W.base64Url(e.x).toUint8Array()})}static sign({key:e,data:r}){return sr(this,void 0,void 0,function*(){let n=yield t.privateKeyToBytes({privateKey:e});return Yn.sign(r,n)})}static validatePublicKey({publicKeyBytes:e}){return sr(this,void 0,void 0,function*(){try{Yn.ExtendedPoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return sr(this,void 0,void 0,function*(){let i=yield t.publicKeyToBytes({publicKey:e});return Yn.verify(r,n,i)})}};var wc=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(a){try{d(n.next(a))}catch(h){s(h)}}function u(a){try{d(n.throw(a))}catch(h){s(h)}}function d(a){a.done?o(a.value):i(a.value).then(c,u)}d((n=n.apply(t,e||[])).next())})},Iu=class extends $r{computePublicKey({key:e}){return wc(this,void 0,void 0,function*(){if(!qr(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{let r=yield st.computePublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return wc(this,void 0,void 0,function*(){switch(e){case"Ed25519":{let r=yield st.generateKey();return r.alg="EdDSA",r}}})}getPublicKey({key:e}){return wc(this,void 0,void 0,function*(){if(!qr(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{let r=yield st.getPublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return wc(this,void 0,void 0,function*(){if(!qr(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":return yield st.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return wc(this,void 0,void 0,function*(){if(!Wo(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(e.crv){case"Ed25519":return yield st.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}};var vn=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(a){try{d(n.next(a))}catch(h){s(h)}}function u(a){try{d(n.throw(a))}catch(h){s(h)}}function d(a){a.done?o(a.value):i(a.value).then(c,u)}d((n=n.apply(t,e||[])).next())})},Rh={Ed25519:{implementation:Iu,names:["Ed25519"]},secp256k1:{implementation:yc,names:["ES256K","secp256k1"]},secp256r1:{implementation:yc,names:["ES256","secp256r1"]},"SHA-256":{implementation:gu,names:["SHA-256"]}},wt=class{constructor(e){var r;this._algorithmInstances=new Map,this._keyStore=(r=e?.keyStore)!==null&&r!==void 0?r:new Ka}digest({algorithm:e,data:r}){return vn(this,void 0,void 0,function*(){return yield this.getAlgorithm({algorithm:e}).digest({algorithm:e,data:r})})}exportKey({keyUri:e}){return vn(this,void 0,void 0,function*(){return yield this.getPrivateKey({keyUri:e})})}generateKey({algorithm:e}){return vn(this,void 0,void 0,function*(){let n=yield this.getAlgorithm({algorithm:e}).generateKey({algorithm:e});if(n?.kid===void 0)throw new Error("Generated key is missing a required property: kid");let i=`${Ah}${n.kid}`;return yield this._keyStore.set(i,n),i})}getKeyUri({key:e}){return vn(this,void 0,void 0,function*(){let r=yield fe({jwk:e});return`${Ah}${r}`})}getPublicKey({keyUri:e}){return vn(this,void 0,void 0,function*(){let r=yield this.getPrivateKey({keyUri:e}),n=this.getAlgorithmName({key:r});return yield this.getAlgorithm({algorithm:n}).getPublicKey({key:r})})}importKey({key:e}){var r;return vn(this,void 0,void 0,function*(){if(!Tw(e))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");let n=structuredClone(e);(r=n.kid)!==null&&r!==void 0||(n.kid=yield fe({jwk:n}));let i=yield this.getKeyUri({key:n});return yield this._keyStore.set(i,n),i})}sign({keyUri:e,data:r}){return vn(this,void 0,void 0,function*(){let n=yield this.getPrivateKey({keyUri:e}),i=this.getAlgorithmName({key:n});return this.getAlgorithm({algorithm:i}).sign({data:r,key:n})})}verify({key:e,signature:r,data:n}){return vn(this,void 0,void 0,function*(){let i=this.getAlgorithmName({key:e});return this.getAlgorithm({algorithm:i}).verify({key:e,signature:r,data:n})})}getAlgorithm({algorithm:e}){var r;let n=(r=Rh[e])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${e}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:e}){let r=e.alg,n=e.crv;for(let i in Rh){let o=Rh[i];if(r&&o.names.includes(r))return i;if(n&&o.names.includes(n))return i}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey({keyUri:e}){return vn(this,void 0,void 0,function*(){let r=yield this._keyStore.get(e);if(!r)throw new Error(`Key not found: ${e}`);return r})}};var Bu={};Je(Bu,{checkRequiredProperty:()=>XT,checkValidProperty:()=>ZT,getJoseSignatureAlgorithmFromPublicKey:()=>QT,isWebCryptoSupported:()=>e5,randomBytes:()=>t5,randomUuid:()=>r5});var HP=l(f(),1);function XT(t){if(!t||t.property===void 0||t.inObject===void 0)throw new TypeError("One or more required parameters missing: 'property, properties'");let{property:e,inObject:r}=t;if(!(e in r))throw new TypeError(`Required parameter missing: '${e}'`)}function ZT(t){if(!t||t.property===void 0||t.allowedProperties===void 0)throw new TypeError("One or more required parameters missing: 'property, allowedProperties'");let{property:e,allowedProperties:r}=t;if(Array.isArray(r)&&!r.includes(e)||r instanceof Set&&!r.has(e)||r instanceof Map&&!r.has(e)){let n=Array.from(r instanceof Map?r.keys():r).join(", ");throw new TypeError(`Out of range: '${e}'. Must be one of '${n}'`)}}function QT(t){let e={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(t.alg&&Object.values(e).includes(t.alg))return t.alg;if(t.crv&&Object.keys(e).includes(t.crv))return e[t.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${t.alg}, crv=${t.crv}. Supported 'alg' values: ${Object.values(e).join(", ")}. Supported 'crv' values: ${Object.keys(e).join(", ")}.`)}function e5(){return!!(globalThis.crypto&&globalThis.crypto.subtle)}function t5(t){return Vi(t)}function r5(){return Fo.randomUUID()}var hL=l(f(),1);var aL=l(f(),1);var nL=l(f(),1);var WP=l(f(),1),n5=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var JP=l(f(),1);var Dn=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));function Mw(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var Nw=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),i5=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!i5)throw new Error("Non little-endian hardware is not supported");function ku(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Ru(t){if(typeof t=="string")t=ku(t);else if(Mw(t))t=t.slice();else throw new Error(`expected Uint8Array, got ${typeof t}`);return t}var o5=t=>Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object;function $w(t,e){if(e!==void 0&&(typeof e!="object"||!o5(e)))throw new Error("options must be object or undefined");return Object.assign(t,e)}function Gi(t,e){if(!Mw(t))throw new Error("Uint8Array expected");if(typeof e=="number"&&t.length!==e)throw new Error(`Uint8Array length ${e} expected`)}function Fw(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}var Ch=(t,e)=>(Object.assign(e,t),e);function Oh(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),c=Number(r&o),u=n?4:0,d=n?0:4;t.setUint32(e+u,s,n),t.setUint32(e+d,c,n)}var XP=l(f(),1);function xc(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`wrong positive integer: ${t}`)}function Uh(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function s5(t){return t!=null&&typeof t=="object"&&(t instanceof Uint8Array||t.constructor.name==="Uint8Array")}function Go(t,...e){if(!s5(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function Ph(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function qw(t,e){Go(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var DL=l(f(),1);var gL=l(f(),1);var SL=l(f(),1);var AL=l(f(),1);var TL=l(f(),1);var BL=l(f(),1);var RL=l(f(),1);var LL=l(f(),1);var Xn=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(a){try{d(n.next(a))}catch(h){s(h)}}function u(a){try{d(n.throw(a))}catch(h){s(h)}}function d(a){a.done?o(a.value):i(a.value).then(c,u)}d((n=n.apply(t,e||[])).next())})},c5=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Cu=class t{static bytesToPrivateKey({privateKeyBytes:e}){return Xn(this,void 0,void 0,function*(){let r=Wi.getPublicKey(e),n={kty:"OKP",crv:"X25519",d:W.uint8Array(e).toBase64Url(),x:W.uint8Array(r).toBase64Url()};return n.kid=yield fe({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return Xn(this,void 0,void 0,function*(){let r={kty:"OKP",crv:"X25519",x:W.uint8Array(e).toBase64Url()};return r.kid=yield fe({jwk:r}),r})}static computePublicKey({key:e}){return Xn(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=Wi.getPublicKey(r),i={kty:"OKP",crv:"X25519",x:W.uint8Array(n).toBase64Url()};return i.kid=yield fe({jwk:i}),i})}static generateKey(){return Xn(this,void 0,void 0,function*(){let e=Wi.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield fe({jwk:r}),r})}static getPublicKey({key:e}){var r;return Xn(this,void 0,void 0,function*(){if(!(qr(e)&&e.crv==="X25519"))throw new Error("X25519: The provided key is not an X25519 private JWK.");let{d:n}=e,i=c5(e,["d"]);return(r=i.kid)!==null&&r!==void 0||(i.kid=yield fe({jwk:i})),i})}static privateKeyToBytes({privateKey:e}){return Xn(this,void 0,void 0,function*(){if(!qr(e))throw new Error("X25519: The provided key is not a valid OKP private key.");return W.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return Xn(this,void 0,void 0,function*(){if(!Wo(e))throw new Error("X25519: The provided key is not a valid OKP public key.");return W.base64Url(e.x).toUint8Array()})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return Xn(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("X25519: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield t.privateKeyToBytes({privateKey:e}),i=yield t.publicKeyToBytes({publicKey:r});return Wi.getSharedSecret(n,i)})}};var rK=l(f(),1);var YL=l(f(),1);var $L=l(f(),1);var ft=(t,e)=>t[e++]&255|(t[e++]&255)<<8,Mh=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Ru(e),Gi(e,32);let r=ft(e,0),n=ft(e,2),i=ft(e,4),o=ft(e,6),s=ft(e,8),c=ft(e,10),u=ft(e,12),d=ft(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|o<<9)&8191,this.r[4]=(o>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|c<<2)&8191,this.r[7]=(c>>>11|u<<5)&8065,this.r[8]=(u>>>8|d<<8)&8191,this.r[9]=d>>>5&127;for(let a=0;a<8;a++)this.pad[a]=ft(e,16+2*a)}process(e,r,n=!1){let i=n?0:2048,{h:o,r:s}=this,c=s[0],u=s[1],d=s[2],a=s[3],h=s[4],m=s[5],y=s[6],p=s[7],b=s[8],x=s[9],v=ft(e,r+0),S=ft(e,r+2),w=ft(e,r+4),B=ft(e,r+6),T=ft(e,r+8),k=ft(e,r+10),O=ft(e,r+12),C=ft(e,r+14),M=o[0]+(v&8191),$=o[1]+((v>>>13|S<<3)&8191),q=o[2]+((S>>>10|w<<6)&8191),j=o[3]+((w>>>7|B<<9)&8191),X=o[4]+((B>>>4|T<<12)&8191),ce=o[5]+(T>>>1&8191),U=o[6]+((T>>>14|k<<2)&8191),K=o[7]+((k>>>11|O<<5)&8191),H=o[8]+((O>>>8|C<<8)&8191),P=o[9]+(C>>>5|i),A=0,L=A+M*c+$*(5*x)+q*(5*b)+j*(5*p)+X*(5*y);A=L>>>13,L&=8191,L+=ce*(5*m)+U*(5*h)+K*(5*a)+H*(5*d)+P*(5*u),A+=L>>>13,L&=8191;let N=A+M*u+$*c+q*(5*x)+j*(5*b)+X*(5*p);A=N>>>13,N&=8191,N+=ce*(5*y)+U*(5*m)+K*(5*h)+H*(5*a)+P*(5*d),A+=N>>>13,N&=8191;let V=A+M*d+$*u+q*c+j*(5*x)+X*(5*b);A=V>>>13,V&=8191,V+=ce*(5*p)+U*(5*y)+K*(5*m)+H*(5*h)+P*(5*a),A+=V>>>13,V&=8191;let te=A+M*a+$*d+q*u+j*c+X*(5*x);A=te>>>13,te&=8191,te+=ce*(5*b)+U*(5*p)+K*(5*y)+H*(5*m)+P*(5*h),A+=te>>>13,te&=8191;let re=A+M*h+$*a+q*d+j*u+X*c;A=re>>>13,re&=8191,re+=ce*(5*x)+U*(5*b)+K*(5*p)+H*(5*y)+P*(5*m),A+=re>>>13,re&=8191;let ne=A+M*m+$*h+q*a+j*d+X*u;A=ne>>>13,ne&=8191,ne+=ce*c+U*(5*x)+K*(5*b)+H*(5*p)+P*(5*y),A+=ne>>>13,ne&=8191;let Q=A+M*y+$*m+q*h+j*a+X*d;A=Q>>>13,Q&=8191,Q+=ce*u+U*c+K*(5*x)+H*(5*b)+P*(5*p),A+=Q>>>13,Q&=8191;let oe=A+M*p+$*y+q*m+j*h+X*a;A=oe>>>13,oe&=8191,oe+=ce*d+U*u+K*c+H*(5*x)+P*(5*b),A+=oe>>>13,oe&=8191;let xe=A+M*b+$*p+q*y+j*m+X*h;A=xe>>>13,xe&=8191,xe+=ce*a+U*d+K*u+H*c+P*(5*x),A+=xe>>>13,xe&=8191;let be=A+M*x+$*b+q*p+j*y+X*m;A=be>>>13,be&=8191,be+=ce*h+U*a+K*d+H*u+P*c,A+=be>>>13,be&=8191,A=(A<<2)+A|0,A=A+L|0,L=A&8191,A=A>>>13,N+=A,o[0]=L,o[1]=N,o[2]=V,o[3]=te,o[4]=re,o[5]=ne,o[6]=Q,o[7]=oe,o[8]=xe,o[9]=be}finalize(){let{h:e,pad:r}=this,n=new Uint16Array(10),i=e[1]>>>13;e[1]&=8191;for(let c=2;c<10;c++)e[c]+=i,i=e[c]>>>13,e[c]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let c=1;c<10;c++)n[c]=e[c]+i,i=n[c]>>>13,n[c]&=8191;n[9]-=8192;let o=(i^1)-1;for(let c=0;c<10;c++)n[c]&=o;o=~o;for(let c=0;c<10;c++)e[c]=e[c]&o|n[c];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let s=e[0]+r[0];e[0]=s&65535;for(let c=1;c<8;c++)s=(e[c]+r[c]|0)+(s>>>16)|0,e[c]=s&65535}update(e){Ph(this);let{buffer:r,blockLen:n}=this;e=Ru(e);let i=e.length;for(let o=0;o<i;){let s=Math.min(n-this.pos,i-o);if(s===n){for(;n<=i-o;o+=n)this.process(e,o);continue}r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){Ph(this),qw(e,this),this.finished=!0;let{buffer:r,h:n}=this,{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let o=0;for(let s=0;s<8;s++)e[o++]=n[s]>>>0,e[o++]=n[s]>>>8;return e}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}};function a5(t){let e=(n,i)=>t(i).update(Ru(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}var Vw=a5(t=>new Mh(t));var jL=l(f(),1);var u5=ku("expand 16-byte k"),d5=ku("expand 32-byte k"),l5=Dn(u5),f5=Dn(d5);function G(t,e){return t<<e|t>>>32-e}function Nh(t){return t.byteOffset%4===0}var Ou=64,h5=16,Hw=2**32-1,jw=new Uint32Array;function p5(t,e,r,n,i,o,s,c){let u=i.length,d=new Uint8Array(Ou),a=Dn(d),h=Nh(i)&&Nh(o),m=h?Dn(i):jw,y=h?Dn(o):jw;for(let p=0;p<u;s++){if(t(e,r,n,a,s,c),s>=Hw)throw new Error("arx: counter overflow");let b=Math.min(Ou,u-p);if(h&&b===Ou){let x=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let v=0,S;v<h5;v++)S=x+v,y[S]=m[S]^a[v];p+=Ou;continue}for(let x=0,v;x<b;x++)v=p+x,o[v]=i[v]^d[x];p+=b}}function $h(t,e){let{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:o,rounds:s}=$w({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return xc(i),xc(s),Uh(o),Uh(r),(c,u,d,a,h=0)=>{Go(c),Go(u),Go(d);let m=d.length;if(a||(a=new Uint8Array(m)),Go(a),xc(h),h<0||h>=Hw)throw new Error("arx: counter overflow");if(a.length<m)throw new Error(`arx: output (${a.length}) is shorter than data (${m})`);let y=[],p=c.length,b,x;if(p===32)b=c.slice(),y.push(b),x=f5;else if(p===16&&r)b=new Uint8Array(32),b.set(c),b.set(c,16),x=l5,y.push(b);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);Nh(u)||(u=u.slice(),y.push(u));let v=Dn(b);if(n){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(x,v,Dn(u.subarray(0,16)),v),u=u.subarray(16)}let S=16-i;if(S!==u.length)throw new Error(`arx: nonce must be ${S} or 16 bytes`);if(S!==12){let B=new Uint8Array(12);B.set(u,o?0:12-u.length),u=B,y.push(u)}let w=Dn(u);for(p5(t,x,v,w,d,a,h,s);y.length>0;)y.pop().fill(0);return a}}function Gw(t,e,r,n,i,o=20){let s=t[0],c=t[1],u=t[2],d=t[3],a=e[0],h=e[1],m=e[2],y=e[3],p=e[4],b=e[5],x=e[6],v=e[7],S=i,w=r[0],B=r[1],T=r[2],k=s,O=c,C=u,M=d,$=a,q=h,j=m,X=y,ce=p,U=b,K=x,H=v,P=S,A=w,L=B,N=T;for(let te=0;te<o;te+=2)k=k+$|0,P=G(P^k,16),ce=ce+P|0,$=G($^ce,12),k=k+$|0,P=G(P^k,8),ce=ce+P|0,$=G($^ce,7),O=O+q|0,A=G(A^O,16),U=U+A|0,q=G(q^U,12),O=O+q|0,A=G(A^O,8),U=U+A|0,q=G(q^U,7),C=C+j|0,L=G(L^C,16),K=K+L|0,j=G(j^K,12),C=C+j|0,L=G(L^C,8),K=K+L|0,j=G(j^K,7),M=M+X|0,N=G(N^M,16),H=H+N|0,X=G(X^H,12),M=M+X|0,N=G(N^M,8),H=H+N|0,X=G(X^H,7),k=k+q|0,N=G(N^k,16),K=K+N|0,q=G(q^K,12),k=k+q|0,N=G(N^k,8),K=K+N|0,q=G(q^K,7),O=O+j|0,P=G(P^O,16),H=H+P|0,j=G(j^H,12),O=O+j|0,P=G(P^O,8),H=H+P|0,j=G(j^H,7),C=C+X|0,A=G(A^C,16),ce=ce+A|0,X=G(X^ce,12),C=C+X|0,A=G(A^C,8),ce=ce+A|0,X=G(X^ce,7),M=M+$|0,L=G(L^M,16),U=U+L|0,$=G($^U,12),M=M+$|0,L=G(L^M,8),U=U+L|0,$=G($^U,7);let V=0;n[V++]=s+k|0,n[V++]=c+O|0,n[V++]=u+C|0,n[V++]=d+M|0,n[V++]=a+$|0,n[V++]=h+q|0,n[V++]=m+j|0,n[V++]=y+X|0,n[V++]=p+ce|0,n[V++]=b+U|0,n[V++]=x+K|0,n[V++]=v+H|0,n[V++]=S+P|0,n[V++]=w+A|0,n[V++]=B+L|0,n[V++]=T+N|0}function y5(t,e,r,n){let i=t[0],o=t[1],s=t[2],c=t[3],u=e[0],d=e[1],a=e[2],h=e[3],m=e[4],y=e[5],p=e[6],b=e[7],x=r[0],v=r[1],S=r[2],w=r[3];for(let T=0;T<20;T+=2)i=i+u|0,x=G(x^i,16),m=m+x|0,u=G(u^m,12),i=i+u|0,x=G(x^i,8),m=m+x|0,u=G(u^m,7),o=o+d|0,v=G(v^o,16),y=y+v|0,d=G(d^y,12),o=o+d|0,v=G(v^o,8),y=y+v|0,d=G(d^y,7),s=s+a|0,S=G(S^s,16),p=p+S|0,a=G(a^p,12),s=s+a|0,S=G(S^s,8),p=p+S|0,a=G(a^p,7),c=c+h|0,w=G(w^c,16),b=b+w|0,h=G(h^b,12),c=c+h|0,w=G(w^c,8),b=b+w|0,h=G(h^b,7),i=i+d|0,w=G(w^i,16),p=p+w|0,d=G(d^p,12),i=i+d|0,w=G(w^i,8),p=p+w|0,d=G(d^p,7),o=o+a|0,x=G(x^o,16),b=b+x|0,a=G(a^b,12),o=o+a|0,x=G(x^o,8),b=b+x|0,a=G(a^b,7),s=s+h|0,v=G(v^s,16),m=m+v|0,h=G(h^m,12),s=s+h|0,v=G(v^s,8),m=m+v|0,h=G(h^m,7),c=c+u|0,S=G(S^c,16),y=y+S|0,u=G(u^y,12),c=c+u|0,S=G(S^c,8),y=y+S|0,u=G(u^y,7);let B=0;n[B++]=i,n[B++]=o,n[B++]=s,n[B++]=c,n[B++]=x,n[B++]=v,n[B++]=S,n[B++]=w}var m5=$h(Gw,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Jw=$h(Gw,{counterRight:!1,counterLength:8,extendNonceFn:y5,allowShortKeys:!1});var b5=new Uint8Array(16),zw=(t,e)=>{t.update(e);let r=e.length%16;r&&t.update(b5.subarray(r))},g5=new Uint8Array(32);function Ww(t,e,r,n,i){let o=t(e,r,g5),s=Vw.create(o);i&&zw(s,i),zw(s,n);let c=new Uint8Array(16),u=Nw(c);Oh(u,0,BigInt(i?i.length:0),!0),Oh(u,8,BigInt(n.length),!0),s.update(c);let d=s.digest();return o.fill(0),d}var Yw=t=>(e,r,n)=>(Gi(e,32),Gi(r),{encrypt:(o,s)=>{let c=o.length,u=c+16;s?Gi(s,u):s=new Uint8Array(u),t(e,r,o,s,1);let d=Ww(t,e,r,s.subarray(0,-16),n);return s.set(d,c),s},decrypt:(o,s)=>{let c=o.length,u=c-16;if(c<16)throw new Error("encrypted data must be at least 16 bytes");s?Gi(s,u):s=new Uint8Array(u);let d=o.subarray(0,-16),a=o.subarray(-16),h=Ww(t,e,r,d,n);if(!Fw(a,h))throw new Error("invalid tag");return t(e,r,d,s,1),s}}),GL=Ch({blockSize:64,nonceLength:12,tagLength:16},Yw(m5)),w5=Ch({blockSize:64,nonceLength:24,tagLength:16},Yw(Jw));var aK=l(f(),1);var Vh={};Je(Vh,{extractDidFragment:()=>Ct,getServices:()=>x5,getVerificationMethodByKey:()=>E5,getVerificationMethodTypes:()=>Fh,getVerificationMethods:()=>Ec,getVerificationRelationshipsById:()=>qh,isDidService:()=>Xw,isDidVerificationMethod:()=>Uu,isDwnDidService:()=>v5,keyBytesToMultibaseId:()=>Pu,multibaseIdToKeyBytes:()=>Lu});var FK=l(f(),1);function Ct(t){if(typeof t=="string"&&t.length!==0)return t.split("#").pop()}function x5({didDocument:t,id:e,type:r}){return t?.service?.filter(n=>!(e&&n.id!==e||r&&n.type!==r))??[]}async function E5({didDocument:t,publicKeyJwk:e,publicKeyMultibase:r}){let n=Ec({didDocument:t});for(let i of n)if(e&&i.publicKeyJwk){if(await fe({jwk:e})===await fe({jwk:i.publicKeyJwk}))return i}else if(r&&i.publicKeyMultibase&&r===i.publicKeyMultibase)return i;return null}function Ec({didDocument:t}){if(!t)throw new TypeError("Required parameter missing: 'didDocument'");let e=[];return e.push(...t.verificationMethod?.filter(Uu)??[]),Object.keys(fi).forEach(r=>{e.push(...t[r]?.filter(Uu)??[])}),e}function Fh({didDocument:t}){let r=Ec({didDocument:t}).map(n=>n.type);return[...new Set(r)]}function qh({didDocument:t,methodId:e}){let r=[];return Object.keys(fi).forEach(n=>{if(Array.isArray(t[n])){let i=t[n],o=Ct(e);i.some(c=>{let u=Ct(c)===o,d=Uu(c)&&Ct(c.id)===o;return u||d})&&r.push(n)}}),r}function Xw(t){return!t||typeof t!="object"||t===null?!1:"id"in t&&"type"in t&&"serviceEndpoint"in t}function v5(t){if(!Xw(t)||t.type!=="DecentralizedWebNode"||!("enc"in t&&"sig"in t))return!1;let e=r=>typeof r=="string"||Array.isArray(r)&&r.every(n=>typeof n=="string");return e(t.enc)&&e(t.sig)}function Uu(t){return!(!t||typeof t!="object"||t===null||!("id"in t&&"type"in t&&"controller"in t)||typeof t.id!="string"||typeof t.type!="string"||typeof t.controller!="string")}function Pu({keyBytes:t,multicodecCode:e,multicodecName:r}){let n=bt.addPrefix({code:e,data:t,name:r}),i=W.uint8Array(n).toBase58Btc();return W.base58Btc(i).toMultibase()}function Lu({multibaseKeyId:t}){try{let e=W.multibase(t).toBase58Btc(),r=W.base58Btc(e).toUint8Array(),{code:n,data:i,name:o}=bt.removePrefix({prefixedData:r});return{keyBytes:i,multicodecCode:n,multicodecName:o}}catch{throw new Y("invalidDid",`Invalid multibase identifier: ${t}`)}}var Dt=class t{constructor({uri:e,document:r,metadata:n,keyManager:i}){this.uri=e,this.document=r,this.metadata=n,this.keyManager=i}async export(){if(!(Array.isArray(this.document.verificationMethod)&&this.document.verificationMethod.length>0))throw new Error(`DID document for '${this.uri}' is missing verification methods`);let e={uri:this.uri,document:this.document,metadata:this.metadata};if("exportKey"in this.keyManager&&typeof this.keyManager.exportKey=="function"){let r=[];for(let n of this.document.verificationMethod){if(!n.publicKeyJwk)throw new Error(`Verification method '${n.id}' does not contain a public key in JWK format`);let i=await this.keyManager.getKeyUri({key:n.publicKeyJwk}),o=await this.keyManager.exportKey({keyUri:i});r.push({...o})}e.privateKeys=r}return e}async getSigner(e){let r=this.document.verificationMethod?.find(c=>Ct(c.id)===(Ct(e?.methodId)??Ct(this.document.assertionMethod?.[0])));if(!(r&&r.publicKeyJwk))throw new Y("internalError","A verification method intended for signing could not be determined from the DID Document");let n=await this.keyManager.getKeyUri({key:r.publicKeyJwk}),i=await this.keyManager.getPublicKey({keyUri:n}),o=this.keyManager;return{algorithm:Bu.getJoseSignatureAlgorithmFromPublicKey(i),keyId:r.id,async sign({data:c}){return await o.sign({data:c,keyUri:n})},async verify({data:c,signature:u}){return await o.verify({data:c,key:i,signature:u})}}}static async import({portableDid:e,keyManager:r=new wt}){let n=Ec({didDocument:e.document});if(n.length===0)throw new Y("invalidDidDocument","At least one verification method is required but 0 were given");for(let o of e.privateKeys??[])await r.importKey({key:o});for(let o of n){if(!o.publicKeyJwk)throw new Error(`Verification method '${o.id}' does not contain a public key in JWK format`);let s=await r.getKeyUri({key:o.publicKeyJwk});await r.getPublicKey({keyUri:s})}return new t({uri:e.uri,document:e.document,metadata:e.metadata,keyManager:r})}};var JM=l(f(),1);var DM=l(f(),1);var lM=l(f(),1);var iM=l(f(),1);var GK=l(f(),1);var jh="0123456789abcdef",Qw=[],Zw=[];for(let t=0;t<256;t++)Qw[t]=jh[t>>4&15]+jh[t&15],t<16&&(t<10?Zw[48+t]=t:Zw[87+t]=t);var Hh=t=>{let e=t.length,r="",n=0;for(;n<e;)r+=Qw[t[n++]];return r};var ex=(t,e=0)=>{let r=t.length||0;if(!e){let s=r;for(;s--;)e+=t[s].length}let n=new Uint8Array(e),i=e,o=r;for(;o--;)i-=t[o].length,n.set(t[o],i);return n};var YK=l(f()),tx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D5=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(vc=0;vc<tx.length;vc++)D5[tx.charCodeAt(vc)]=vc;var vc;var S5=new TextDecoder,zh=(t,e)=>e?new TextDecoder(e).decode(t):S5.decode(t),A5=new TextEncoder,cr=t=>A5.encode(t);var rx=typeof window<"u"?window:self,nx=rx.crypto||rx.msCrypto||{},rM=nx.subtle||nx.webkitSubtle;var cM=l(f(),1);function Jo(t){let e=t<0?1:0;return t=Math.abs(Number(t||1)),Math.floor(Math.log10(t))+1+e}function Ku(t){return ArrayBuffer.isView(t)?"arraybufferview":Array.isArray(t)?"array":t instanceof Number?"number":t instanceof Boolean?"boolean":t instanceof Set?"set":t instanceof Map?"map":t instanceof String?"string":t instanceof ArrayBuffer?"arraybuffer":typeof t}function ve(t,e,r){let n=[],i=null;return ve._encode(n,t),i=ex(n),ve.bytes=i.length,ArrayBuffer.isView(e)?(e.set(i,r),e):i}ve.bytes=-1;ve._floatConversionDetected=!1;ve._encode=function(t,e){if(e!=null)switch(Ku(e)){case"object":ve.dict(t,e);break;case"map":ve.dictMap(t,e);break;case"array":ve.list(t,e);break;case"set":ve.listSet(t,e);break;case"string":ve.string(t,e);break;case"number":ve.number(t,e);break;case"boolean":ve.number(t,e);break;case"arraybufferview":ve.buffer(t,new Uint8Array(e.buffer,e.byteOffset,e.byteLength));break;case"arraybuffer":ve.buffer(t,new Uint8Array(e));break}};var Mu=new Uint8Array([101]),ix=new Uint8Array([100]),ox=new Uint8Array([108]);ve.buffer=function(t,e){t.push(cr(e.length+":"),e)};ve.string=function(t,e){t.push(cr(cr(e).byteLength+":"+e))};ve.number=function(t,e){if(Number.isInteger(e))return t.push(cr("i"+BigInt(e)+"e"));let r=2147483648,n=e/r<<0,i=e%r<<0,o=n*r+i;t.push(cr("i"+o+"e")),o!==e&&!ve._floatConversionDetected&&(ve._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+e+'":','Bencoding only defines support for integers, value was converted to "'+o+'"'),console.trace())};ve.dict=function(t,e){t.push(ix);let r=0,n,i=Object.keys(e).sort(),o=i.length;for(;r<o;r++)n=i[r],e[n]!=null&&(ve.string(t,n),ve._encode(t,e[n]));t.push(Mu)};ve.dictMap=function(t,e){t.push(ix);let r=Array.from(e.keys()).sort();for(let n of r)e.get(n)!=null&&(ArrayBuffer.isView(n)?ve._encode(t,n):ve.string(t,String(n)),ve._encode(t,e.get(n)));t.push(Mu)};ve.list=function(t,e){let r=0,n=e.length;for(t.push(ox);r<n;r++)e[r]!=null&&ve._encode(t,e[r]);t.push(Mu)};ve.listSet=function(t,e){t.push(ox);for(let r of e)r!=null&&ve._encode(t,r);t.push(Mu)};var sx=ve;var pM=l(f(),1);var T5=105,_5=58,I5=100,B5=108,Wh=101;function cx(t,e,r){let n=0,i=1;for(let o=e;o<r;o++){let s=t[o];if(s<58&&s>=48){n=n*10+(s-48);continue}if(!(o===e&&s===43)){if(o===e&&s===45){i=-1;continue}if(s===46)break;throw new Error("not a number: buffer["+o+"] = "+s)}}return n*i}function se(t,e,r,n){return t==null||t.length===0?null:(typeof e!="number"&&n==null&&(n=e,e=void 0),typeof r!="number"&&n==null&&(n=r,r=void 0),se.position=0,se.encoding=n||null,se.data=ArrayBuffer.isView(t)?new Uint8Array(t.slice(e,r)):cr(t),se.bytes=se.data.length,se.next())}se.bytes=0;se.position=0;se.data=null;se.encoding=null;se.next=function(){switch(se.data[se.position]){case I5:return se.dictionary();case B5:return se.list();case T5:return se.integer();default:return se.buffer()}};se.find=function(t){let e=se.position,r=se.data.length,n=se.data;for(;e<r;){if(n[e]===t)return e;e++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(t)+'" [0x'+t.toString(16)+"]")};se.dictionary=function(){se.position++;let t={};for(;se.data[se.position]!==Wh;){let e=se.buffer(),r=zh(e);r.includes("\uFFFD")&&(r=Hh(e)),t[r]=se.next()}return se.position++,t};se.list=function(){se.position++;let t=[];for(;se.data[se.position]!==Wh;)t.push(se.next());return se.position++,t};se.integer=function(){let t=se.find(Wh),e=cx(se.data,se.position+1,t);return se.position+=t+1-se.position,e};se.buffer=function(){let t=se.find(_5),e=cx(se.data,se.position,t),r=++t+e;return se.position=r,se.encoding?zh(se.data.slice(t,r)):se.data.slice(t,r)};var ax=se;var gM=l(f(),1);function k5(t){let e=2;for(let r of t)e+=Nu(r);return e}function R5(t){let e=2;for(let[r,n]of t){let i=cr(r).byteLength;e+=Jo(i)+1+i,e+=Nu(n)}return e}function C5(t){let e=2,r=Object.keys(t);for(let n=0;n<r.length;n++){let i=cr(r[n]).byteLength;e+=Jo(i)+1+i,e+=Nu(t[r[n]])}return e}function O5(t){let e=cr(t).byteLength;return Jo(e)+1+e}function U5(t){let e=t.byteLength-t.byteOffset;return Jo(e)+1+e}function Nu(t){if(t==null)return 0;let r=Ku(t);switch(r){case"arraybufferview":return U5(t);case"string":return O5(t);case"array":case"set":return k5(t);case"number":return 1+Jo(Math.floor(t))+1;case"bigint":return 1+t.toString().length+1;case"object":return C5(t);case"map":return R5(t);default:throw new TypeError(`Unsupported value of type "${r}"`)}}var Gh=Nu;var P5=Gh,Jh={encode:sx,decode:ax,byteLength:Gh,encodingLength:P5};var UM=l(f(),1);var SM=l(f(),1),L5=/^(\d{1,3}\.){3,3}\d{1,3}$/;var K5=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;var wr={name:"v4",size:4,isFormat:t=>L5.test(t),encode(t,e,r){r=~~r,e=e||new Uint8Array(r+4);let n=t.length,i=0;for(let o=0;o<n;){let s=t.charCodeAt(o++);s===46?(e[r++]=i,i=0):i=i*10+(s-48)}return e[r]=i,e},decode(t,e){return e=~~e,`${t[e++]}.${t[e++]}.${t[e++]}.${t[e]}`}},Sn={name:"v6",size:16,isFormat:t=>t.length>0&&K5.test(t),encode(t,e,r){r=~~r;let n=r+16,i=-1,o=0,s=0,c=!0,u=!1;e=e||new Uint8Array(r+16);for(let d=0;d<t.length;d++){let a=t.charCodeAt(d);a===58?(c?i!==-1?(r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2):r<n&&(i=r):(u===!0?(r<n&&(e[r]=s),r++):(r<n&&(e[r]=o>>8),r<n-1&&(e[r+1]=o&255),r+=2),o=0,s=0),c=!0,u=!1):a===46?(r<n&&(e[r]=s),r++,s=0,o=0,c=!1,u=!0):(c=!1,a>=97?a-=87:a>=65?a-=55:(a-=48,s=s*10+a),o=(o<<4)+a)}if(c===!1)u===!0?(r<n&&(e[r]=s),r++):(r<n&&(e[r]=o>>8),r<n-1&&(e[r+1]=o&255),r+=2);else if(i===0)r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2;else if(i!==-1){r+=2;for(let d=Math.min(r-1,n-1);d>=i+2;d--)e[d]=e[d-2];e[i]=0,e[i+1]=0,i=r}if(i!==r&&i!==-1)for(r>n-2&&(r=n-2);n>i;)e[--n]=r<n&&r>i?e[--r]:0;else for(;r<n;)e[r++]=0;return e},decode(t,e){e=~~e;let r="";for(let n=0;n<16;n+=2)n!==0&&(r+=":"),r+=(t[e+n]<<8|t[e+n+1]).toString(16);return r.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};function ux(t){if(wr.isFormat(t))return wr.size;if(Sn.isFormat(t))return Sn.size;throw Error(`Invalid ip address: ${t}`)}function dx(t){return ux(t)===wr.size?1:2}function lx(t,e,r){r=~~r;let n=ux(t);return typeof e=="function"&&(e=e(r+n)),n===wr.size?wr.encode(t,e,r):Sn.encode(t,e,r)}function fx(t,e,r){if(e=~~e,r=r||t.length-e,r===wr.size)return wr.decode(t,e,r);if(r===Sn.size)return Sn.decode(t,e,r);throw Error(`Invalid buffer size needs to be ${wr.size} for v4 or ${Sn.size} for v6.`)}var AM=l(f(),1);function Dc(t){switch(t){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+t}function Yo(t){switch(t.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return t.toUpperCase().startsWith("UNKNOWN_")?parseInt(t.slice(8)):0}var TM=l(f(),1);function hx(t){switch(t){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+t}var _M=l(f(),1);function px(t){switch(t){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+t}var IM=l(f(),1);function Yh(t){switch(t){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+t}function Xh(t){switch(t.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}var BM=l(f(),1);function yx(t){switch(t){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return t<0?null:`OPTION_${t}`}function Zh(t){if(typeof t=="number")return t;if(!t)return-1;switch(t.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}let e=t.match(/_(\d+)$/);return e?parseInt(e[1],10):-1}var RM=l(f(),1);var kM=l(f(),1);function Qh(t){let e=0,r=t.length;for(let n=0;n<r;n+=1){let i=t.charCodeAt(n);if(i<=127)e+=1;else if(i<=2047)e+=2;else if((i&63488)!==55296)e+=3;else{let o=n+1;o===r||i>=56320||(t.charCodeAt(o)&64512)!==56320?e+=3:(n=o,e+=4)}}return e}function Xo(t,e,r){let n=t.length;r==null&&(r=0),e===void 0&&(e=new Uint8Array(Qh(t)+r));let i=r;for(let o=0;o<n;o+=1){let s=t.charCodeAt(o);if(s<=127)e[i++]=s;else if(s<=2047)e[i++]=192|(s&1984)>>6,e[i++]=128|s&63;else if((s&63488)!==55296)e[i++]=224|(s&61440)>>12,e[i++]=128|(s&4032)>>6,e[i++]=128|s&63;else{let c=o+1;if(c===n||s>=56320)e[i++]=239,e[i++]=191,e[i++]=189;else{let u=t.charCodeAt(c);(u&64512)!==56320?(e[i++]=239,e[i++]=191,e[i++]=189):(o=c,s=65536|(s&1023)<<10|u&1023,e[i++]=240|(s&1835008)>>18,e[i++]=128|(s&258048)>>12,e[i++]=128|(s&4032)>>6,e[i++]=128|s&63)}}}return Xo.bytes=i-r,e}Xo.bytes=0;function Zo(t,e,r){let n="";e==null&&(e=0),r==null&&(r=t.length);for(let i=e;i<r;){let o=t[i++],s;if(o<=128)s=o;else if(o>191&&o<224)s=(o&31)<<6|t[i++]&63;else if(o>239&&o<365){s=((o&7)<<18|(t[i++]&63)<<12|(t[i++]&63)<<6|t[i++]&63)-65536;let c=55296|s>>10&1023;n+=String.fromCharCode(c),s=56320|s&1023}else s=(o&15)<<12|(t[i++]&63)<<6|t[i++]&63;n+=String.fromCharCode(s)}return Zo.bytes=r-e,n}Zo.bytes=0;var Zn=t=>t instanceof Uint8Array;function An(t){return typeof t=="string"?Qh(t):t.byteLength}function $u(t){return t instanceof Uint8Array?t:Array.isArray(t)?new Uint8Array(t):Xo(t)}function Fu(t,e,r){if(typeof e!="string")throw new Error("unknown input type");return Xo(e,t,r),Xo.bytes}var Sc={},mx=new Array(255);for(let t=0;t<=15;t+=1){let e=t.toString(16),r=e.toUpperCase();for(let n=0;n<=15;n+=1){let i=n.toString(16),o=i.toUpperCase(),s=t<<4|n,c=`${e}${i}`;mx[s]=c,Sc[c]=s,Sc[`${r}${i}`]=s,Sc[`${e}${o}`]=s,Sc[`${r}${o}`]=s}}function bx(t,e,r){let n="";for(let i=e;i<r;){let o=t[i++];n+=mx[o]}return n}function ep(t){return t.length>>>1}function gx(t,e,r,n){let i=0;for(;r<n;){let o=e.substr(i,2),s=Sc[o];if(s===void 0)return;t[r++]=s,i+=2}return t}var H5=Math.pow(2,24),z5=Math.pow(2,16),W5=Math.pow(2,8),Vr=(t,e)=>t[e]*H5+t[e+1]*z5+t[e+2]*W5+t[e+3],de=(t,e)=>t[e]<<8|t[e+1],jr=(t,e,r)=>(e=+e,t[r+3]=e,e=e>>>8,t[r+2]=e,e=e>>>8,t[r+1]=e,e=e>>>8,t[r]=e,r+4),ee=(t,e,r)=>(t[r]=e>>8,t[r+1]=e&255,r+2);function Ot(t,e,r,n,i){return r<0&&(n-=r,r=0),n<0&&(n=0),i<0?new Uint8Array(0):r>=e.length||n>=i?0:G5(t,e,r,n,i)}function G5(t,e,r,n,i){i-n>e.length-r&&(i=n+e.length-r);let o=i-n,s=t.length-n;return o>s&&(o=s),(n!==0||i<t.length)&&(t=new Uint8Array(t.buffer,t.byteOffset+n,o)),e.set(t,r),o}var Y5=0,wx=32768,rp=32768,X5=~rp,Ex=32768,Z5=~Ex;function Ie({bytes:t=0,encode:e,decode:r,encodingLength:n}){return e.bytes=t,r.bytes=t,{encode:e,decode:r,encodingLength:n||(()=>t)}}var J=Ie({encode(t,e,r){e||(e=new Uint8Array(J.encodingLength(t))),r||(r=0);let n=r,i=t.replace(/^\.|\.$/gm,"");if(i.length){let o=i.split(".");for(let s=0;s<o.length;s++){let c=Fu(e,o[s],r+1);e[r]=c,r+=c+1}}return e[r++]=0,J.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=[],n=e,i=0,o=0,s=!1;for(;;){if(e>=t.length)throw new Error("Cannot decode name (buffer overflow)");let c=t[e++];if(o+=s?0:1,c===0)break;if(c&192)if((c&192)===192){if(e+1>t.length)throw new Error("Cannot decode name (buffer overflow)");let u=de(t,e-1)-49152;if(u>=n)throw new Error("Cannot decode name (bad pointer)");e=u,n=u,o+=s?0:1,s=!0}else throw new Error("Cannot decode name (bad label)");else{if(e+c>t.length)throw new Error("Cannot decode name (buffer overflow)");if(i+=c+1,i>254)throw new Error("Cannot decode name (name too long)");r.push(Zo(t,e,e+c)),e+=c,o+=s?0:c}}return J.decode.bytes=o,r.length===0?".":r.join(".")},encodingLength(t){return t==="."||t===".."?1:An(t.replace(/^\.|\.$/gm,""))+2}}),rt=Ie({encode(t,e,r){e||(e=new Uint8Array(rt.encodingLength(t))),r||(r=0);let n=Fu(e,t,r+1);return e[r]=n,rt.encode.bytes=n+1,e},decode(t,e){e||(e=0);let r=t[e],n=Zo(t,e+1,e+1+r);return rt.decode.bytes=r+1,n},encodingLength(t){return An(t)+1}}),Qo=Ie({bytes:12,encode(t,e,r){e||(e=new Uint8Array(Qo.encodingLength(t))),r||(r=0);let n=(t.flags||0)&32767,i=t.type==="response"?wx:Y5;return ee(e,t.id||0,r),ee(e,n|i,r+2),ee(e,t.questions.length,r+4),ee(e,t.answers.length,r+6),ee(e,t.authorities.length,r+8),ee(e,t.additionals.length,r+10),e},decode(t,e){if(e||(e=0),t.length<12)throw new Error("Header must be 12 bytes");let r=de(t,e+2);return{id:de(t,e),type:r&wx?"response":"query",flags:r&32767,flag_qr:(r>>15&1)===1,opcode:px(r>>11&15),flag_aa:(r>>10&1)===1,flag_tc:(r>>9&1)===1,flag_rd:(r>>8&1)===1,flag_ra:(r>>7&1)===1,flag_z:(r>>6&1)===1,flag_ad:(r>>5&1)===1,flag_cd:(r>>4&1)===1,rcode:hx(r&15),questions:new Array(de(t,e+4)),answers:new Array(de(t,e+6)),authorities:new Array(de(t,e+8)),additionals:new Array(de(t,e+10))}},encodingLength(){return 12}}),Vu=Ie({encode(t,e,r){e||(e=new Uint8Array(Vu.encodingLength(t))),r||(r=0);let n=t.length;return ee(e,n,r),Ot(t,e,r+2,0,n),Vu.encode.bytes=n+2,e},decode(t,e){e||(e=0);let r=de(t,e),n=t.slice(e+2,e+2+r);return Vu.decode.bytes=r+2,n},encodingLength(t){return t.length+2}}),ju=Ie({encode(t,e,r){return e||(e=new Uint8Array(ju.encodingLength(t))),r||(r=0),J.encode(t,e,r+2),ee(e,J.encode.bytes,r),ju.encode.bytes=J.encode.bytes+2,e},decode(t,e){e||(e=0);let r=de(t,e),n=J.decode(t,e+2);return ju.decode.bytes=r+2,n},encodingLength(t){return J.encodingLength(t)+2}}),Hu=Ie({encode(t,e,r){e||(e=new Uint8Array(Hu.encodingLength(t))),r||(r=0);let n=r;return r+=2,J.encode(t.mname,e,r),r+=J.encode.bytes,J.encode(t.rname,e,r),r+=J.encode.bytes,jr(e,t.serial||0,r),r+=4,jr(e,t.refresh||0,r),r+=4,jr(e,t.retry||0,r),r+=4,jr(e,t.expire||0,r),r+=4,jr(e,t.minimum||0,r),r+=4,ee(e,r-n-2,n),Hu.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.mname=J.decode(t,e),e+=J.decode.bytes,n.rname=J.decode(t,e),e+=J.decode.bytes,n.serial=Vr(t,e),e+=4,n.refresh=Vr(t,e),e+=4,n.retry=Vr(t,e),e+=4,n.expire=Vr(t,e),e+=4,n.minimum=Vr(t,e),e+=4,Hu.decode.bytes=e-r,n},encodingLength(t){return 22+J.encodingLength(t.mname)+J.encodingLength(t.rname)}}),zu=Ie({encode(t,e,r){Array.isArray(t)||(t=[t]);for(let i=0;i<t.length;i++)if(typeof t[i]=="string"&&(t[i]=$u(t[i])),!Zn(t[i]))throw new Error("Must be a Buffer");e||(e=new Uint8Array(zu.encodingLength(t))),r||(r=0);let n=r;return r+=2,t.forEach(function(i){e[r++]=i.length,Ot(i,e,r,0,i.length),r+=i.length}),ee(e,r-n-2,n),zu.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=de(t,e);e+=2;let i=[];for(;n>0;){let o=t[e++];if(--n,n<o)throw new Error("Buffer overflow");i.push(t.slice(e,e+o)),e+=o,n-=o}return zu.decode.bytes=e-r,i},encodingLength(t){Array.isArray(t)||(t=[t]);let e=2;return t.forEach(function(r){typeof r=="string"?e+=An(r)+1:e+=r.length+1}),e}}),Wu=Ie({encode(t,e,r){e||(e=new Uint8Array(Wu.encodingLength(t))),r||(r=0),typeof t=="string"&&(t=$u(t)),t||(t=new Uint8Array(0));let n=r;r+=2;let i=t.length;return Ot(t,e,r,0,i),r+=i,ee(e,r-n-2,n),Wu.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=de(t,e);e+=2;let i=t.slice(e,e+n);return e+=n,Wu.decode.bytes=e-r,i},encodingLength(t){return t?(Zn(t)?t.length:An(t))+2:2}}),Gu=Ie({encode(t,e,r){e||(e=new Uint8Array(Gu.encodingLength(t))),r||(r=0);let n=r;return r+=2,rt.encode(t.cpu,e,r),r+=rt.encode.bytes,rt.encode(t.os,e,r),r+=rt.encode.bytes,ee(e,r-n-2,n),Gu.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.cpu=rt.decode(t,e),e+=rt.decode.bytes,n.os=rt.decode(t,e),e+=rt.decode.bytes,Gu.decode.bytes=e-r,n},encodingLength(t){return rt.encodingLength(t.cpu)+rt.encodingLength(t.os)+2}}),rs=Ie({encode(t,e,r){return e||(e=new Uint8Array(rs.encodingLength(t))),r||(r=0),J.encode(t,e,r+2),ee(e,J.encode.bytes,r),rs.encode.bytes=J.encode.bytes+2,e},decode(t,e){e||(e=0);let r=J.decode(t,e+2);return rs.decode.bytes=J.decode.bytes+2,r},encodingLength(t){return J.encodingLength(t)+2}}),Ju=Ie({encode(t,e,r){e||(e=new Uint8Array(Ju.encodingLength(t))),r||(r=0),ee(e,t.priority||0,r+2),ee(e,t.weight||0,r+4),ee(e,t.port||0,r+6),J.encode(t.target,e,r+8);let n=J.encode.bytes+6;return ee(e,n,r),Ju.encode.bytes=n+2,e},decode(t,e){e||(e=0);let r=de(t,e),n={};return n.priority=de(t,e+2),n.weight=de(t,e+4),n.port=de(t,e+6),n.target=J.decode(t,e+8),Ju.decode.bytes=r+2,n},encodingLength(t){return 8+J.encodingLength(t.target)}}),Qn=Ie({encode(t,e,r){let n=Qn.encodingLength(t);return e||(e=new Uint8Array(Qn.encodingLength(t))),r||(r=0),t.issuerCritical&&(t.flags=Qn.ISSUER_CRITICAL),ee(e,n-2,r),r+=2,e[r]=t.flags||0,r+=1,rt.encode(t.tag,e,r),r+=rt.encode.bytes,Fu(e,t.value,r),r+=An(t.value),Qn.encode.bytes=n,e},decode(t,e){e||(e=0);let r=de(t,e);e+=2;let n=e,i={};return i.flags=t[e],e+=1,i.tag=rt.decode(t,e),e+=rt.decode.bytes,i.value=Zo(t,e,n+r),i.issuerCritical=!!(i.flags&Qn.ISSUER_CRITICAL),Qn.decode.bytes=r+2,i},encodingLength(t){return rt.encodingLength(t.tag)+rt.encodingLength(t.value)+2}});Qn.ISSUER_CRITICAL=128;var Yu=Ie({encode(t,e,r){e||(e=new Uint8Array(Yu.encodingLength(t))),r||(r=0);let n=r;return r+=2,ee(e,t.preference||0,r),r+=2,J.encode(t.exchange,e,r),r+=J.encode.bytes,ee(e,r-n-2,n),Yu.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.preference=de(t,e),e+=2,n.exchange=J.decode(t,e),e+=J.decode.bytes,Yu.decode.bytes=e-r,n},encodingLength(t){return 4+J.encodingLength(t.exchange)}}),vx=Ie({encode(t,e,r){return e||(e=new Uint8Array(vx.encodingLength(t))),r||(r=0),ee(e,4,r),r+=2,wr.encode(t,e,r),e},decode(t,e){return e||(e=0),e+=2,wr.decode(t,e)},bytes:6}),Xu=Ie({encode(t,e,r){return e||(e=new Uint8Array(Xu.encodingLength(t))),r||(r=0),ee(e,16,r),r+=2,Sn.encode(t,e,r),Xu.encode.bytes=18,e},decode(t,e){e||(e=0),e+=2;let r=Sn.decode(t,e);return Xu.decode.bytes=18,r},bytes:18}),xx=t=>new Uint8Array(t),Tn=Ie({encode(t,e,r){e||(e=new Uint8Array(Tn.encodingLength(t))),r||(r=0);let n=r,i=Zh(t.code);if(ee(e,i,r),r+=2,t.data)ee(e,t.data.length,r),r+=2,Ot(t.data,e,r),r+=t.data.length;else switch(i){case 8:{let o=t.sourcePrefixLength||0,s=t.family||dx(t.ip,xx),c=lx(t.ip,xx),u=Math.ceil(o/8);ee(e,u+4,r),r+=2,ee(e,s,r),r+=2,e[r++]=o,e[r++]=t.scopePrefixLength||0,Ot(c,e,r,0,u),r+=u}break;case 11:t.timeout?(ee(e,2,r),r+=2,ee(e,t.timeout,r),r+=2):(ee(e,0,r),r+=2);break;case 12:{let o=t.length||0;ee(e,o,r),r+=2,e.fill(0,r,r+o),r+=o}break;case 14:{let o=t.tags.length*2;ee(e,o,r),r+=2;for(let s of t.tags)ee(e,s,r),r+=2}break;default:throw new Error(`Unknown roption code: ${t.code}`)}return Tn.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r={};r.code=de(t,e),r.type=yx(r.code),e+=2;let n=de(t,e);switch(e+=2,r.data=t.slice(e,e+n),r.code){case 8:r.family=de(t,e),e+=2,r.sourcePrefixLength=t[e++],r.scopePrefixLength=t[e++];{let i=new Uint8Array(r.family===1?4:16);Ot(t,i,0,e,e+n-4),r.ip=fx(i)}break;case 11:n>0&&(r.timeout=de(t,e),e+=2);break;case 14:r.tags=[];for(let i=0;i<n;i+=2)r.tags.push(de(t,e)),e+=2}return Tn.decode.bytes=n+4,r},encodingLength(t){if(t.data)return t.data.length+4;switch(Zh(t.code)){case 8:{let r=t.sourcePrefixLength||0;return Math.ceil(r/8)+8}case 11:return typeof t.timeout=="number"?6:4;case 12:return t.length+4;case 14:return 4+t.tags.length*2}throw new Error(`Unknown roption code: ${t.code}`)}}),ei=Ie({encode(t,e,r){e||(e=new Uint8Array(ei.encodingLength(t))),r||(r=0);let n=r,i=ts(t,Tn);return ee(e,i,r),r=kc(t,Tn,e,r+2),ei.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=[],i=de(t,e);e+=2;let o=0;for(;i>0;)n[o++]=Tn.decode(t,e),e+=Tn.decode.bytes,i-=Tn.decode.bytes;return ei.decode.bytes=e-r,n},encodingLength(t){return 2+ts(t||[],Tn)}}),Hr=Ie({encode(t,e,r){e||(e=new Uint8Array(Hr.encodingLength(t))),r||(r=0);let n=r,i=t.key;if(!Zn(i))throw new Error("Key must be a Buffer");return r+=2,ee(e,t.flags,r),r+=2,e[r]=Hr.PROTOCOL_DNSSEC,r+=1,e[r]=t.algorithm,r+=1,Ot(i,e,r,0,i.length),r+=i.length,Hr.encode.bytes=r-n,ee(e,Hr.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},i=de(t,e);if(e+=2,n.flags=de(t,e),e+=2,t[e]!==Hr.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return e+=1,n.algorithm=t[e],e+=1,n.key=t.slice(e,r+i+2),e+=n.key.length,Hr.decode.bytes=e-r,n},encodingLength(t){return 6+An(t.key)}});Hr.PROTOCOL_DNSSEC=3;Hr.ZONE_KEY=128;Hr.SECURE_ENTRYPOINT=32768;var Ac=Ie({encode(t,e,r){e||(e=new Uint8Array(Ac.encodingLength(t))),r||(r=0);let n=r,i=t.signature;if(!Zn(i))throw new Error("Signature must be a Buffer");return r+=2,ee(e,Yo(t.typeCovered),r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.labels,r+=1,jr(e,t.originalTTL,r),r+=4,jr(e,t.expiration,r),r+=4,jr(e,t.inception,r),r+=4,ee(e,t.keyTag,r),r+=2,J.encode(t.signersName,e,r),r+=J.encode.bytes,Ot(i,e,r,0,i.length),r+=i.length,Ac.encode.bytes=r-n,ee(e,Ac.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},i=de(t,e);return e+=2,n.typeCovered=Dc(de(t,e)),e+=2,n.algorithm=t[e],e+=1,n.labels=t[e],e+=1,n.originalTTL=Vr(t,e),e+=4,n.expiration=Vr(t,e),e+=4,n.inception=Vr(t,e),e+=4,n.keyTag=de(t,e),e+=2,n.signersName=J.decode(t,e),e+=J.decode.bytes,n.signature=t.slice(e,r+i+2),e+=n.signature.length,Ac.decode.bytes=e-r,n},encodingLength(t){return 20+J.encodingLength(t.signersName)+An(t.signature)}}),Tc=Ie({encode(t,e,r){e||(e=new Uint8Array(Tc.encodingLength(t))),r||(r=0);let n=r;return r+=2,J.encode(t.mbox||".",e,r),r+=J.encode.bytes,J.encode(t.txt||".",e,r),r+=J.encode.bytes,Tc.encode.bytes=r-n,ee(e,Tc.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.mbox=J.decode(t,e)||".",e+=J.decode.bytes,n.txt=J.decode(t,e)||".",e+=J.decode.bytes,Tc.decode.bytes=e-r,n},encodingLength(t){return 2+J.encodingLength(t.mbox||".")+J.encodingLength(t.txt||".")}}),jt=Ie({encode(t,e,r){e||(e=new Uint8Array(jt.encodingLength(t))),r||(r=0);let n=r,i=[];for(let o=0;o<t.length;o++){let s=Yo(t[o]);i[s>>8]===void 0&&(i[s>>8]=[]),i[s>>8][s>>3&31]|=1<<7-(s&7)}for(let o=0;o<i.length;o++)if(i[o]!==void 0){let s=$u(i[o]);e[r]=o,r+=1,e[r]=s.length,r+=1,Ot(s,e,r,0,s.length),r+=s.length}return jt.encode.bytes=r-n,e},decode(t,e,r){e||(e=0);let n=e,i=[];for(;e-n<r;){let o=t[e];e+=1;let s=t[e];e+=1;for(let c=0;c<s;c++){let u=t[e+c];for(let d=0;d<8;d++)if(u&1<<7-d){let a=Dc(o<<8|c<<3|d);i.push(a)}}e+=s}return jt.decode.bytes=e-n,i},encodingLength(t){let e=[];for(let n=0;n<t.length;n++){let i=Yo(t[n]);e[i>>8]=Math.max(e[i>>8]||0,i&255)}let r=0;for(let n=0;n<e.length;n++)e[n]!==void 0&&(r+=2+Math.ceil((e[n]+1)/8));return r}}),_c=Ie({encode(t,e,r){e||(e=new Uint8Array(_c.encodingLength(t))),r||(r=0);let n=r;return r+=2,J.encode(t.nextDomain,e,r),r+=J.encode.bytes,jt.encode(t.rrtypes,e,r),r+=jt.encode.bytes,_c.encode.bytes=r-n,ee(e,_c.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},i=de(t,e);return e+=2,n.nextDomain=J.decode(t,e),e+=J.decode.bytes,n.rrtypes=jt.decode(t,e,i-(e-r)),e+=jt.decode.bytes,_c.decode.bytes=e-r,n},encodingLength(t){return 2+J.encodingLength(t.nextDomain)+jt.encodingLength(t.rrtypes)}}),Ic=Ie({encode(t,e,r){e||(e=new Uint8Array(Ic.encodingLength(t))),r||(r=0);let n=r,i=t.salt;if(!Zn(i))throw new Error("salt must be a Buffer");let o=t.nextDomain;if(!Zn(o))throw new Error("nextDomain must be a Buffer");return r+=2,e[r]=t.algorithm,r+=1,e[r]=t.flags,r+=1,ee(e,t.iterations,r),r+=2,e[r]=i.length,r+=1,Ot(i,e,r,0,i.length),r+=i.length,e[r]=o.length,r+=1,Ot(o,e,r,0,o.length),r+=o.length,jt.encode(t.rrtypes,e,r),r+=jt.encode.bytes,Ic.encode.bytes=r-n,ee(e,Ic.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},i=de(t,e);e+=2,n.algorithm=t[e],e+=1,n.flags=t[e],e+=1,n.iterations=de(t,e),e+=2;let o=t[e];e+=1,n.salt=t.slice(e,e+o),e+=o;let s=t[e];return e+=1,n.nextDomain=t.slice(e,e+s),e+=s,n.rrtypes=jt.decode(t,e,i-(e-r)),e+=jt.decode.bytes,Ic.decode.bytes=e-r,n},encodingLength(t){return 8+t.salt.length+t.nextDomain.length+jt.encodingLength(t.rrtypes)}}),Bc=Ie({encode(t,e,r){e||(e=new Uint8Array(Bc.encodingLength(t))),r||(r=0);let n=r,i=t.digest;if(!Zn(i))throw new Error("Digest must be a Buffer");return r+=2,ee(e,t.keyTag,r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.digestType,r+=1,Ot(i,e,r,0,i.length),r+=i.length,Bc.encode.bytes=r-n,ee(e,Bc.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},i=de(t,e);return e+=2,n.keyTag=de(t,e),e+=2,n.algorithm=t[e],e+=1,n.digestType=t[e],e+=1,n.digest=t.slice(e,r+i+2),e+=n.digest.length,Bc.decode.bytes=e-r,n},encodingLength(t){return 6+An(t.digest)}}),es=Ie({encode(t,e,r){e||(e=new Uint8Array(es.encodingLength(t))),r||(r=0);let n=r;r+=2,e[r]=t.algorithm,r+=1,e[r]=t.hash,r+=1;let i=ep(t.fingerprint),o=np(t.hash);if(i!==o)throw new Error(`Invalid length of fingerprint "${t.fingerprint}" for hashType=${t.hash}: ${i} != ${o}`);return gx(e,t.fingerprint,r,r+=i),es.encode.bytes=r-n,ee(e,es.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={};e+=2,n.algorithm=t[e],e+=1,n.hash=t[e],e+=1;let i=np(n.hash);return n.fingerprint=bx(t,e,e+i),e+=i,es.decode.bytes=e-r,n},encodingLength(t){return 4+ep(t.fingerprint)}});function np(t){if(t===1)return 20;if(t===2)return 32;throw new Error(`Invalid hashType=${t}, supported=1,2`)}es.getFingerprintLengthForHashType=np;function tp(t){switch(t.toUpperCase()){case"A":return vx;case"PTR":return rs;case"CNAME":return rs;case"DNAME":return rs;case"TXT":return zu;case"NULL":return Wu;case"AAAA":return Xu;case"SRV":return Ju;case"HINFO":return Gu;case"CAA":return Qn;case"NS":return ju;case"SOA":return Hu;case"MX":return Yu;case"OPT":return ei;case"DNSKEY":return Hr;case"RRSIG":return Ac;case"RP":return Tc;case"NSEC":return _c;case"NSEC3":return Ic;case"SSHFP":return es;case"DS":return Bc}return Vu}var ar=Ie({encode(t,e,r){e||(e=new Uint8Array(ar.encodingLength(t))),r||(r=0);let n=r;if(J.encode(t.name,e,r),r+=J.encode.bytes,ee(e,Yo(t.type),r),t.type.toUpperCase()==="OPT"){if(t.name!==".")throw new Error("OPT name must be root.");ee(e,t.udpPayloadSize||4096,r+2),e[r+4]=t.extendedRcode||0,e[r+5]=t.ednsVersion||0,ee(e,t.flags||0,r+6),r+=8,ei.encode(t.options||[],e,r),r+=ei.encode.bytes}else{let i=Xh(t.class===void 0?"IN":t.class);t.flush&&(i|=rp),ee(e,i,r+2),jr(e,t.ttl||0,r+4),r+=8;let o=tp(t.type);o.encode(t.data,e,r),r+=o.encode.bytes}return ar.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r={},n=e;if(r.name=J.decode(t,e),e+=J.decode.bytes,r.type=Dc(de(t,e)),r.type==="OPT")r.udpPayloadSize=de(t,e+2),r.extendedRcode=t[e+4],r.ednsVersion=t[e+5],r.flags=de(t,e+6),r.flag_do=(r.flags>>15&1)===1,r.options=ei.decode(t,e+8),e+=8+ei.decode.bytes;else{let i=de(t,e+2);r.ttl=Vr(t,e+4),r.class=Yh(i&X5),r.flush=!!(i&rp);let o=tp(r.type);r.data=o.decode(t,e+8),e+=8+o.decode.bytes}return ar.decode.bytes=e-n,r},encodingLength(t){let e=t.data!==null&&t.data!==void 0?t.data:t.options;return J.encodingLength(t.name)+8+tp(t.type).encodingLength(e)}}),ns=Ie({encode(t,e,r){e||(e=new Uint8Array(ns.encodingLength(t))),r||(r=0);let n=r;return J.encode(t.name,e,r),r+=J.encode.bytes,ee(e,Yo(t.type),r),r+=2,ee(e,Xh(t.class===void 0?"IN":t.class),r),r+=2,ns.encode.bytes=r-n,t},decode(t,e){e||(e=0);let r=e,n={};return n.name=J.decode(t,e),e+=J.decode.bytes,n.type=Dc(de(t,e)),e+=2,n.class=Yh(de(t,e)),e+=2,!!(n.class&Ex)&&(n.class&=Z5),ns.decode.bytes=e-r,n},encodingLength(t){return J.encodingLength(t.name)+4}});var Dx=1024;var ht={encode:function(t,e,r){let n=!e;n&&(e=new Uint8Array(Q5(t))),r||(r=0);let i=r;return t.questions||(t.questions=[]),t.answers||(t.answers=[]),t.authorities||(t.authorities=[]),t.additionals||(t.additionals=[]),Qo.encode(t,e,r),r+=Qo.encode.bytes,r=kc(t.questions,ns,e,r),r=kc(t.answers,ar,e,r),r=kc(t.authorities,ar,e,r),r=kc(t.additionals,ar,e,r),ht.encode.bytes=r-i,n&&Rc.bytes!==e.length?e.slice(0,Rc.bytes):e},decode:function(t,e){e||(e=0);let r=e,n=Qo.decode(t,e);return e+=Qo.decode.bytes,e=qu(n.questions,ns,t,e),e=qu(n.answers,ar,t,e),e=qu(n.authorities,ar,t,e),e=qu(n.additionals,ar,t,e),ht.decode.bytes=e-r,n},encodingLength:function(t){return Qo.encodingLength(t)+ts(t.questions||[],ns)+ts(t.answers||[],ar)+ts(t.authorities||[],ar)+ts(t.additionals||[],ar)}};ht.encode.bytes=0;ht.decode.bytes=0;function Zu(t,e){if(t.questions)throw new Error("Only one .question object expected instead of a .questions array!");let r=Object.assign({type:e},t);return r.question&&(r.questions=[r.question],delete r.question),r}var Qu={encode:function(t,e,r){return e=ht.encode(Zu(t,"query"),e,r),Qu.encode.bytes=ht.encode.bytes,e},decode:function(t,e){let r=ht.decode(t,e);return Qu.decode.bytes=ht.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(t){return ht.encodingLength(Zu(t,"query"))}};Qu.encode.bytes=0;Qu.decode.bytes=0;var ed={encode:function(t,e,r){return e=ht.encode(Zu(t,"response"),e,r),ed.encode.bytes=ht.encode.bytes,e},decode:function(t,e){let r=ht.decode(t,e);return ed.decode.bytes=ht.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(t){return ht.encodingLength(Zu(t,"response"))}};ed.encode.bytes=0;ed.decode.bytes=0;var Rc=ht.encode,td=ht.decode,Q5=ht.encodingLength;function Sx(t){let e=Rc(t),r=new Uint8Array(2+e.byteLength);return ee(r,e.byteLength),Ot(e,r,2,0,e.length),Sx.bytes=r.byteLength,r}Sx.bytes=0;function Ax(t){let e=de(t,0);if(t.byteLength<e+2)return null;let r=td(t.slice(2));return Ax.bytes=td.bytes,r}Ax.bytes=0;function ts(t,e){let r=0;for(let n=0;n<t.length;n++)r+=e.encodingLength(t[n]);return r}function kc(t,e,r,n){for(let i=0;i<t.length;i++)e.encode(t[i],r,n),n+=e.encode.bytes;return n}function qu(t,e,r,n){for(let i=0;i<t.length;i++)t[i]=e.decode(r,n),n+=e.decode.bytes;return n}var LM=l(f(),1),Ht=class{static async getSigningMethod(e){throw new Error("Not implemented: Classes extending DidMethod must implement getSigningMethod()")}static async resolve(e,r){throw new Error("Not implemented: Classes extending DidMethod must implement resolve()")}};var Tx="https://diddht.tbddev.org",e_=0,is=7200,rd=";",St=",",ip=(u=>(u[u.Discoverable=0]="Discoverable",u[u.Organization=1]="Organization",u[u.Government=2]="Government",u[u.Corporation=3]="Corporation",u[u.LocalBusiness=4]="LocalBusiness",u[u.SoftwarePackage=5]="SoftwarePackage",u[u.WebApp=6]="WebApp",u[u.FinancialInstitution=7]="FinancialInstitution",u))(ip||{}),nd=(n=>(n[n.Ed25519=0]="Ed25519",n[n.secp256k1=1]="secp256k1",n[n.secp256r1=2]="secp256r1",n))(nd||{}),op=(o=>(o.authentication="auth",o.assertionMethod="asm",o.capabilityDelegation="del",o.capabilityInvocation="inv",o.keyAgreement="agm",o))(op||{}),_x={Ed25519:0,ES256K:1,ES256:2,"P-256":2,secp256k1:1,secp256r1:2},Cc=class Cc extends Ht{static async create({keyManager:e=new wt,options:r={}}={}){if(r.verificationMethods?.some(a=>!(a.algorithm in _x)))throw new Error("One or more verification method algorithms are not supported");let n=r.verificationMethods?.filter(a=>"id"in a).map(a=>a.id);if(n&&n.length!==new Set(n).size)throw new Error("One or more verification method IDs are not unique");if(r.services?.some(a=>!a.id||!a.type||!a.serviceEndpoint))throw new Error("One or more services are missing required properties");let i=await e.generateKey({algorithm:"Ed25519"}),o=await e.getPublicKey({keyUri:i}),s=await pt.identityKeyToIdentifier({identityKey:o}),c={id:s,...r.alsoKnownAs&&{alsoKnownAs:r.alsoKnownAs},...r.controllers&&{controller:r.controllers}},u=[...r.verificationMethods??[]];u?.some(a=>a.id?.split("#").pop()==="0")||u.unshift({algorithm:"Ed25519",id:"0",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]});for(let a of u){let h=a.id&&a.id.split("#").pop()==="0"?i:await e.generateKey({algorithm:a.algorithm}),m=await e.getPublicKey({keyUri:h}),y=a.id??m.kid??await fe({jwk:m});y=`${s}#${Ct(y)}`,c.verificationMethod??=[],c.verificationMethod.push({id:y,type:"JsonWebKey",controller:a.controller??s,publicKeyJwk:m});for(let p of a.purposes??[])c[p]||(c[p]=[]),c[p].push(y)}r.services?.forEach(a=>{c.service??=[],a.id=`${s}#${a.id.split("#").pop()}`,c.service.push(a)});let d=new Dt({uri:s,document:c,metadata:{published:!1,...r.types&&{types:r.types}},keyManager:e});if(r.publish??!0){let a=await Cc.publish({did:d,gatewayUri:r.gatewayUri});d.metadata=a.didDocumentMetadata}return d}static async import({portableDid:e,keyManager:r=new wt}){if(Ue.parse(e.uri)?.method!==Cc.methodName)throw new Y("methodNotSupported","Method not supported");let i=await Dt.import({portableDid:e,keyManager:r});if(!i.document.verificationMethod?.some(o=>o.id?.split("#").pop()==="0"))throw new Y("invalidDidDocument","DID document must contain an Identity Key");return i}static async getSigningMethod({didDocument:e,methodId:r="#0"}){let n=Ue.parse(e.id);if(n&&n.method!==this.methodName)throw new Y("methodNotSupported",`Method not supported: ${n.method}`);let i=e.verificationMethod?.find(o=>Ct(o.id)===(Ct(r)??Ct(e.assertionMethod?.[0])));if(!(i&&i.publicKeyJwk))throw new Y("internalError","A verification method intended for signing could not be determined from the DID Document");return i}static async publish({did:e,gatewayUri:r=Tx}){return await Uc.put({did:e,gatewayUri:r})}static async resolve(e,r={}){let n=r?.gatewayUri??Tx;try{await pt.identifierToIdentityKey({didUri:e});let{didDocument:i,didDocumentMetadata:o}=await Uc.get({didUri:e,gatewayUri:n});return{...Oe,didDocument:i,didDocumentMetadata:o}}catch(i){if(!(i instanceof Y))throw new Error(i);return{...Oe,didResolutionMetadata:{error:i.code,...i.message&&{errorMessage:i.message}}}}}};Cc.methodName="dht";var Oc=Cc,Uc=class t{static async get({didUri:e,gatewayUri:r}){let n=pt.identifierToIdentityKeyBytes({didUri:e}),i=await t.pkarrGet({gatewayUri:r,publicKeyBytes:n}),o=await pt.parseBep44GetMessage({bep44Message:i}),s=await t.fromDnsPacket({didUri:e,dnsPacket:o});return s.didDocumentMetadata.versionId=i.seq.toString(),s}static async put({did:e,gatewayUri:r}){let n=await t.toDnsPacket({didDocument:e.document,didMetadata:e.metadata}),i=await pt.createBep44PutMessage({dnsPacket:n,publicKeyBytes:pt.identifierToIdentityKeyBytes({didUri:e.uri}),signer:await e.getSigner({methodId:"0"})}),o=await t.pkarrPut({gatewayUri:r,bep44Message:i});return{didDocument:e.document,didDocumentMetadata:{...e.metadata,published:o,versionId:i.seq.toString()},didRegistrationMetadata:{}}}static async pkarrGet({gatewayUri:e,publicKeyBytes:r}){let n=W.uint8Array(r).toBase32Z(),i=new URL(n,e).href,o;try{if(o=await fetch(i,{method:"GET"}),!o.ok)throw new Y("notFound",`Pkarr record not found for: ${n}`)}catch(u){throw u instanceof Y?u:new Y("internalError",`Failed to fetch Pkarr record: ${u.message}`)}let s=await o.arrayBuffer();if(!s)throw new Y("notFound",`Pkarr record not found for: ${n}`);if(s.byteLength<72)throw new Y("invalidDidDocumentLength",`Pkarr response must be at least 72 bytes but got: ${s.byteLength}`);if(s.byteLength>1072)throw new Y("invalidDidDocumentLength",`Pkarr response exceeds 1000 byte limit: ${s.byteLength}`);return{k:r,seq:Number(new DataView(s).getBigUint64(64)),sig:new Uint8Array(s,0,64),v:new Uint8Array(s,72)}}static async pkarrPut({gatewayUri:e,bep44Message:r}){let n=W.uint8Array(r.k).toBase32Z(),i=new URL(n,e).href,o=new Uint8Array(r.v.length+72);o.set(r.sig,0),new DataView(o.buffer).setBigUint64(r.sig.length,BigInt(r.seq)),o.set(r.v,r.sig.length+8);let s;try{s=await fetch(i,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:o})}catch(c){throw new Y("internalError",`Failed to put Pkarr record: ${c.message}`)}return s.ok}static async fromDnsPacket({didUri:e,dnsPacket:r}){let n={id:e},i={published:!0},o=new Map;for(let s of r?.answers??[]){if(s.type!=="TXT")continue;let c=s.name.split(".")[0].substring(1);switch(!0){case c.startsWith("aka"):{let u=pt.parseTxtDataToString(s.data);n.alsoKnownAs=u.split(St);break}case c.startsWith("cnt"):{let u=pt.parseTxtDataToString(s.data);n.controller=u.includes(St)?u.split(St):u;break}case c.startsWith("k"):{let{id:u,t:d,k:a,c:h}=pt.parseTxtDataToObject(s.data),m=W.base64Url(a).toUint8Array(),y=nd[Number(d)],p=await pt.keyConverter(y).bytesToPublicKey({publicKeyBytes:m});n.verificationMethod??=[];let b=`${e}#${u}`;n.verificationMethod.push({id:b,type:"JsonWebKey",controller:h??e,publicKeyJwk:p}),o.set(c,b);break}case c.startsWith("s"):{let{id:u,t:d,se:a,...h}=pt.parseTxtDataToObject(s.data),m=a.includes(St)?a.split(St):a,y=Object.fromEntries(Object.entries(h).map(([p,b])=>[p,b.includes(St)?b.split(St):b]));n.service??=[],n.service.push({...y,id:`${e}#${u}`,type:d,serviceEndpoint:m});break}case c.startsWith("typ"):{let{id:u}=pt.parseTxtDataToObject(s.data);i.types=u.split(St).map(d=>Number(d));break}case c.startsWith("did"):{let u=p=>p.split(St).map(b=>o.get(b)).filter(b=>typeof b=="string"),{auth:d,asm:a,del:h,inv:m,agm:y}=pt.parseTxtDataToObject(s.data);d&&(n.authentication=u(d)),a&&(n.assertionMethod=u(a)),h&&(n.capabilityDelegation=u(h)),m&&(n.capabilityInvocation=u(m)),y&&(n.keyAgreement=u(y));break}}}return{didDocument:n,didDocumentMetadata:i,didResolutionMetadata:{}}}static async toDnsPacket({didDocument:e,didMetadata:r}){let n=[],i=new Map,o=[],s=[];if(e.alsoKnownAs&&n.push({type:"TXT",name:"_aka.did.",ttl:is,data:e.alsoKnownAs.join(St)}),e.controller){let a=Array.isArray(e.controller)?e.controller.join(St):e.controller;n.push({type:"TXT",name:"_cnt.did.",ttl:is,data:a})}for(let[a,h]of e.verificationMethod?.entries()??[]){let m=`k${a}`;s.push(m);let y=h.id.split("#").pop();i.set(y,m);let p=h.publicKeyJwk;if(!(p?.crv&&p.crv in _x))throw new Y("invalidPublicKeyType",`Verification method '${h.id}' contains an unsupported key type: ${p?.crv??"undefined"}`);let b=nd[p.crv],x=await pt.keyConverter(p.crv).publicKeyToBytes({publicKey:p}),v=W.uint8Array(x).toBase64Url(),S=[`id=${y}`,`t=${b}`,`k=${v}`];h.controller!==e.id&&S.push(`c=${h.controller}`),n.push({type:"TXT",name:`_${m}._did.`,ttl:is,data:S.join(rd)})}e.service?.forEach((a,h)=>{let m=`s${h}`;o.push(m);let{id:y,type:p,serviceEndpoint:b,...x}=a;y=Ct(y),b=Array.isArray(b)?b.join(","):b;let v=Object.entries({id:y,t:p,se:b,...x}).map(([S,w])=>`${S}=${w}`);n.push({type:"TXT",name:`_${m}._did.`,ttl:is,data:v.join(rd)})});let c=[`v=${e_}`];if(s.length&&c.push(`vm=${s.join(St)}`),Object.keys(fi).forEach(a=>{let h=e[a]?.map(m=>i.get(m.split("#").pop()));if(h){let m=op[a];c.push(`${m}=${h.join(St)}`)}}),o.length&&c.push(`svc=${o.join(St)}`),r.types?.length){let h=r.types.map(m=>typeof m=="string"?ip[m]:m);n.push({type:"TXT",name:"_typ._did.",ttl:is,data:`id=${h.join(St)}`})}n.push({type:"TXT",name:"_did.",ttl:is,data:c.join(rd)});let[,,u]=e.id.split(":");return n.forEach(a=>a.name+=u),{id:0,type:"response",flags:Dx,answers:n}}},pt=class t{static async createBep44PutMessage({dnsPacket:e,publicKeyBytes:r,signer:n}){let i=Math.ceil(Date.now()/1e3),o=Rc(e),s=Jh.encode({seq:i,v:o}).subarray(1,-1);if(s.length>1e3)throw new Y("invalidDidDocumentLength",`DNS packet exceeds the 1000 byte maximum size: ${s.length} bytes`);let c=await n.sign({data:s});return{k:r,seq:i,sig:c,v:o}}static async identifierToIdentityKey({didUri:e}){let r=t.identifierToIdentityKeyBytes({didUri:e});return await st.bytesToPublicKey({publicKeyBytes:r})}static identifierToIdentityKeyBytes({didUri:e}){let r=Ue.parse(e);if(!r)throw new Y("invalidDid",`Invalid DID URI: ${e}`);if(r.method!==Oc.methodName)throw new Y("methodNotSupported",`Method not supported: ${r.method}`);let n;try{n=W.base32Z(r.id).toUint8Array()}catch{throw new Y("invalidPublicKey","Failed to decode method-specific identifier")}if(n.length!==32)throw new Y("invalidPublicKeyLength",`Invalid public key length: ${n.length}`);return n}static async identityKeyToIdentifier({identityKey:e}){let r=await st.publicKeyToBytes({publicKey:e}),n=W.uint8Array(r).toBase32Z();return`did:${Oc.methodName}:${n}`}static keyConverter(e){let n={Ed25519:st,"P-256":qt,secp256k1:Rt}[e];if(!n)throw new Y("invalidPublicKeyType",`Unsupported curve: ${e}`);return n}static async parseBep44GetMessage({bep44Message:e}){let r=await st.bytesToPublicKey({publicKeyBytes:e.k}),n=Jh.encode({seq:e.seq,v:e.v}).subarray(1,-1);if(!await st.verify({key:r,signature:e.sig,data:n}))throw new Y("invalidSignature","Invalid signature for DHT BEP44 message");return td(e.v)}static parseTxtDataToObject(e){return this.parseTxtDataToString(e).split(rd).reduce((r,n)=>{let[i,o]=n.split("=");return r[i]=o,r},{})}static parseTxtDataToString(e){if(typeof e=="string")return e;if(e instanceof Uint8Array)return W.uint8Array(e).toString();if(Array.isArray(e))return e.map(r=>this.parseTxtDataToString(r)).join("");throw new Y("internalError","Pkarr returned DNS TXT record with invalid data type")}};var aF=l(f(),1);var Z$=l(f(),1);var b$=l(f(),1);var vN=l(f(),1);var XM=l(f(),1),Le={DeltaExceedsMaximumSize:"DeltaExceedsMaximumSize",DidDocumentPublicKeyIdDuplicated:"DidDocumentPublicKeyIdDuplicated",DidDocumentPublicKeyMissingOrIncorrectType:"DidDocumentPublicKeyMissingOrIncorrectType",DidDocumentServiceIdDuplicated:"DidDocumentServiceIdDuplicated",DidSuffixIncorrectLength:"DidSuffixIncorrectLength",EncodedStringIncorrectEncoding:"EncodedStringIncorrectEncoding",IdNotUsingBase64UrlCharacterSet:"IdNotUsingBase64UrlCharacterSet",IdTooLong:"IdTooLong",JwkEs256kMissingOrInvalidCrv:"JwkEs256kMissingOrInvalidCrv",JwkEs256kMissingOrInvalidKty:"JwkEs256kMissingOrInvalidKty",JwkEs256kHasIncorrectLengthOfX:"JwkEs256kHasIncorrectLengthOfX",JwkEs256kHasIncorrectLengthOfY:"JwkEs256kHasIncorrectLengthOfY",JwkEs256kHasIncorrectLengthOfD:"JwkEs256kHasIncorrectLengthOfD",MultihashStringNotAMultihash:"MultihashStringNotAMultihash",MultihashUnsupportedHashAlgorithm:"MultihashUnsupportedHashAlgorithm",PublicKeyJwkEs256kHasUnexpectedProperty:"PublicKeyJwkEs256kHasUnexpectedProperty",PublicKeyPurposeDuplicated:"PublicKeyPurposeDuplicated",ServiceEndpointCannotBeAnArray:"ServiceEndpointCannotBeAnArray",ServiceEndpointStringNotValidUri:"ServiceEndpointStringNotValidUri",ServiceTypeTooLong:"ServiceTypeTooLong"};var QM=l(f(),1),Be=class extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,Object.setPrototypeOf(this,new.target.prototype)}};var bN=l(f(),1);var lN=l(f(),1);var tN=l(f(),1);var iN=l(f(),1),rN=new Uint8Array(0);var oN=l(f(),1);var sp=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},cp=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Ix(this,e)}},ap=class{constructor(e){this.decoders=e}or(e){return Ix(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Ix=(t,e)=>new ap({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),up=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new sp(e,r,n),this.decoder=new cp(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},r_=({name:t,prefix:e,encode:r,decode:n})=>new up(t,e,r,n);var n_=(t,e,r,n)=>{let i={};for(let a=0;a<e.length;++a)i[e[a]]=a;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),c=0,u=0,d=0;for(let a=0;a<o;++a){let h=i[t[a]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|h,c+=r,c>=8&&(c-=8,s[d++]=255&u>>c)}if(c>=r||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return s},i_=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,c=0;for(let u=0;u<t.length;++u)for(c=c<<8|t[u],s+=8;s>r;)s-=r,o+=e[i&c>>s];if(s&&(o+=e[i&c<<r-s]),n)for(;o.length*r&7;)o+="=";return o},Pc=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>r_({prefix:e,name:t,encode(i){return i_(i,n,r)},decode(i){return n_(i,n,r,t)}});var hN=Pc({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),pN=Pc({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Lc=Pc({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),yN=Pc({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ut=class t{static encode(e){return Lc.baseEncode(e)}static decodeAsBytes(e,r){if(!t.isBase64UrlString(e))throw new Be(Le.EncodedStringIncorrectEncoding,`Given ${r} must be base64url string.`);return Lc.baseDecode(e)}static decodeAsString(e,r){let n=t.decodeAsBytes(e,r);return t.bytesToString(n)}static isBase64UrlString(e){return/^[A-Za-z0-9_-]+$/.test(e)}static stringToBytes(e){return new TextEncoder().encode(e)}static bytesToString(e){return new TextDecoder().decode(e)}};var d$=l(f(),1),c2=l(kx(),1);var RN=l(f(),1);var AN=l(f(),1),dp;(function(t){t.Public="public",t.Private="private"})(dp||(dp={}));var zt=dp;var nt=class{static validateEs256kOperationKey(e,r){let n=new Set(["kty","crv","x","y"]);r===zt.Private&&n.add("d");for(let i in e)if(!n.has(i))throw new Be(Le.PublicKeyJwkEs256kHasUnexpectedProperty,`SECP256K1 JWK key has unexpected property '${i}'.`);if(e.crv!=="secp256k1")throw new Be(Le.JwkEs256kMissingOrInvalidCrv,`SECP256K1 JWK 'crv' property must be 'secp256k1' but got '${e.crv}.'`);if(e.kty!=="EC")throw new Be(Le.JwkEs256kMissingOrInvalidKty,`SECP256K1 JWK 'kty' property must be 'EC' but got '${e.kty}.'`);if(e.x.length!==43)throw new Be(Le.JwkEs256kHasIncorrectLengthOfX,"SECP256K1 JWK 'x' property must be 43 bytes.");if(e.y.length!==43)throw new Be(Le.JwkEs256kHasIncorrectLengthOfY,"SECP256K1 JWK 'y' property must be 43 bytes.");if(r===zt.Private&&(e.d===void 0||e.d.length!==43))throw new Be(Le.JwkEs256kHasIncorrectLengthOfD,"SECP256K1 JWK 'd' property must be 43 bytes.")}static validateId(e){if(e.length>50)throw new Be(Le.IdTooLong,`Key ID length ${e.length} exceed max allowed length of 50.`);if(!Ut.isBase64UrlString(e))throw new Be(Le.IdNotUsingBase64UrlCharacterSet,`Key ID '${e}' is not a Base64URL string.`)}static validatePublicKeyPurposes(e){if(e===void 0)return;let r=new Set;for(let n of e){if(r.has(n))throw new Be(Le.PublicKeyPurposeDuplicated,`Public key purpose '${n}' already specified.`);r.add(n)}}};var ON=l(f(),1),Xe=class{};Xe.hashAlgorithmInMultihashCode=18;Xe.maxCanonicalizedDeltaSizeInBytes=1e3;var MN=l(f(),1),Ox=l(Cx(),1);var xr=class t{static canonicalizeAsBytes(e){let r=t.removeAllUndefinedProperties(e),n=Ox.default(r);return Ut.stringToBytes(n)}static removeAllUndefinedProperties(e){for(let r in e)typeof e[r]=="object"?t.removeAllUndefinedProperties(e[r]):e[r]===void 0&&delete e[r];return e}};var J7=l(f(),1),md=l(r2(),1);var F7=l(f(),1);var K7=l(f(),1);var P7=l(f(),1);var R7=l(f(),1);var B7=l(f(),1),dB=o2,n2=128,lB=127,fB=~lB,hB=Math.pow(2,31);function o2(t,e,r){e=e||[],r=r||0;for(var n=r;t>=hB;)e[r++]=t&255|n2,t/=128;for(;t&fB;)e[r++]=t&255|n2,t>>>=7;return e[r]=t|0,o2.bytes=r-n+1,e}var pB=$p,yB=128,i2=127;function $p(t,n){var r=0,n=n||0,i=0,o=n,s,c=t.length;do{if(o>=c)throw $p.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&i2)<<i:(s&i2)*Math.pow(2,i),i+=7}while(s>=yB);return $p.bytes=o-n,r}var mB=Math.pow(2,7),bB=Math.pow(2,14),gB=Math.pow(2,21),wB=Math.pow(2,28),xB=Math.pow(2,35),EB=Math.pow(2,42),vB=Math.pow(2,49),DB=Math.pow(2,56),SB=Math.pow(2,63),AB=function(t){return t<mB?1:t<bB?2:t<gB?3:t<wB?4:t<xB?5:t<EB?6:t<vB?7:t<DB?8:t<SB?9:10},TB={encode:dB,decode:pB,encodingLength:AB},_B=TB,Fp=_B;var qp=(t,e,r=0)=>(Fp.encode(t,e,r),e),Vp=t=>Fp.encodingLength(t);var Hp=(t,e)=>{let r=e.byteLength,n=Vp(t),i=n+Vp(r),o=new Uint8Array(i+r);return qp(t,o,0),qp(r,o,n),o.set(e,i),new jp(t,r,e,o)};var jp=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};var Wp=({name:t,code:e,encode:r})=>new zp(t,e,r),zp=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?Hp(this.code,r):r.then(n=>Hp(this.code,n))}else throw Error("Unknown type, must be binary type")}};var s2=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Gp=Wp({name:"sha2-256",code:18,encode:s2("SHA-256")}),N7=Wp({name:"sha2-512",code:19,encode:s2("SHA-512")});var jc=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(a){try{d(n.next(a))}catch(h){s(h)}}function u(a){try{d(n.throw(a))}catch(h){s(h)}}function d(a){a.done?o(a.value):i(a.value).then(c,u)}d((n=n.apply(t,e||[])).next())})},ct=class t{static hash(e,r){return jc(this,void 0,void 0,function*(){let n=yield this.hashAsNonMultihashBytes(e,r);return md.encode(n,r)})}static hashAsNonMultihashBytes(e,r){return jc(this,void 0,void 0,function*(){let n;switch(r){case 18:n=yield Gp.encode(e);break;default:throw new Be(Le.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static canonicalizeThenHashThenEncode(e,r){return jc(this,void 0,void 0,function*(){let n=xr.canonicalizeAsBytes(e);return yield t.hashThenEncode(n,r)})}static canonicalizeThenDoubleHashThenEncode(e,r){return jc(this,void 0,void 0,function*(){let n=xr.canonicalizeAsBytes(e),i=yield t.hashAsNonMultihashBytes(n,r);return yield t.hashThenEncode(i,r)})}static hashThenEncode(e,r){return jc(this,void 0,void 0,function*(){let n=yield t.hash(e,r);return Ut.encode(n)})}static validateEncodedHashComputedUsingSupportedHashAlgorithm(e,r){let n,i=Ut.decodeAsBytes(e,r);try{n=md.decode(i)}catch{throw new Be(Le.MultihashStringNotAMultihash,`Given ${r} string '${e}' is not a multihash after decoding.`)}let o=Xe.hashAlgorithmInMultihashCode;if(o!==n.code)throw new Be(Le.MultihashUnsupportedHashAlgorithm,`Given ${r} uses unsupported multihash algorithm with code ${n.code}, should use ${o} or change IonSdkConfig to desired hashing algorithm.`)}};var X7=l(f(),1),Jp;(function(t){t.Create="create",t.Update="update",t.Deactivate="deactivate",t.Recover="recover"})(Jp||(Jp={}));var Hc=Jp;var Q7=l(f(),1),Yp;(function(t){t.Replace="replace",t.AddPublicKeys="add-public-keys",t.RemovePublicKeys="remove-public-keys",t.AddServices="add-services",t.RemoveServices="remove-services"})(Yp||(Yp={}));var Xi=Yp;var bd=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(a){try{d(n.next(a))}catch(h){s(h)}}function u(a){try{d(n.throw(a))}catch(h){s(h)}}function d(a){a.done?o(a.value):i(a.value).then(c,u)}d((n=n.apply(t,e||[])).next())})},ni=class t{static createCreateRequest(e){return bd(this,void 0,void 0,function*(){let r=e.recoveryKey,n=e.updateKey,i=e.document.publicKeys,o=e.document.services;nt.validateEs256kOperationKey(r,zt.Public),nt.validateEs256kOperationKey(n,zt.Public),t.validateDidDocumentKeys(i),t.validateServices(o);let s=Xe.hashAlgorithmInMultihashCode,c=[{action:Xi.Replace,document:e.document}],u={updateCommitment:yield ct.canonicalizeThenDoubleHashThenEncode(n,s),patches:c};t.validateDeltaSize(u);let a={deltaHash:yield ct.canonicalizeThenHashThenEncode(u,s),recoveryCommitment:yield ct.canonicalizeThenDoubleHashThenEncode(r,s)};return{type:Hc.Create,suffixData:a,delta:u}})}static createDeactivateRequest(e){return bd(this,void 0,void 0,function*(){t.validateDidSuffix(e.didSuffix),nt.validateEs256kOperationKey(e.recoveryPublicKey,zt.Public);let r=Xe.hashAlgorithmInMultihashCode,n=yield ct.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),i={didSuffix:e.didSuffix,recoveryKey:e.recoveryPublicKey},o=yield e.signer.sign({alg:"ES256K"},i);return{type:Hc.Deactivate,didSuffix:e.didSuffix,revealValue:n,signedData:o}})}static createRecoverRequest(e){return bd(this,void 0,void 0,function*(){t.validateDidSuffix(e.didSuffix),nt.validateEs256kOperationKey(e.recoveryPublicKey,zt.Public),nt.validateEs256kOperationKey(e.nextRecoveryPublicKey,zt.Public),nt.validateEs256kOperationKey(e.nextUpdatePublicKey,zt.Public),t.validateDidDocumentKeys(e.document.publicKeys),t.validateServices(e.document.services);let r=Xe.hashAlgorithmInMultihashCode,n=yield ct.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),i=[{action:Xi.Replace,document:e.document}],o=yield ct.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,r),s={patches:i,updateCommitment:o},c=yield ct.canonicalizeThenHashThenEncode(s,r),d={recoveryCommitment:yield ct.canonicalizeThenDoubleHashThenEncode(e.nextRecoveryPublicKey,r),recoveryKey:e.recoveryPublicKey,deltaHash:c},a=yield e.signer.sign({alg:"ES256K"},d);return{type:Hc.Recover,didSuffix:e.didSuffix,revealValue:n,delta:s,signedData:a}})}static createUpdateRequest(e){return bd(this,void 0,void 0,function*(){if(t.validateDidSuffix(e.didSuffix),nt.validateEs256kOperationKey(e.updatePublicKey,zt.Public),nt.validateEs256kOperationKey(e.nextUpdatePublicKey,zt.Public),t.validateServices(e.servicesToAdd),t.validateDidDocumentKeys(e.publicKeysToAdd),e.idsOfServicesToRemove!==void 0)for(let p of e.idsOfServicesToRemove)nt.validateId(p);if(e.idsOfPublicKeysToRemove!==void 0)for(let p of e.idsOfPublicKeysToRemove)nt.validateId(p);let r=[],n=e.servicesToAdd;if(n!==void 0&&n.length>0){let p={action:Xi.AddServices,services:n};r.push(p)}let i=e.idsOfServicesToRemove;if(i!==void 0&&i.length>0){let p={action:Xi.RemoveServices,ids:i};r.push(p)}let o=e.publicKeysToAdd;if(o!==void 0&&o.length>0){let p={action:Xi.AddPublicKeys,publicKeys:o};r.push(p)}let s=e.idsOfPublicKeysToRemove;if(s!==void 0&&s.length>0){let p={action:Xi.RemovePublicKeys,ids:s};r.push(p)}let c=Xe.hashAlgorithmInMultihashCode,u=yield ct.canonicalizeThenHashThenEncode(e.updatePublicKey,c),d=yield ct.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,c),a={patches:r,updateCommitment:d},h=yield ct.canonicalizeThenHashThenEncode(a,c),m={updateKey:e.updatePublicKey,deltaHash:h},y=yield e.signer.sign({alg:"ES256K"},m);return{type:Hc.Update,didSuffix:e.didSuffix,revealValue:u,delta:a,signedData:y}})}static validateDidSuffix(e){ct.validateEncodedHashComputedUsingSupportedHashAlgorithm(e,"didSuffix")}static validateDidDocumentKeys(e){if(e===void 0)return;let r=new Set;for(let n of e){if(Array.isArray(n.publicKeyJwk))throw new Be(Le.DidDocumentPublicKeyMissingOrIncorrectType,"DID Document key 'publicKeyJwk' property is not a non-array object.");if(nt.validateId(n.id),r.has(n.id))throw new Be(Le.DidDocumentPublicKeyIdDuplicated,`DID Document key with ID '${n.id}' already exists.`);r.add(n.id),nt.validatePublicKeyPurposes(n.purposes)}}static validateServices(e){if(e!==void 0&&e.length!==0){let r=new Set;for(let n of e){if(t.validateService(n),r.has(n.id))throw new Be(Le.DidDocumentServiceIdDuplicated,"Service id has to be unique");r.add(n.id)}}}static validateService(e){nt.validateId(e.id);let r=30;if(e.type.length>r){let n=`Service endpoint type length ${e.type.length} exceeds max allowed length of ${r}.`;throw new Be(Le.ServiceTypeTooLong,n)}if(Array.isArray(e.serviceEndpoint)){let n="Service endpoint value cannot be an array.";throw new Be(Le.ServiceEndpointCannotBeAnArray,n)}if(typeof e.serviceEndpoint=="string"&&c2.parse(e.serviceEndpoint).error!==void 0)throw new Be(Le.ServiceEndpointStringNotValidUri,`Service endpoint string '${e.serviceEndpoint}' is not a URI.`)}static validateDeltaSize(e){let r=xr.canonicalizeAsBytes(e);if(r.length>Xe.maxCanonicalizedDeltaSizeInBytes){let n=`Delta of ${r.length} bytes exceeded limit of ${Xe.maxCanonicalizedDeltaSizeInBytes} bytes.`;throw new Be(Le.DeltaExceedsMaximumSize,n)}}};var a2=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(a){try{d(n.next(a))}catch(h){s(h)}}function u(a){try{d(n.throw(a))}catch(h){s(h)}}function d(a){a.done?o(a.value):i(a.value).then(c,u)}d((n=n.apply(t,e||[])).next())})},ps=class t{static createLongFormDid(e){return a2(this,void 0,void 0,function*(){let r=yield ni.createCreateRequest(e),n=yield t.computeDidUniqueSuffix(r.suffixData),i;Xe.network===void 0||Xe.network==="mainnet"?i=`did:ion:${n}`:i=`did:ion:${Xe.network}:${n}`;let o={suffixData:r.suffixData,delta:r.delta},s=xr.canonicalizeAsBytes(o),c=Ut.encode(s);return`${i}:${c}`})}static computeDidUniqueSuffix(e){return a2(this,void 0,void 0,function*(){let r=xr.canonicalizeAsBytes(e),n=yield ct.hash(r,Xe.hashAlgorithmInMultihashCode);return Ut.encode(n)})}};var _$=l(f(),1);var g$=l(f(),1);var mt=2n**255n-19n,wd=2n**252n+27742317777372353535851937790883648493n,Zp=0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,Qp=0x6666666666666666666666666666666666666666666666666666666666666658n,gd={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,p:mt,n:wd,h:8,Gx:Zp,Gy:Qp},Pt=(t="")=>{throw new Error(t)},p2=t=>typeof t=="string",ey=(t,e)=>!(t instanceof Uint8Array)||typeof e=="number"&&e>0&&t.length!==e?Pt("Uint8Array expected"):t,ys=t=>new Uint8Array(t),kB=(t,e)=>ey(p2(t)?ry(t):ys(t),e),ie=(t,e=mt)=>{let r=t%e;return r>=0n?r:e+r},u2=t=>t instanceof ii?t:Pt("Point expected"),d2,ii=class t{constructor(e,r,n,i){this.ex=e,this.ey=r,this.ez=n,this.et=i}static fromAffine(e){return new t(e.x,e.y,1n,ie(e.x*e.y))}static fromHex(e,r=!0){let{d:n}=gd;e=kB(e,32);let i=e.slice();i[31]=e[31]&-129;let o=CB(i);o===0n||(r&&!(0n<o&&o<mt)&&Pt("bad y coord 1"),!r&&!(0n<o&&o<2n**256n)&&Pt("bad y coord 2"));let s=ie(o*o),c=ie(s-1n),u=ie(n*s+1n),{isValid:d,value:a}=UB(c,u);d||Pt("bad y coordinate 3");let h=(a&1n)===1n;return(e[31]&128)!==0!==h&&(a=ie(-a)),new t(a,o,1n,ie(a*o))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(e){let{ex:r,ey:n,ez:i}=this,{ex:o,ey:s,ez:c}=u2(e),u=ie(r*c),d=ie(o*i),a=ie(n*c),h=ie(s*i);return u===d&&a===h}is0(){return this.equals(xd)}negate(){return new t(ie(-this.ex),this.ey,this.ez,ie(-this.et))}double(){let{ex:e,ey:r,ez:n}=this,{a:i}=gd,o=ie(e*e),s=ie(r*r),c=ie(2n*ie(n*n)),u=ie(i*o),d=e+r,a=ie(ie(d*d)-o-s),h=u+s,m=h-c,y=u-s,p=ie(a*m),b=ie(h*y),x=ie(a*y),v=ie(m*h);return new t(p,b,v,x)}add(e){let{ex:r,ey:n,ez:i,et:o}=this,{ex:s,ey:c,ez:u,et:d}=u2(e),{a,d:h}=gd,m=ie(r*s),y=ie(n*c),p=ie(o*h*d),b=ie(i*u),x=ie((r+n)*(s+c)-m-y),v=ie(b-p),S=ie(b+p),w=ie(y-a*m),B=ie(x*v),T=ie(S*w),k=ie(x*w),O=ie(v*S);return new t(B,T,O,k)}mul(e,r=!0){if(e===0n)return r===!0?Pt("cannot multiply by 0"):xd;if(typeof e=="bigint"&&0n<e&&e<wd||Pt("invalid scalar, must be < L"),!r&&this.is0()||e===1n)return this;if(this.equals(Ed))return LB(e).p;let n=xd,i=Ed;for(let o=this;e>0n;o=o.double(),e>>=1n)e&1n?n=n.add(o):r&&(i=i.add(o));return n}multiply(e){return this.mul(e)}clearCofactor(){return this.mul(BigInt(gd.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let e=this.mul(wd/2n,!1).double();return wd%2n&&(e=e.add(this)),e.is0()}toAffine(){let{ex:e,ey:r,ez:n}=this;if(this.is0())return{x:0n,y:0n};let i=m2(n);return ie(n*i)!==1n&&Pt("invalid inverse"),{x:ie(e*i),y:ie(r*i)}}toRawBytes(){let{x:e,y:r}=this.toAffine(),n=RB(r);return n[31]|=e&1n?128:0,n}toHex(){return ty(this.toRawBytes())}};ii.BASE=new ii(Zp,Qp,1n,ie(Zp*Qp));ii.ZERO=new ii(0n,1n,1n,0n);var{BASE:Ed,ZERO:xd}=ii,y2=(t,e)=>t.toString(16).padStart(e,"0"),ty=t=>Array.from(t).map(e=>y2(e,2)).join(""),ry=t=>{let e=t.length;(!p2(t)||e%2)&&Pt("hex invalid 1");let r=ys(e/2);for(let n=0;n<r.length;n++){let i=n*2,o=t.slice(i,i+2),s=Number.parseInt(o,16);(Number.isNaN(s)||s<0)&&Pt("hex invalid 2"),r[n]=s}return r},RB=t=>ry(y2(t,32*2)).reverse(),CB=t=>BigInt("0x"+ty(ys(ey(t)).reverse())),l2=(...t)=>{let e=ys(t.reduce((n,i)=>n+ey(i).length,0)),r=0;return t.forEach(n=>{e.set(n,r),r+=n.length}),e},m2=(t,e=mt)=>{(t===0n||e<=0n)&&Pt("no inverse n="+t+" mod="+e);let r=ie(t,e),n=e,i=0n,o=1n,s=1n,c=0n;for(;r!==0n;){let u=n/r,d=n%r,a=i-s*u,h=o-c*u;n=r,r=d,i=s,o=c,s=a,c=h}return n===1n?ie(i,e):Pt("no inverse")},Wr=(t,e)=>{let r=t;for(;e-- >0n;)r*=r,r%=mt;return r},OB=t=>{let r=t*t%mt*t%mt,n=Wr(r,2n)*r%mt,i=Wr(n,1n)*t%mt,o=Wr(i,5n)*i%mt,s=Wr(o,10n)*o%mt,c=Wr(s,20n)*s%mt,u=Wr(c,40n)*c%mt,d=Wr(u,80n)*u%mt,a=Wr(d,80n)*u%mt,h=Wr(a,10n)*o%mt;return{pow_p_5_8:Wr(h,2n)*t%mt,b2:r}},f2=19681161376707505956807079304988542015446066515923890162744021073123829784752n,UB=(t,e)=>{let r=ie(e*e*e),n=ie(r*r*e),i=OB(t*n).pow_p_5_8,o=ie(t*r*i),s=ie(e*o*o),c=o,u=ie(o*f2),d=s===t,a=s===ie(-t),h=s===ie(-t*f2);return d&&(o=c),(a||h)&&(o=u),(ie(o)&1n)===1n&&(o=ie(-o)),{isValid:d||a,value:o}};var Xp;var h2=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,b2={bytesToHex:ty,hexToBytes:ry,concatBytes:l2,mod:ie,invert:m2,randomBytes:t=>{let e=h2();return e||Pt("crypto.getRandomValues must be defined"),e.getRandomValues(ys(t))},sha512Async:async(...t)=>{let e=h2();e||Pt("crypto.subtle or etc.sha512Async must be defined");let r=l2(...t);return ys(await e.subtle.digest("SHA-512",r.buffer))},sha512Sync:void 0};Object.defineProperties(b2,{sha512Sync:{configurable:!1,get(){return Xp},set(t){Xp||(Xp=t)}}});var Zi=8,PB=()=>{let t=[],e=256/Zi+1,r=Ed,n=r;for(let i=0;i<e;i++){n=r,t.push(n);for(let o=1;o<2**(Zi-1);o++)n=n.add(r),t.push(n);r=n.double()}return t},LB=t=>{let e=d2||(d2=PB()),r=(a,h)=>{let m=h.negate();return a?m:h},n=xd,i=Ed,o=1+256/Zi,s=2**(Zi-1),c=BigInt(2**Zi-1),u=2**Zi,d=BigInt(Zi);for(let a=0;a<o;a++){let h=a*s,m=Number(t&c);t>>=d,m>s&&(m-=u,t+=1n);let y=h,p=h+Math.abs(m)-1,b=a%2!==0,x=m<0;m===0?i=i.add(r(b,e[y])):n=n.add(r(x,e[p]))}return{p:n,f:i}};var w$=l(f(),1);var iy=2n**256n,eo=iy-0x1000003d1n,oy=iy-0x14551231950b75fc4402da1732fc9bebfn,A2=0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,T2=0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n,_2={p:eo,n:oy,a:0n,b:7n,Gx:A2,Gy:T2},ms=32,g2=t=>Z(Z(t*t)*t+_2.b),at=(t="")=>{throw new Error(t)},Sd=t=>typeof t=="bigint",I2=t=>typeof t=="string",ny=t=>Sd(t)&&0n<t&&t<eo,B2=t=>Sd(t)&&0n<t&&t<oy,k2=(t,e)=>!(t instanceof Uint8Array)||typeof e=="number"&&e>0&&t.length!==e?at("Uint8Array expected"):t,Wc=t=>new Uint8Array(t),sy=(t,e)=>k2(I2(t)?Ad(t):Wc(t),e),Z=(t,e=eo)=>{let r=t%e;return r>=0n?r:e+r},w2=t=>t instanceof Bn?t:at("Point expected"),x2,Bn=class t{constructor(e,r,n){this.px=e,this.py=r,this.pz=n}static fromAffine(e){return new t(e.x,e.y,1n)}static fromHex(e){e=sy(e);let r,n=e[0],i=e.subarray(1),o=E2(i,0,ms),s=e.length;if(s===33&&[2,3].includes(n)){ny(o)||at("Point hex invalid: x not FE");let c=MB(g2(o)),u=(c&1n)===1n;(n&1)===1!==u&&(c=Z(-c)),r=new t(o,c,1n)}return s===65&&n===4&&(r=new t(o,E2(i,ms,2*ms),1n)),r?r.ok():at("Point is not on curve")}static fromPrivateKey(e){return zc.mul(NB(e))}get x(){return this.aff().x}get y(){return this.aff().y}equals(e){let{px:r,py:n,pz:i}=this,{px:o,py:s,pz:c}=w2(e),u=Z(r*c),d=Z(o*i),a=Z(n*c),h=Z(s*i);return u===d&&a===h}negate(){return new t(this.px,Z(-this.py),this.pz)}double(){return this.add(this)}add(e){let{px:r,py:n,pz:i}=this,{px:o,py:s,pz:c}=w2(e),{a:u,b:d}=_2,a=0n,h=0n,m=0n,y=Z(d*3n),p=Z(r*o),b=Z(n*s),x=Z(i*c),v=Z(r+n),S=Z(o+s);v=Z(v*S),S=Z(p+b),v=Z(v-S),S=Z(r+i);let w=Z(o+c);return S=Z(S*w),w=Z(p+x),S=Z(S-w),w=Z(n+i),a=Z(s+c),w=Z(w*a),a=Z(b+x),w=Z(w-a),m=Z(u*S),a=Z(y*x),m=Z(a+m),a=Z(b-m),m=Z(b+m),h=Z(a*m),b=Z(p+p),b=Z(b+p),x=Z(u*x),S=Z(y*S),b=Z(b+x),x=Z(p-x),x=Z(u*x),S=Z(S+x),p=Z(b*S),h=Z(h+p),p=Z(w*S),a=Z(v*a),a=Z(a-p),p=Z(v*b),m=Z(w*m),m=Z(m+p),new t(a,h,m)}mul(e,r=!0){if(!r&&e===0n)return vd;if(B2(e)||at("invalid scalar"),this.equals(zc))return qB(e).p;let n=vd,i=zc;for(let o=this;e>0n;o=o.double(),e>>=1n)e&1n?n=n.add(o):r&&(i=i.add(o));return n}mulAddQUns(e,r,n){return this.mul(r,!1).add(e.mul(n,!1)).ok()}toAffine(){let{px:e,py:r,pz:n}=this;if(this.equals(vd))return{x:0n,y:0n};if(n===1n)return{x:e,y:r};let i=C2(n);return Z(n*i)!==1n&&at("invalid inverse"),{x:Z(e*i),y:Z(r*i)}}assertValidity(){let{x:e,y:r}=this.aff();return(!ny(e)||!ny(r))&&at("Point invalid: x or y"),Z(r*r)===g2(e)?this:at("Point invalid: not on curve")}multiply(e){return this.mul(e)}aff(){return this.toAffine()}ok(){return this.assertValidity()}toHex(e=!0){let{x:r,y:n}=this.aff();return(e?(n&1n)===0n?"02":"03":"04")+v2(r)+(e?"":v2(n))}toRawBytes(e=!0){return Ad(this.toHex(e))}};Bn.BASE=new Bn(A2,T2,1n);Bn.ZERO=new Bn(0n,1n,0n);var{BASE:zc,ZERO:vd}=Bn,R2=(t,e)=>t.toString(16).padStart(e,"0"),cy=t=>Array.from(t).map(e=>R2(e,2)).join(""),Ad=t=>{let e=t.length;(!I2(t)||e%2)&&at("hex invalid 1");let r=Wc(e/2);for(let n=0;n<r.length;n++){let i=n*2,o=t.slice(i,i+2),s=Number.parseInt(o,16);(Number.isNaN(s)||s<0)&&at("hex invalid 2"),r[n]=s}return r},Td=t=>BigInt("0x"+(cy(t)||"0")),E2=(t,e,r)=>Td(t.slice(e,r)),ay=t=>Sd(t)&&t>=0n&&t<iy?Ad(R2(t,2*ms)):at("bigint expected"),v2=t=>cy(ay(t)),D2=(...t)=>{let e=Wc(t.reduce((n,i)=>n+k2(i).length,0)),r=0;return t.forEach(n=>{e.set(n,r),r+=n.length}),e},C2=(t,e=eo)=>{(t===0n||e<=0n)&&at("no inverse n="+t+" mod="+e);let r=Z(t,e),n=e,i=0n,o=1n,s=1n,c=0n;for(;r!==0n;){let u=n/r,d=n%r,a=i-s*u,h=o-c*u;n=r,r=d,i=s,o=c,s=a,c=h}return n===1n?Z(i,e):at("no inverse")},MB=t=>{let e=1n;for(let r=t,n=(eo+1n)/4n;n>0n;n>>=1n)n&1n&&(e=e*r%eo),r=r*r%eo;return Z(e*e)===t?e:at("sqrt invalid")},NB=t=>(Sd(t)||(t=Td(sy(t,ms))),B2(t)?t:at("private key out of range"));var S2=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,Dd;function $B(t){t=sy(t);let e=ms+8;(t.length<e||t.length>1024)&&at("expected proper params");let r=Z(Td(t),oy-1n)+1n;return ay(r)}var O2={hexToBytes:Ad,bytesToHex:cy,concatBytes:D2,bytesToNumberBE:Td,numberToBytesBE:ay,mod:Z,invert:C2,hmacSha256Async:async(t,...e)=>{let r=S2();if(!r)return at("etc.hmacSha256Async not set");let n=r.subtle,i=await n.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return Wc(await n.sign("HMAC",i,D2(...e)))},hmacSha256Sync:Dd,hashToPrivateKey:$B,randomBytes:t=>{let e=S2();return e||at("crypto.getRandomValues must be defined"),e.getRandomValues(Wc(t))}};Object.defineProperties(O2,{hmacSha256Sync:{configurable:!1,get(){return Dd},set(t){Dd||(Dd=t)}}});var Qi=8,FB=()=>{let t=[],e=256/Qi+1,r=zc,n=r;for(let i=0;i<e;i++){n=r,t.push(n);for(let o=1;o<2**(Qi-1);o++)n=n.add(r),t.push(n);r=n.double()}return t},qB=t=>{let e=x2||(x2=FB()),r=(a,h)=>{let m=h.negate();return a?m:h},n=vd,i=zc,o=1+256/Qi,s=2**(Qi-1),c=BigInt(2**Qi-1),u=2**Qi,d=BigInt(Qi);for(let a=0;a<o;a++){let h=a*s,m=Number(t&c);t>>=d,m>s&&(m-=u,t+=1n);let y=h,p=h+Math.abs(m)-1,b=a%2!==0,x=m<0;m===0?i=i.add(r(b,e[y])):n=n.add(r(x,e[p]))}return{p:n,f:i}};var B$=l(f(),1),P2;(function(t){t.Mainnet="mainnet",t.Testnet="test"})(P2||(P2={}));var R$=l(f(),1),L2;(function(t){t.Authentication="authentication",t.AssertionMethod="assertionMethod",t.CapabilityInvocation="capabilityInvocation",t.CapabilityDelegation="capabilityDelegation",t.KeyAgreement="keyAgreement"})(L2||(L2={}));var N$=l(f(),1);var M2=(i=>(i.Ed25519="Ed25519",i.secp256k1="secp256k1",i.secp256r1="secp256r1",i.X25519="X25519",i))(M2||{}),VB={Ed25519:"Ed25519",ES256K:"secp256k1",ES256:"secp256r1","P-256":"secp256r1",secp256k1:"secp256k1",secp256r1:"secp256r1"},K2="https://ion.tbd.engineering",to=class to extends Ht{static async create({keyManager:e=new wt,options:r={}}={}){if(r.verificationMethods?.some(p=>!(p.algorithm in VB)))throw new Error("One or more verification method algorithms are not supported");let n=r.verificationMethods?.filter(p=>"id"in p).map(p=>p.id);if(n&&n.length!==new Set(n).size)throw new Error("One or more verification method IDs are not unique");if(r.services?.some(p=>!p.id||!p.type||!p.serviceEndpoint))throw new Error("One or more services are missing required properties");let i={algorithm:"Ed25519",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]},o=[];for(let p of r.verificationMethods??[i]){let b=await e.generateKey({algorithm:p.algorithm}),x=await e.getPublicKey({keyUri:b});o.push({id:p.id,publicKeyJwk:x,purposes:p.purposes??["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]})}let s=await e.generateKey({algorithm:"secp256k1"}),c=await e.getPublicKey({keyUri:s}),u=await e.generateKey({algorithm:"secp256k1"}),d=await e.getPublicKey({keyUri:u}),a=await oi.computeLongFormDidUri({recoveryKey:c,updateKey:d,services:r.services??[],verificationMethods:o}),{didDocument:h,didResolutionMetadata:m}=await to.resolve(a,{gatewayUri:r.gatewayUri});if(h===null)throw new Error(`Unable to resolve DID during creation: ${m?.error}`);let y=new Dt({uri:a,document:h,metadata:{published:!1,canonicalId:a.split(":",3).join(":"),recoveryKey:c,updateKey:d},keyManager:e});if(r.publish??!0){let p=await to.publish({did:y,gatewayUri:r.gatewayUri});y.metadata=p.didDocumentMetadata}return y}static async getSigningMethod({didDocument:e,methodId:r}){let n=Ue.parse(e.id);if(n&&n.method!==this.methodName)throw new Y("methodNotSupported",`Method not supported: ${n.method}`);let i=e.verificationMethod?.find(o=>o.id===(r??e.assertionMethod?.[0]));if(!(i&&i.publicKeyJwk))throw new Y("internalError","A verification method intended for signing could not be determined from the DID Document");return i}static async import({portableDid:e,keyManager:r=new wt}){if(Ue.parse(e.uri)?.method!==to.methodName)throw new Y("methodNotSupported","Method not supported");return await Dt.import({portableDid:e,keyManager:r})}static async publish({did:e,gatewayUri:r=K2}){let n=e.document.verificationMethod?.map(s=>({id:s.id,publicKeyJwk:s.publicKeyJwk,purposes:qh({didDocument:e.document,methodId:s.id})}))??[],i=await oi.createIonDocument({services:e.document.service??[],verificationMethods:n}),o=await oi.constructCreateRequest({ionDocument:i,recoveryKey:e.metadata.recoveryKey,updateKey:e.metadata.updateKey});try{let s=oi.appendPathToUrl({baseUrl:r,path:"/operations"}),c=await fetch(s,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});return{didDocument:e.document,didDocumentMetadata:{...e.metadata,published:c.ok},didRegistrationMetadata:{}}}catch{return{didDocument:null,didDocumentMetadata:{published:!1},didRegistrationMetadata:{error:"internalError",errorMessage:`Failed to publish DID document for: ${e.uri}`}}}}static async resolve(e,r={}){let n=Ue.parse(e);if(!n)return{...Oe,didResolutionMetadata:{error:"invalidDid"}};if(n.method!==to.methodName)return{...Oe,didResolutionMetadata:{error:"methodNotSupported"}};let i=r?.gatewayUri??K2;try{let o=oi.appendPathToUrl({baseUrl:i,path:`/identifiers/${e}`}),s=await fetch(o);if(!s.ok)throw new Y("notFound",`Unable to find DID document for: ${e}`);let{didDocument:c,didDocumentMetadata:u}=await s.json();return{...Oe,...c&&{didDocument:c},didDocumentMetadata:{published:u?.method?.published,...u}}}catch(o){if(!(o instanceof Y))throw new Error(o);return{...Oe,didResolutionMetadata:{error:o.code,...o.message&&{errorMessage:o.message}}}}}};to.methodName="ion";var uy=to,oi=class t{static appendPathToUrl({baseUrl:e,path:r}){let n=new URL(e);return n.pathname=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",n.pathname+=r.startsWith("/")?r.substring(1):r,n.toString()}static async computeLongFormDidUri({recoveryKey:e,updateKey:r,services:n,verificationMethods:i}){let o=await t.createIonDocument({services:n,verificationMethods:i}),s=t.normalizeJwk(e),c=t.normalizeJwk(r);return await ps.createLongFormDid({document:o,recoveryKey:s,updateKey:c})}static async constructCreateRequest({ionDocument:e,recoveryKey:r,updateKey:n}){return await ni.createCreateRequest({document:e,recoveryKey:t.normalizeJwk(r),updateKey:t.normalizeJwk(n)})}static async createIonDocument({services:e,verificationMethods:r}){let n=[];for(let s of r){let c=s.id??s.publicKeyJwk.kid??await fe({jwk:s.publicKeyJwk});c=`${c.split("#").pop()}`;let u={id:c,publicKeyJwk:t.normalizeJwk(s.publicKeyJwk),purposes:s.purposes,type:"JsonWebKey2020"};n.push(u)}let i=e.map(s=>({...s,id:`${s.id.split("#").pop()}`}));return{publicKeys:n,services:i}}static normalizeJwk(e){let r=e.kty,n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);return n}};var bF=l(f(),1);var ro=class ro extends Ht{static async create({keyManager:e=new wt,options:r={}}={}){if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let n=r.algorithm??r.verificationMethods?.[0]?.algorithm??"Ed25519",i=await e.generateKey({algorithm:n}),o=await e.getPublicKey({keyUri:i}),s=W.object(o).toBase64Url(),c=`did:${ro.methodName}:${s}`,d=(await ro.resolve(c)).didDocument;return new Dt({uri:c,document:d,metadata:{},keyManager:e})}static async getSigningMethod({didDocument:e}){let r=Ue.parse(e.id);if(r&&r.method!==this.methodName)throw new Y("methodNotSupported",`Method not supported: ${r.method}`);let[n]=e.verificationMethod??[];if(!(n&&n.publicKeyJwk))throw new Y("internalError","A verification method intended for signing could not be determined from the DID Document");return n}static async import({portableDid:e,keyManager:r=new wt}){if(Ue.parse(e.uri)?.method!==ro.methodName)throw new Y("methodNotSupported","Method not supported");let i=await Dt.import({portableDid:e,keyManager:r});if(i.document.verificationMethod.length!==1)throw new Y("invalidDidDocument","DID document must contain exactly one verification method");return i}static async resolve(e,r){let n=Ue.parse(e),i;try{i=W.base64Url(n.id).toObject()}catch{}if(!n||!i)return{...Oe,didResolutionMetadata:{error:"invalidDid"}};if(n.method!==ro.methodName)return{...Oe,didResolutionMetadata:{error:"methodNotSupported"}};let o={"@context":["https://www.w3.org/ns/did/v1"],id:n.uri},s=`${o.id}#0`;switch(o.verificationMethod=[{id:s,type:"JsonWebKey",controller:o.id,publicKeyJwk:i}],o.authentication=[s],o.assertionMethod=[s],o.capabilityInvocation=[s],o.capabilityDelegation=[s],o.keyAgreement=[s],i.use){case"sig":{delete o.keyAgreement;break}case"enc":{delete o.authentication,delete o.assertionMethod,delete o.capabilityInvocation,delete o.capabilityDelegation;break}}return{...Oe,didDocument:o}}};ro.methodName="jwk";var dy=ro;var _F=l(f(),1);var N2=(i=>(i.Ed25519="Ed25519",i.secp256k1="secp256k1",i.secp256r1="secp256r1",i.X25519="X25519",i))(N2||{}),_d={Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1"},jB={Ed25519:"Ed25519",ES256K:"secp256k1",ES256:"secp256r1","P-256":"secp256r1",secp256k1:"secp256k1",secp256r1:"secp256r1",X25519:"X25519"},vr=class vr extends Ht{static async create({keyManager:e=new wt,options:r={}}={}){if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let n=r.algorithm??r.verificationMethods?.[0]?.algorithm??"Ed25519",i=await e.generateKey({algorithm:n}),o=await e.getPublicKey({keyUri:i}),s=await ur.publicKeyToMultibaseId({publicKey:o}),c=`did:${vr.methodName}:${s}`,d=(await vr.resolve(c,r)).didDocument;return new Dt({uri:c,document:d,metadata:{},keyManager:e})}static async getSigningMethod({didDocument:e}){let r=Ue.parse(e.id);if(r&&r.method!==this.methodName)throw new Y("methodNotSupported",`Method not supported: ${r.method}`);let[n]=e.assertionMethod||[],i=e.verificationMethod?.find(o=>o.id===n);if(!(i&&i.publicKeyJwk))throw new Y("internalError","A verification method intended for signing could not be determined from the DID Document");return i}static async import({portableDid:e,keyManager:r=new wt}){if(Ue.parse(e.uri)?.method!==vr.methodName)throw new Y("methodNotSupported","Method not supported");let i=await Dt.import({portableDid:e,keyManager:r});if(i.document.verificationMethod.length!==1)throw new Y("invalidDidDocument","DID document must contain exactly one verification method");return i}static async resolve(e,r){try{let n=await vr.createDocument({didUri:e,options:r});return{...Oe,didDocument:n}}catch(n){if(!(n instanceof Y))throw new Error(n);return{...Oe,didResolutionMetadata:{error:n.code,...n.message&&{errorMessage:n.message}}}}}static async createDocument({didUri:e,options:r={}}){let{defaultContext:n="https://www.w3.org/ns/did/v1",enableEncryptionKeyDerivation:i=!1,enableExperimentalPublicKeyTypes:o=!1,publicKeyFormat:s="JsonWebKey2020"}=r,c={id:""},u=Ue.parse(e);if(!u)throw new Y("invalidDid",`Invalid DID URI: ${e}`);let d=u.id;if(u.method!==vr.methodName)throw new Y("methodNotSupported",`Method not supported: ${u.method}`);if(!vr.validateIdentifier(u))throw new Y("invalidDid",`Invalid DID URI: ${e}`);let a=await vr.createSignatureMethod({didUri:e,multibaseValue:d,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:s}});if(c.id=u.uri,c.verificationMethod=[a],c.authentication=[a.id],c.assertionMethod=[a.id],c.capabilityInvocation=[a.id],c.capabilityDelegation=[a.id],i===!0){let y=s==="Ed25519VerificationKey2020"?"X25519KeyAgreementKey2020":"JsonWebKey2020",p=await this.createEncryptionMethod({didUri:e,multibaseValue:d,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:y}});c.verificationMethod.push(p),c.keyAgreement=[p.id]}let h=[n];return Fh({didDocument:c}).forEach(y=>{let p=_d[y];h.push(p)}),c["@context"]=h,c}static async createEncryptionMethod({didUri:e,multibaseValue:r,options:n}){let{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=n,s={id:"",type:"",controller:""},{keyBytes:c,multicodecCode:u}=await vr.deriveEncryptionKey({multibaseValue:r}),d=c.byteLength,a=ur.MULTICODEC_PUBLIC_KEY_LENGTH[u];if(d!==a)throw new Y("invalidPublicKeyLength",`Expected ${d} bytes. Actual: ${a}`);let h=Pu({keyBytes:c,multicodecCode:u});s.id=`${e}#${h}`;try{new URL(s.id)}catch{throw new Y("invalidDidUrl","Verification Method ID is not a valid DID URL.")}if(!(o in _d))throw new Y("unsupportedPublicKeyType",`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","X25519KeyAgreementKey2020"].includes(o))throw new Y("invalidPublicKeyType",`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(s.type=o,s.controller=e,o==="X25519KeyAgreementKey2020"&&(s.publicKeyMultibase=h),o==="JsonWebKey2020"){let{crv:y}=await ur.multicodecToJwk({code:u});s.publicKeyJwk=await ur.keyConverter(y).bytesToPublicKey({publicKeyBytes:c})}return s}static async createSignatureMethod({didUri:e,multibaseValue:r,options:n}){let{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=n,s={id:"",type:"",controller:""},{keyBytes:c,multicodecCode:u,multicodecName:d}=Lu({multibaseKeyId:r}),a=c.byteLength,h=ur.MULTICODEC_PUBLIC_KEY_LENGTH[u];if(a!==h)throw new Y("invalidPublicKeyLength",`Expected ${a} bytes. Actual: ${h}`);let m=!1;switch(d){case"secp256k1-pub":m=await Rt.validatePublicKey({publicKeyBytes:c});break;case"ed25519-pub":m=await st.validatePublicKey({publicKeyBytes:c});break;case"x25519-pub":m=!0;break}if(!m)throw new Y("invalidPublicKey","Invalid public key detected.");s.id=`${e}#${r}`;try{new URL(s.id)}catch{throw new Y("invalidDidUrl","Verification Method ID is not a valid DID URL.")}if(!(o in _d))throw new Y("unsupportedPublicKeyType",`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","Ed25519VerificationKey2020"].includes(o))throw new Y("invalidPublicKeyType",`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(s.type=o,s.controller=e,o==="Ed25519VerificationKey2020"&&(s.publicKeyMultibase=r),o==="JsonWebKey2020"){let{crv:p}=await ur.multicodecToJwk({code:u});s.publicKeyJwk=await ur.keyConverter(p).bytesToPublicKey({publicKeyBytes:c})}return s}static async deriveEncryptionKey({multibaseValue:e}){let r={keyBytes:new Uint8Array,multicodecCode:0},{keyBytes:n,multicodecCode:i}=Lu({multibaseKeyId:e});if(i===237){let o=await ur.keyConverter("Ed25519").bytesToPublicKey({publicKeyBytes:n}),s=await st.convertPublicKeyToX25519({publicKey:o});r={keyBytes:await ur.keyConverter("Ed25519").publicKeyToBytes({publicKey:s}),multicodecCode:236}}return r}static validateIdentifier(e){let{method:r,id:n}=e,[i]=e.uri.split(":",1);return i==="did"&&r==="key"&&Number("1")>0&&bo(n)==="String"&&n.startsWith("z")}};vr.methodName="key";var ly=vr,Gr=class Gr{static async jwkToMulticodec({jwk:e}){let r=[];e.crv&&(r.push(e.crv),e.d?r.push("private"):r.push("public"));let n=r.join(":"),i=Gr.JWK_TO_MULTICODEC[n];if(i===void 0)throw new Error(`Unsupported JWK to Multicodec conversion: '${n}'`);return{code:bt.getCodeFromName({name:i}),name:i}}static keyCompressor(e){let n={"P-256":qt.compressPublicKey,secp256k1:Rt.compressPublicKey}[e];if(!n)throw new Y("invalidPublicKeyType",`Unsupported curve: ${e}`);return n}static keyConverter(e){let n={Ed25519:st,"P-256":qt,secp256k1:Rt,X25519:Cu}[e];if(!n)throw new Y("invalidPublicKeyType",`Unsupported curve: ${e}`);return n}static async multicodecToJwk({code:e,name:r}){if(!(r?!e:e))throw new Error("Either 'name' or 'code' must be defined, but not both.");r=r===void 0?bt.getNameFromCode({code:e}):r;let n=r,i=Gr.MULTICODEC_TO_JWK[n];if(i===void 0)throw new Error("Unsupported Multicodec to JWK conversion");return{...i}}static async publicKeyToMultibaseId({publicKey:e}){if(!(e?.crv&&e.crv in jB))throw new Y("invalidPublicKeyType",`Public key contains an unsupported key type: ${e?.crv??"undefined"}`);let r=await Gr.keyConverter(e.crv).publicKeyToBytes({publicKey:e});/^(secp256k1|P-256|P-384|P-521)$/.test(e.crv)&&(r=await Gr.keyCompressor(e.crv)({publicKeyBytes:r}));let{name:n}=await Gr.jwkToMulticodec({jwk:e});return Pu({keyBytes:r,multicodecName:n})}};Gr.JWK_TO_MULTICODEC={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"},Gr.MULTICODEC_PUBLIC_KEY_LENGTH={231:33,236:32,237:32},Gr.MULTICODEC_TO_JWK={"ed25519-pub":{crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}};var ur=Gr;var CF=l(f(),1);var Id=class Id extends Ht{static async resolve(e,r){let n=Ue.parse(e);if(!n)return{...Oe,didResolutionMetadata:{error:"invalidDid"}};if(n.method!==Id.methodName)return{...Oe,didResolutionMetadata:{error:"methodNotSupported"}};let i=`https://${n.id.replace(/:/g,"/")}`;i=decodeURIComponent(i);let o=n.id.includes(":")?`${i}/did.json`:`${i}/.well-known/did.json`;try{let s=await fetch(o);if(!s.ok)throw new Error("HTTP error status code returned");let c=await s.json();return{...Oe,didDocument:c}}catch{return{...Oe,didResolutionMetadata:{error:"notFound"}}}}};Id.methodName="web";var fy=Id;var LF=l(f(),1),q2=l(F2(),1),V2=l(Yl(),1),hy=class{constructor({db:e,location:r="DATA/DID_RESOLVERCACHE",ttl:n="15m"}={}){this.cache=e??new V2.Level(r),this.ttl=(0,q2.default)(n)}async get(e){try{let r=await this.cache.get(e),n=JSON.parse(r);if(Date.now()>=n.ttlMillis){this.cache.nextTick(()=>this.cache.del(e));return}else return n.value}catch(r){if(r.notFound)return;throw r}}set(e,r){let n={ttlMillis:Date.now()+this.ttl,value:r},i=JSON.stringify(n);return this.cache.put(e,i)}delete(e){return this.cache.del(e)}clear(){return this.cache.clear()}close(){return this.cache.close()}};var MF=l(f(),1),py={get:function(t){return null},set:function(t,e){return null},delete:function(t){return null},clear:function(){return null},close:function(){return null}};var jF=l(f(),1);var yy=class{constructor({cache:e,didResolvers:r}){this.didResolvers=new Map;this.cache=e||py;for(let n of r)this.didResolvers.set(n.methodName,n)}async resolve(e,r){let n=Ue.parse(e);if(!n)return{...Oe,didResolutionMetadata:{error:"invalidDid",errorMessage:`Invalid DID URI: ${e}`}};let i=this.didResolvers.get(n.method);if(!i)return{...Oe,didResolutionMetadata:{error:"methodNotSupported",errorMessage:`Method not supported: ${n.method}`}};let o=await this.cache.get(n.uri);if(o)return o;{let s=await i.resolve(n.uri,r);return await this.cache.set(n.uri,s),s}}async dereference(e,r){let n=Ue.parse(e);if(!n)return{dereferencingMetadata:{error:"invalidDidUrl"},contentStream:null,contentMetadata:{}};let{didDocument:i,didResolutionMetadata:o,didDocumentMetadata:s}=await this.resolve(n.uri);if(!i)return{dereferencingMetadata:{error:o.error},contentStream:null,contentMetadata:{}};if(!n.fragment||n.query)return{dereferencingMetadata:{contentType:"application/did+json"},contentStream:i,contentMetadata:s};let{service:c=[],verificationMethod:u=[]}=i,d=new Set([e,n.fragment,`#${n.fragment}`]),a;for(let h of u)if(d.has(h.id)){a=h;break}for(let h of c)if(d.has(h.id)){a=h;break}return a?{dereferencingMetadata:{contentType:"application/did+json"},contentStream:a,contentMetadata:o}:{dereferencingMetadata:{error:"notFound"},contentStream:null,contentMetadata:{}}}};return ia(YB);})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/montgomery.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ciphers/esm/utils.js:
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)

uint8-util/util.js:
  (* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)
  *
  * @author   Jimmy Wärting <jimmy@warting.se> (https://jimmy.warting.se/opensource)
  * @license  MIT
  *)

@noble/ed25519/index.js:
  (*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/secp256k1/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=browser.js.map
